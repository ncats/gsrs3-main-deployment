"use strict";(self.webpackChunkgsrs_client=self.webpackChunkgsrs_client||[]).push([[4371],{34371:function(Ra,M,_){_.r(M),_.d(M,{SubstanceProductsModule:function(){return Ma}});var g=_(48047),b=_(78069),v=_(36362),F=_(75143),C=_(24582),x=_(7318),y=_(40104),z=_(42154),$=_(68756),t=_(76442),E=function(){var e=function(n){(0,C.Z)(o,n);var i=(0,x.Z)(o);function o(c,a){var s;return(0,b.Z)(this,o),(s=i.call(this,c)).gaService=c,s.service=a,s.results=[],s.isAdmin=!1,s}return(0,g.Z)(o,[{key:"ngOnInit",value:function(){}},{key:"setPageEvent",value:function(a){null!=a&&(this.page=a.pageIndex,this.pageSize=a.pageSize)}},{key:"setResultData",value:function(a,s){this.results=a,this.filtered=a,this.totalRecords=this.service.totalRecords,this.pageChangeFda()}},{key:"pageChangeFda",value:function(a,s){if(this.paged=[],this.filtered)for(var u=0;u<this.filtered.length&&null!=this.filtered[u];u++)this.paged.push(this.filtered[u])}}]),o}($.uJ);return e.\u0275fac=function(i){t.$Z()},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac}),e}(),Y=_(53141),U=_(44250),I=_(59295),N=_(35096),f=_(98002),D=_(83448),P=_(95758),q=_(12379),S=_(87317),T=_(65590),A=_(74742),d=_(97217),Z=_(26439),B=_(63322),Q=_(48968);function j(e,n){1&e&&(t.TgZ(0,"div"),t._UZ(1,"br"),t.TgZ(2,"div",3),t.TgZ(3,"b"),t._uU(4,"No Application Found"),t.qZA(),t.qZA(),t._UZ(5,"br"),t.qZA())}function H(e,n){if(1&e){var i=t.EpF();t.TgZ(0,"span",22),t.TgZ(1,"button",23),t.NdJ("click",function(){return t.CHM(i),t.oxw(2).export()}),t._UZ(2,"mat-icon",24),t._uU(3," Export All Applications "),t.qZA(),t.qZA()}}function G(e,n){1&e&&(t.TgZ(0,"div",25),t._UZ(1,"mat-progress-spinner",26),t.qZA())}function W(e,n){1&e&&(t.TgZ(0,"th",27),t._uU(1," Application Type "),t.qZA())}var K=function(n){return["/application",n,"edit"]};function X(e,n){if(1&e&&(t.TgZ(0,"a",31),t._UZ(1,"mat-icon",32),t.qZA()),2&e){var i=t.oxw(2).$implicit;t.Q6J("routerLink",t.VKq(1,K,i.id))}}var V=function(n){return["/application",n]};function tt(e,n){if(1&e&&(t.TgZ(0,"span"),t.TgZ(1,"a",29),t._uU(2),t.qZA(),t._uU(3," \xa0\xa0 "),t.YNc(4,X,2,3,"a",30),t.qZA()),2&e){var i=t.oxw().$implicit,o=t.oxw(2);t.xp6(1),t.Q6J("routerLink",t.VKq(3,V,i.id)),t.xp6(1),t.Oqu(i.appType),t.xp6(2),t.Q6J("ngIf",o.isAdmin)}}var et=function(n,i){return["/application-darrts",n,i]};function nt(e,n){if(1&e&&(t.TgZ(0,"span"),t.TgZ(1,"a",29),t._uU(2),t.qZA(),t._UZ(3,"br"),t.TgZ(4,"span",33),t._uU(5,"(Integrity)"),t.qZA(),t.qZA()),2&e){var i=t.oxw().$implicit;t.xp6(1),t.Q6J("routerLink",t.WLB(2,et,i.appType,i.appNumber)),t.xp6(1),t.Oqu(i.appType)}}function at(e,n){if(1&e&&(t.TgZ(0,"td",28),t.YNc(1,tt,5,5,"span",0),t.YNc(2,nt,6,5,"span",0),t.qZA()),2&e){var i=n.$implicit;t.xp6(1),t.Q6J("ngIf",i.fromTable&&"GSRS"===i.fromTable),t.xp6(1),t.Q6J("ngIf",i.fromTable&&"GSRS"!==i.fromTable)}}function it(e,n){1&e&&(t.TgZ(0,"th",27),t._uU(1," Application Number "),t.qZA())}function ot(e,n){if(1&e&&(t.TgZ(0,"td",28),t._uU(1),t.qZA()),2&e){var i=n.$implicit;t.xp6(1),t.hij(" ",i.appNumber," ")}}function st(e,n){1&e&&(t.TgZ(0,"th",27),t._uU(1," Product Name "),t.qZA())}function rt(e,n){if(1&e&&(t.TgZ(0,"div",36),t._uU(1),t.qZA()),2&e){var i=n.$implicit;t.xp6(1),t.hij(" ",i.productName," ")}}function ct(e,n){if(1&e&&(t.TgZ(0,"div"),t.YNc(1,rt,2,1,"div",35),t.qZA()),2&e){var i=n.$implicit;t.xp6(1),t.Q6J("ngForOf",i.applicationProductNameList)}}function ut(e,n){if(1&e&&(t.TgZ(0,"td",28),t.YNc(1,ct,2,1,"div",34),t.qZA()),2&e){var i=n.$implicit;t.xp6(1),t.Q6J("ngForOf",i.applicationProductList)}}function pt(e,n){1&e&&(t.TgZ(0,"th",27),t._uU(1," Sponsor Name "),t.qZA())}function lt(e,n){if(1&e&&(t.TgZ(0,"td",28),t._uU(1),t.qZA()),2&e){var i=n.$implicit;t.xp6(1),t.hij(" ",i.sponsorName," ")}}function dt(e,n){1&e&&(t.TgZ(0,"th",27),t._uU(1," Application Status "),t.qZA())}function mt(e,n){if(1&e&&(t.TgZ(0,"td",28),t._uU(1),t.qZA()),2&e){var i=n.$implicit;t.xp6(1),t.hij(" ",i.appStatus," ")}}function _t(e,n){1&e&&(t.TgZ(0,"th",27),t._uU(1," Application Sub Type "),t.qZA())}function vt(e,n){if(1&e&&(t.TgZ(0,"td",28),t._uU(1),t.qZA()),2&e){var i=n.$implicit;t.xp6(1),t.hij(" ",i.appSubType," ")}}function ft(e,n){1&e&&t._UZ(0,"tr",37)}function gt(e,n){1&e&&t._UZ(0,"tr",38)}var bt=function(){return[5,10,25,100]};function ht(e,n){if(1&e){var i=t.EpF();t.TgZ(0,"mat-tab",4),t.TgZ(1,"div",5),t.TgZ(2,"b"),t._uU(3),t.qZA(),t._uU(4," \xa0\xa0\xa0 "),t.TgZ(5,"span",6),t._uU(6),t.qZA(),t._uU(7," \xa0\xa0\xa0 "),t.YNc(8,H,4,0,"span",7),t.qZA(),t.TgZ(9,"div",8),t.YNc(10,G,2,0,"div",9),t.TgZ(11,"table",10),t.ynx(12,11),t.YNc(13,W,2,0,"th",12),t.YNc(14,at,3,2,"td",13),t.BQk(),t.ynx(15,14),t.YNc(16,it,2,0,"th",12),t.YNc(17,ot,2,1,"td",13),t.BQk(),t.ynx(18,15),t.YNc(19,st,2,0,"th",12),t.YNc(20,ut,2,1,"td",13),t.BQk(),t.ynx(21,16),t.YNc(22,pt,2,0,"th",12),t.YNc(23,lt,2,1,"td",13),t.BQk(),t.ynx(24,17),t.YNc(25,dt,2,0,"th",12),t.YNc(26,mt,2,1,"td",13),t.BQk(),t.ynx(27,18),t.YNc(28,_t,2,0,"th",12),t.YNc(29,vt,2,1,"td",13),t.BQk(),t.YNc(30,ft,1,0,"tr",19),t.YNc(31,gt,1,0,"tr",20),t.qZA(),t.qZA(),t.TgZ(32,"mat-paginator",21),t.NdJ("page",function(s){return t.CHM(i),t.oxw().getApplicationBySubstanceKeyCenter(s)}),t.qZA(),t.qZA()}if(2&e){var o=n.$implicit,c=t.oxw();t.s9C("label",o),t.xp6(3),t.hij(" ",o,""),t.xp6(3),t.Oqu(c.loadingStatus),t.xp6(2),t.Q6J("ngIf",c.isAdmin),t.xp6(2),t.Q6J("ngIf",c.showSpinner),t.xp6(1),t.Q6J("dataSource",c.paged),t.xp6(19),t.Q6J("matHeaderRowDef",c.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",c.displayedColumns),t.xp6(1),t.Q6J("length",c.totalRecords)("pageSize",5)("pageSizeOptions",t.DdM(11,bt))}}var Ct=function(){var e=function(n){(0,C.Z)(o,n);var i=(0,x.Z)(o);function o(c,a,s,u,l,m,p){var r;return(0,b.Z)(this,o),(r=i.call(this,u,l)).router=c,r.authService=a,r.loadingService=s,r.gaService=u,r.applicationService=l,r.generalService=m,r.dialog=p,r.applicationCount=0,r.totalApplication=0,r.centerList=[],r.centerListOriginal=[],r.center="",r.fromTable="",r.loadingStatus="",r.showSpinner=!1,r.foundCenterList=!1,r.loadingComplete=!1,r.privateExport=!1,r.disableExport=!1,r.etag="",r.etagAllExport="",r.countApplicationOut=new t.vpe,r.displayedColumns=["appType","appNumber","productName","sponsorName","applicationStatus","applicationSubType"],r}return(0,g.Z)(o,[{key:"ngOnInit",value:function(){var a=this;this.authService.hasAnyRolesAsync("Admin","Updater","SuperUpdater").pipe((0,I.q)(1)).subscribe(function(s){a.isAdmin=s}),this.bdnum&&(this.getApplicationCenterList(),this.privateSearch="root_applicationProductList_applicationIngredientList_substanceKey:"+this.bdnum,this.getApplicationBySubstanceKeyCenter(null,"initial"))}},{key:"getApplicationCenterList",value:function(){var a=this;this.applicationService.getApplicationCenterList(this.bdnum).subscribe(function(s){a.centerListOriginal=s,a.centerList=s,a.centerList&&a.centerList.length>0&&(a.foundCenterList=!0),a.loadingComplete=!0})}},{key:"applicationTabSelected",value:function(a){if(a){var u=a.tab.textLabel;if(null!=u){this.loadingStatus="Loading data...";var l=u.indexOf(" ");this.center=u.slice(0,l),this.fromTable=u.slice(l+1,u.length)}this.paged=[],this.privateSearch="root_applicationProductList_applicationIngredientList_substanceKey:"+this.bdnum+" AND root_center:"+this.center+" AND root_fromTable: "+this.fromTable,this.getApplicationBySubstanceKeyCenter()}}},{key:"getApplicationBySubstanceKeyCenter",value:function(a,s){var u=this;this.setPageEvent(a),this.showSpinner=!0;var m=this.applicationService.getApplicationAll("default",this.page*this.pageSize,this.pageSize,this.privateSearch,this.privateFacetParams).subscribe(function(p){s&&"initial"===s?u.etagAllExport=p.etag:(u.applicationService.totalRecords=p.total,u.applicationCount=p.total,u.setResultData(p.content),u.etag=p.etag,u.countApplicationOut.emit(u.applicationCount))},function(p){console.log("error")},function(){m.unsubscribe()});this.loadingStatus="",this.showSpinner=!1}},{key:"export",value:function(){var a=this;if(this.etagAllExport){var s="xlsx",u=this.getApiExportUrl(this.etagAllExport,s);""!==this.authService.getUser()&&this.dialog.open(N.L,{height:"215x",width:"550px",data:{extension:s,type:"substanceApplication"}}).afterClosed().subscribe(function(m){m&&""!==m&&(a.loadingService.setLoading(!0),a.authService.startUserDownload(u,a.privateExport,m+"."+s).subscribe(function(r){a.loadingService.setLoading(!1),a.router.navigate(["/user-downloads/",r.id])},function(r){return a.loadingService.setLoading(!1)}))})}}},{key:"getApiExportUrl",value:function(a,s){return this.applicationService.getAppAllApiExportUrl(a,s)}},{key:"updateApplicationUrl",get:function(){return this.applicationService.getUpdateApplicationUrl()}},{key:"applicationListExportUrl",value:function(){null!=this.bdnum&&(this.exportUrl=this.applicationService.getApplicationListExportUrl(this.bdnum))}}]),o}(E);return e.\u0275fac=function(i){return new(i||e)(t.Y36(f.F0),t.Y36(U.e),t.Y36(D.b),t.Y36(y.$),t.Y36(B.I),t.Y36(Q.m),t.Y36(P.uw))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-substance-application"]],inputs:{bdnum:"bdnum"},outputs:{countApplicationOut:"countApplicationOut"},features:[t.qOj],decls:3,vars:2,consts:[[4,"ngIf"],[3,"selectedTabChange"],[3,"label",4,"ngFor","ngForOf"],[1,"padleft25px","colorblue"],[3,"label"],[1,"padtop5px","padleft25px","font15px","colorblue"],[1,"colorred"],["class","export",4,"ngIf"],[1,"responsive","mat-table-style"],["class","spinnerstyle",4,"ngIf"],["mat-table","",1,"font12px",3,"dataSource"],["matColumnDef","appType"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","appNumber"],["matColumnDef","productName"],["matColumnDef","sponsorName"],["matColumnDef","applicationStatus"],["matColumnDef","applicationSubType"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","true",3,"length","pageSize","pageSizeOptions","page"],[1,"export"],["matTooltip","Export Search Results","mat-button","",1,"mat-button","export-button","mat-raised-button",3,"click"],["svgIcon","get_app"],[1,"spinnerstyle"],["diameter","80","color","warn","mode","indeterminate"],["mat-header-cell",""],["mat-cell",""],["target","_blank",3,"routerLink"],["target","_blank","matTooltip","Edit GSRS Application Record",3,"routerLink",4,"ngIf"],["target","_blank","matTooltip","Edit GSRS Application Record",3,"routerLink"],["svgIcon","edit"],[1,"font10px","colorgray"],[4,"ngFor","ngForOf"],["class","row",4,"ngFor","ngForOf"],[1,"row"],["mat-header-row",""],["mat-row",""]],template:function(i,o){1&i&&(t.YNc(0,j,6,0,"div",0),t.TgZ(1,"mat-tab-group",1),t.NdJ("selectedTabChange",function(a){return o.applicationTabSelected(a)}),t.YNc(2,ht,33,12,"mat-tab",2),t.qZA()),2&i&&(t.Q6J("ngIf",!0===o.loadingComplete&&!1===o.foundCenterList&&0===o.applicationCount),t.xp6(2),t.Q6J("ngForOf",o.centerList))},directives:[v.O5,q.SP,v.sg,q.uX,S.lW,T.Hw,A.Ou,d.BZ,d.w1,d.fO,d.ge,d.Dz,d.ev,f.yS,d.as,d.XQ,d.nj,d.Gk,Z.NW],styles:[".mat-table-style[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%]{vertical-align:top;font-size:12px}.font9px[_ngcontent-%COMP%]{font:size 10px}.font10px[_ngcontent-%COMP%]{font-size:10px}.font12px[_ngcontent-%COMP%]{font-size:12px}.font15px[_ngcontent-%COMP%]{font-size:15px}.padleft25px[_ngcontent-%COMP%]{padding-left:25px}.padtop5px[_ngcontent-%COMP%]{padding-top:5px}.colorblue[_ngcontent-%COMP%]{color:#4b4572}.colorgray[_ngcontent-%COMP%]{color:gray}.colorred[_ngcontent-%COMP%]{color:red}.spinnerstyle[_ngcontent-%COMP%]{position:absolute;top:0;left:0;bottom:56px;right:0;background:rgba(150,148,148,.15);z-index:1;display:-ms-flexbox;display:flex;-ms-flex-align:top;align-items:top;-ms-flex-pack:center;justify-content:center}"]}),e}(),L=_(69638);function xt(e,n){if(1&e){var i=t.EpF();t.TgZ(0,"span",16),t.TgZ(1,"button",17),t.NdJ("click",function(){return t.CHM(i),t.oxw().export()}),t._UZ(2,"mat-icon",18),t._uU(3," Export CTs "),t.qZA(),t.qZA()}}function St(e,n){1&e&&(t.TgZ(0,"div",19),t._UZ(1,"mat-progress-spinner",20),t.qZA())}function Tt(e,n){1&e&&t._UZ(0,"th",21)}function At(e,n){if(1&e&&(t.TgZ(0,"td",22),t.TgZ(1,"a",23),t._UZ(2,"mat-icon",24),t.qZA(),t.qZA()),2&e){var i=n.$implicit;t.xp6(1),t.Q6J("href","edit-clinical-trial/"+i.trialNumber,t.LSH)}}function Zt(e,n){1&e&&(t.TgZ(0,"th",21),t._uU(1,"Trial Number"),t.qZA())}function yt(e,n){if(1&e&&(t.TgZ(0,"td",22),t.TgZ(1,"a",25),t._uU(2),t.qZA(),t.qZA()),2&e){var i=n.$implicit;t.xp6(1),t.Q6J("href","https://clinicaltrials.gov/ct2/show/"+i.trialNumber,t.LSH),t.xp6(1),t.Oqu(i.trialNumber)}}function Et(e,n){1&e&&(t.TgZ(0,"th",21),t._uU(1," Title "),t.qZA())}function Ut(e,n){if(1&e&&(t.TgZ(0,"td",22),t._uU(1),t.qZA()),2&e){var i=n.$implicit;t.xp6(1),t.hij(" ",i.title," ")}}function Nt(e,n){1&e&&(t.TgZ(0,"th",21),t._uU(1," Sponsor Name "),t.qZA())}function Dt(e,n){if(1&e&&(t.TgZ(0,"td",22),t._uU(1),t.qZA()),2&e){var i=n.$implicit;t.xp6(1),t.hij(" ",i.sponsor," ")}}function Pt(e,n){1&e&&(t.TgZ(0,"th",21),t._uU(1," Conditions "),t.qZA())}function Ot(e,n){if(1&e&&(t.TgZ(0,"td",22),t._uU(1),t.qZA()),2&e){var i=n.$implicit;t.xp6(1),t.hij(" ",i.conditions," ")}}function wt(e,n){1&e&&(t.TgZ(0,"th",21),t._uU(1," Outcome Measures "),t.qZA())}function qt(e,n){if(1&e&&(t.TgZ(0,"td",22),t._uU(1),t.qZA()),2&e){var i=n.$implicit;t.xp6(1),t.hij(" ",i.outcomeMeasures," ")}}function Yt(e,n){1&e&&t._UZ(0,"tr",26)}function It(e,n){1&e&&t._UZ(0,"tr",27)}var kt=function(){return[5,10,25,100]},Mt=function(){var e=function(n){(0,C.Z)(o,n);var i=(0,x.Z)(o);function o(c,a,s,u,l,m,p){var r;return(0,b.Z)(this,o),(r=i.call(this,c,a)).gaService=c,r.clinicalTrialService=a,r.configService=s,r.authService=u,r.loadingService=l,r.router=m,r.dialog=p,r.clinicalTrialCount=0,r.showSpinner=!1,r.subscriptions=[],r.privateExport=!1,r.disableExport=!1,r.etag="",r.etagAllExport="",r.loadingStatus="",r.countClinicalTrialOut=new t.vpe,r.displayedColumns=["edit","nctNumber","title","sponsorName","conditions","outcomemeasures"],r}return(0,g.Z)(o,[{key:"ngOnInit",value:function(){var a=this;this.loadedComponents=this.configService.configData.loadedComponents||null,this.authService.hasAnyRolesAsync("Admin","Updater","SuperUpdater").pipe((0,I.q)(1)).subscribe(function(s){a.isAdmin=s}),this.substanceUuid&&this.getSubstanceClinicalTrials(null,"initial")}},{key:"ngOnDestroy",value:function(){this.subscriptions.forEach(function(a){a.unsubscribe()})}},{key:"getSubstanceClinicalTrials",value:function(a,s){var u=this;this.setPageEvent(a);var l=this.page*this.pageSize;this.showSpinner=!0;var m=this.clinicalTrialService.getClinicalTrials({searchTerm:this.substanceUuid,cutoff:null,type:"substanceKey",order:"$trialNumber",pageSize:this.pageSize,facets:this.privateFacetParams,skip:l}).subscribe(function(p){s&&"initial"===s&&(u.etagAllExport=p.etag),u.clinicalTrialService.totalRecords=p.total,u.setResultData(p.content),u.clinicalTrialCount=p.total,u.etag=p.etag,u.countClinicalTrialOut.emit(u.clinicalTrialCount),u.showSpinner=!1});this.subscriptions.push(m)}},{key:"export",value:function(){var a=this;if(this.etagAllExport){var s="ctus.xlsx",u=this.getApiExportUrl(this.etagAllExport,s);""!==this.authService.getUser()&&this.dialog.open(N.L,{height:"215x",width:"550px",data:{extension:s,type:"substanceClinicalTrialUS"}}).afterClosed().subscribe(function(m){m&&""!==m&&(a.loadingService.setLoading(!0),a.authService.startUserDownload(u,a.privateExport,m+"."+s).subscribe(function(r){a.loadingService.setLoading(!1),a.router.navigate(["/user-downloads/",r.id])},function(r){return a.loadingService.setLoading(!1)}))})}}},{key:"getApiExportUrl",value:function(a,s){return this.clinicalTrialService.getApiExportUrl(a,s)}},{key:"clinicalTrialListExportUrl",value:function(){null!=this.substanceUuid&&(this.exportUrl=this.clinicalTrialService.getClinicalTrialListExportUrl(this.substanceUuid))}}]),o}(E);return e.\u0275fac=function(i){return new(i||e)(t.Y36(y.$),t.Y36(L.m),t.Y36(Y.E),t.Y36(U.e),t.Y36(D.b),t.Y36(f.F0),t.Y36(P.uw))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-substance-clinical-trials"]],inputs:{substanceUuid:"substanceUuid"},outputs:{countClinicalTrialOut:"countClinicalTrialOut"},features:[t.qOj],decls:28,vars:9,consts:[[1,"padtop5px","padleft25px","font15px","colorblue"],["class","export",4,"ngIf"],[1,"responsive","mat-table-style"],["class","spinnerstyle",4,"ngIf"],["mat-table","",3,"dataSource"],["matColumnDef","edit"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","nctNumber"],["matColumnDef","title"],["matColumnDef","sponsorName"],["matColumnDef","conditions"],["matColumnDef","outcomemeasures"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","true",3,"length","pageSize","pageSizeOptions","page"],[1,"export"],["matTooltip","Export Search Results","mat-button","",1,"mat-button","export-button","mat-raised-button",3,"click"],["svgIcon","get_app"],[1,"spinnerstyle"],["diameter","80","color","warn","mode","indeterminate"],["mat-header-cell",""],["mat-cell",""],["target","_blank","title","Edit in new tab",1,"clinical-trials-browse-edit1",3,"href"],["svgIcon","edit",2,"width","20px","height","20px"],["target","_blank","title","see clinicaltrials.gov",3,"href"],["mat-header-row",""],["mat-row",""]],template:function(i,o){1&i&&(t.TgZ(0,"div",0),t.TgZ(1,"b"),t._uU(2,"Clinical Trial US\xa0\xa0\xa0\xa0"),t.qZA(),t.YNc(3,xt,4,0,"span",1),t.qZA(),t.TgZ(4,"div",2),t.YNc(5,St,2,0,"div",3),t.TgZ(6,"table",4),t.ynx(7,5),t.YNc(8,Tt,1,0,"th",6),t.YNc(9,At,3,1,"td",7),t.BQk(),t.ynx(10,8),t.YNc(11,Zt,2,0,"th",6),t.YNc(12,yt,3,2,"td",7),t.BQk(),t.ynx(13,9),t.YNc(14,Et,2,0,"th",6),t.YNc(15,Ut,2,1,"td",7),t.BQk(),t.ynx(16,10),t.YNc(17,Nt,2,0,"th",6),t.YNc(18,Dt,2,1,"td",7),t.BQk(),t.ynx(19,11),t.YNc(20,Pt,2,0,"th",6),t.YNc(21,Ot,2,1,"td",7),t.BQk(),t.ynx(22,12),t.YNc(23,wt,2,0,"th",6),t.YNc(24,qt,2,1,"td",7),t.BQk(),t.YNc(25,Yt,1,0,"tr",13),t.YNc(26,It,1,0,"tr",14),t.qZA(),t.qZA(),t.TgZ(27,"mat-paginator",15),t.NdJ("page",function(a){return o.getSubstanceClinicalTrials(a)}),t.qZA()),2&i&&(t.xp6(3),t.Q6J("ngIf",o.isAdmin),t.xp6(2),t.Q6J("ngIf",o.showSpinner),t.xp6(1),t.Q6J("dataSource",o.paged),t.xp6(19),t.Q6J("matHeaderRowDef",o.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(1),t.Q6J("length",o.totalRecords)("pageSize",5)("pageSizeOptions",t.DdM(8,kt)))},directives:[v.O5,S.lW,T.Hw,A.Ou,d.BZ,d.w1,d.fO,d.ge,d.Dz,d.ev,d.as,d.XQ,d.nj,d.Gk,Z.NW],styles:[".clinical-trials-browse-edit1[_ngcontent-%COMP%], .clinical-trials-browse-edit2[_ngcontent-%COMP%]{text-decoration:none}.clinical-trials-browse-edit1[_ngcontent-%COMP%], .clinical-trials-browse-edit2[_ngcontent-%COMP%]{padding-left:.5em;padding-right:.5em}.mat-table-style[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%]{vertical-align:top;font-size:12px}.font10px[_ngcontent-%COMP%]{font-size:10px}.font15px[_ngcontent-%COMP%]{font-size:15px}.colorgray[_ngcontent-%COMP%]{color:gray}.padleft25px[_ngcontent-%COMP%]{padding-left:25px}.padtop5px[_ngcontent-%COMP%]{padding-top:5px}.colorblue[_ngcontent-%COMP%]{color:#4b4572}.colorred[_ngcontent-%COMP%]{color:red}.btn1[_ngcontent-%COMP%]{color:#312e2e;background-color:#ffde79f5;border-radius:10px 0 0 10px;font-size:16px}.spinnerstyle[_ngcontent-%COMP%]{position:absolute;top:0;left:0;bottom:56px;right:0;background:rgba(150,148,148,.15);z-index:1;display:-ms-flexbox;display:flex;-ms-flex-align:top;align-items:top;-ms-flex-pack:center;justify-content:center}"]}),e}(),Qt=_(92938);function Lt(e,n){if(1&e){var i=t.EpF();t.TgZ(0,"span",14),t.TgZ(1,"button",15),t.NdJ("click",function(){return t.CHM(i),t.oxw().export()}),t._UZ(2,"mat-icon",16),t._uU(3," Export CTs "),t.qZA(),t.qZA()}}function Jt(e,n){1&e&&(t.TgZ(0,"div",17),t._UZ(1,"mat-progress-spinner",18),t.qZA())}function Rt(e,n){1&e&&(t.TgZ(0,"th",19),t._uU(1,"Eudract Number"),t.qZA())}function Ft(e,n){if(1&e&&(t.TgZ(0,"div"),t.TgZ(1,"a",22),t._uU(2),t.qZA(),t.qZA()),2&e){var i=t.oxw().$implicit;t.xp6(1),t.s9C("href",i.url,t.LSH),t.xp6(1),t.Oqu(i.trialNumber)}}function zt(e,n){if(1&e&&(t.TgZ(0,"td",20),t.YNc(1,Ft,3,2,"div",21),t.qZA()),2&e){var i=n.$implicit;t.xp6(1),t.Q6J("ngIf",i.trialNumber)}}function $t(e,n){1&e&&(t.TgZ(0,"th",19),t._uU(1," Title "),t.qZA())}function Bt(e,n){if(1&e&&(t.TgZ(0,"td",20),t._uU(1),t.qZA()),2&e){var i=n.$implicit;t.xp6(1),t.hij(" ",i.title," ")}}function jt(e,n){1&e&&(t.TgZ(0,"th",19),t._uU(1," Sponsor Name "),t.qZA())}function Ht(e,n){if(1&e&&(t.TgZ(0,"td",20),t._uU(1),t.qZA()),2&e){var i=n.$implicit;t.xp6(1),t.hij(" ",i.sponsorName," ")}}function Gt(e,n){1&e&&(t.TgZ(0,"th",19),t._uU(1,"Conditions"),t.qZA())}function Wt(e,n){if(1&e&&(t.TgZ(0,"td",20),t._uU(1),t.qZA()),2&e){var i=n.$implicit,o=t.oxw();t.xp6(1),t.Oqu(o.joinMeddraTerms(i))}}function Kt(e,n){1&e&&t._UZ(0,"tr",23)}function Xt(e,n){1&e&&t._UZ(0,"tr",24)}var Vt=function(){return[5,10,25,100]},te=function(){var e=function(n){(0,C.Z)(o,n);var i=(0,x.Z)(o);function o(c,a,s,u,l,m,p){var r;return(0,b.Z)(this,o),(r=i.call(this,c,a)).gaService=c,r.clinicalTrialService=a,r.configService=s,r.authService=u,r.loadingService=l,r.router=m,r.dialog=p,r.clinicalTrialEuCount=0,r.showSpinner=!1,r.subscriptions=[],r.privateExport=!1,r.disableExport=!1,r.etag="",r.etagAllExport="",r.loadingStatus="",r.countClinicalTrialEuOut=new t.vpe,r.displayedColumns=["trialNumber","title","sponsorName","conditions"],r}return(0,g.Z)(o,[{key:"ngOnInit",value:function(){var a=this;this.loadedComponents=this.configService.configData.loadedComponents||null,this.authService.hasAnyRolesAsync("Admin","Updater","SuperUpdater").pipe((0,I.q)(1)).subscribe(function(s){a.isAdmin=s}),this.substanceUuid&&this.getSubstanceClinicalTrialsEurope(null,"initial")}},{key:"ngOnDestroy",value:function(){this.subscriptions.forEach(function(a){a.unsubscribe()})}},{key:"getSubstanceClinicalTrialsEurope",value:function(a,s){var u=this;this.setPageEvent(a),this.showSpinner=!0;var l=this.clinicalTrialService.getSubstanceClinicalTrialsEurope(this.substanceUuid,this.page,this.pageSize).subscribe(function(m){s&&"initial"===s&&(u.etagAllExport=m.etag),u.setResultData(m.content),u.clinicalTrialEuCount=m.total,u.countClinicalTrialEuOut.emit(u.clinicalTrialEuCount),u.showSpinner=!1});this.subscriptions.push(l)}},{key:"export",value:function(){var a=this;if(this.etagAllExport){var s="cteu.xlsx",u=this.getApiExportUrl(this.etagAllExport,s);""!==this.authService.getUser()&&this.dialog.open(N.L,{height:"215x",width:"550px",data:{extension:s,type:"substanceClinicalTrialEU"}}).afterClosed().subscribe(function(m){m&&""!==m&&(a.loadingService.setLoading(!0),a.authService.startUserDownload(u,a.privateExport,m+"."+s).subscribe(function(r){a.loadingService.setLoading(!1),a.router.navigate(["/user-downloads/",r.id])},function(r){return a.loadingService.setLoading(!1)}))})}}},{key:"getApiExportUrl",value:function(a,s){return this.clinicalTrialService.getApiEuropeExportUrl(a,s)}},{key:"joinMeddraTerms",value:function(a){if(a)return Qt.map(a.clinicalTrialEuropeMeddraList,"meddraTerm").join("|")}}]),o}(E);return e.\u0275fac=function(i){return new(i||e)(t.Y36(y.$),t.Y36(L.m),t.Y36(Y.E),t.Y36(U.e),t.Y36(D.b),t.Y36(f.F0),t.Y36(P.uw))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-substance-clinical-trials-eu"]],inputs:{substanceUuid:"substanceUuid"},outputs:{countClinicalTrialEuOut:"countClinicalTrialEuOut"},features:[t.qOj],decls:23,vars:9,consts:[[1,"padtop5px","padleft25px","font15px","colorblue"],["class","export",4,"ngIf"],[1,"responsive","mat-table-style"],["class","spinnerstyle",4,"ngIf"],["mat-table","",3,"dataSource"],["matColumnDef","trialNumber"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","title"],["matColumnDef","sponsorName"],["matColumnDef","conditions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","true",3,"length","pageSize","pageSizeOptions","page"],[1,"export"],["matTooltip","Export Search Results","mat-button","",1,"mat-button","export-button","mat-raised-button",3,"click"],["svgIcon","get_app"],[1,"spinnerstyle"],["diameter","80","color","warn","mode","indeterminate"],["mat-header-cell",""],["mat-cell",""],[4,"ngIf"],[3,"href"],["mat-header-row",""],["mat-row",""]],template:function(i,o){1&i&&(t.TgZ(0,"div",0),t.TgZ(1,"b"),t._uU(2,"Clinical Trials Europe"),t.qZA(),t._uU(3," \xa0\xa0\xa0 "),t.YNc(4,Lt,4,0,"span",1),t.qZA(),t.TgZ(5,"div",2),t.YNc(6,Jt,2,0,"div",3),t.TgZ(7,"table",4),t.ynx(8,5),t.YNc(9,Rt,2,0,"th",6),t.YNc(10,zt,2,1,"td",7),t.BQk(),t.ynx(11,8),t.YNc(12,$t,2,0,"th",6),t.YNc(13,Bt,2,1,"td",7),t.BQk(),t.ynx(14,9),t.YNc(15,jt,2,0,"th",6),t.YNc(16,Ht,2,1,"td",7),t.BQk(),t.ynx(17,10),t.YNc(18,Gt,2,0,"th",6),t.YNc(19,Wt,2,1,"td",7),t.BQk(),t.YNc(20,Kt,1,0,"tr",11),t.YNc(21,Xt,1,0,"tr",12),t.qZA(),t.qZA(),t.TgZ(22,"mat-paginator",13),t.NdJ("page",function(a){return o.getSubstanceClinicalTrialsEurope(a)}),t.qZA()),2&i&&(t.xp6(4),t.Q6J("ngIf",o.isAdmin),t.xp6(2),t.Q6J("ngIf",o.showSpinner),t.xp6(1),t.Q6J("dataSource",o.paged),t.xp6(13),t.Q6J("matHeaderRowDef",o.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(1),t.Q6J("length",o.totalRecords)("pageSize",5)("pageSizeOptions",t.DdM(8,Vt)))},directives:[v.O5,S.lW,T.Hw,A.Ou,d.BZ,d.w1,d.fO,d.ge,d.Dz,d.ev,d.as,d.XQ,d.nj,d.Gk,Z.NW],styles:[".mat-column-trialNumber[_ngcontent-%COMP%]{word-wrap:break-word!important;white-space:unset!important;-ms-flex:0 0 20%!important;flex:0 0 20%!important;width:20%!important;white-space:nowrap}.mat-table-style[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%]{vertical-align:top;font-size:12px}.font10px[_ngcontent-%COMP%]{font-size:10px}.font15px[_ngcontent-%COMP%]{font-size:15px}.colorgray[_ngcontent-%COMP%]{color:gray}.colorred[_ngcontent-%COMP%]{color:red}.padleft25px[_ngcontent-%COMP%]{padding-left:25px}.padtop5px[_ngcontent-%COMP%]{padding-top:5px}.colorblue[_ngcontent-%COMP%]{color:#4b4572}.spinnerstyle[_ngcontent-%COMP%]{position:absolute;top:0;left:0;bottom:56px;right:0;background:rgba(150,148,148,.15);z-index:1;display:-ms-flexbox;display:flex;-ms-flex-align:top;align-items:top;-ms-flex-pack:center;justify-content:center}"]}),e}(),k=_(43461),ee=_(98969),w=_(64316);function ne(e,n){if(1&e){var i=t.EpF();t.TgZ(0,"span",20),t.TgZ(1,"button",21),t.NdJ("click",function(){return t.CHM(i),t.oxw(2).export()}),t._UZ(2,"mat-icon",22),t._uU(3," Export "),t.qZA(),t.qZA()}}function ae(e,n){if(1&e&&(t.TgZ(0,"div",18),t.YNc(1,ne,4,0,"span",19),t.qZA()),2&e){var i=t.oxw();t.xp6(1),t.Q6J("ngIf",i.isAdmin&&i.adverseEventCount>0)}}function ie(e,n){if(1&e&&(t.TgZ(0,"div",23),t.TgZ(1,"a",24),t.TgZ(2,"button",25),t.TgZ(3,"mat-icon"),t._uU(4,"analytics"),t.qZA(),t.TgZ(5,"span",26),t._uU(6,"Analysis by Substance"),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e){var i=t.oxw();t.xp6(1),t.s9C("href",i.adverseEventShinySubstanceNameURLWithParam,t.LSH)}}function oe(e,n){1&e&&(t.TgZ(0,"div",27),t._UZ(1,"mat-progress-spinner",28),t.qZA())}function se(e,n){1&e&&(t.TgZ(0,"th",29),t._uU(1," PT Term "),t.qZA())}function re(e,n){if(1&e&&(t.TgZ(0,"span",32),t.TgZ(1,"a",33),t.TgZ(2,"mat-icon"),t._uU(3,"analytics"),t.qZA(),t.qZA(),t.qZA()),2&e){var i=t.oxw().$implicit,o=t.oxw();t.xp6(1),t.hYB("href","",o.adverseEventShinyAdverseEventURLWithParam,"",o.getDecodeURL(i.ptTerm),"",t.LSH)}}function ce(e,n){if(1&e&&(t.TgZ(0,"td",30),t._uU(1),t.YNc(2,re,4,2,"span",31),t.qZA()),2&e){var i=n.$implicit,o=t.oxw();t.xp6(1),t.hij(" ",i.ptTerm," "),t.xp6(1),t.Q6J("ngIf",!0===o.adverseEventShinyAdverseEventDisplay)}}function ue(e,n){1&e&&(t.TgZ(0,"th",29),t._uU(1," Prim SOC "),t.qZA())}function pe(e,n){if(1&e&&(t.TgZ(0,"td",30),t._uU(1),t.qZA()),2&e){var i=n.$implicit;t.xp6(1),t.hij(" ",i.primSoc," ")}}function le(e,n){1&e&&(t.TgZ(0,"th",29),t._uU(1," Case Count "),t.qZA())}function de(e,n){if(1&e&&(t.TgZ(0,"td",30),t._uU(1),t.qZA()),2&e){var i=n.$implicit;t.xp6(1),t.hij(" ",i.caseCount,"")}}function me(e,n){1&e&&(t.TgZ(0,"th",29),t._uU(1," PT Count "),t.qZA())}function _e(e,n){if(1&e&&(t.TgZ(0,"div"),t.TgZ(1,"a",36),t.ALo(2,"titlecase"),t.ALo(3,"titlecase"),t._UZ(4,"div",37),t.qZA(),t.TgZ(5,"span",38),t._uU(6,"FAERS Public Dashboard"),t.qZA(),t.qZA()),2&e){var i=t.oxw().$implicit,o=t.oxw();t.xp6(1),t.FAE("href","",o.FAERSDashboardAdverseEventUrl,"",o.getDecodeURL(t.lcZ(2,5,i.ptTerm)),"",o.FAERSDashboardReactionGroup,"",o.getDecodeURL(t.lcZ(3,7,i.primSoc)),"",t.LSH),t.xp6(3),t.Q6J("innerHTML",i.ptCount,t.oJD)}}function ve(e,n){if(1&e&&t._UZ(0,"div",37),2&e){var i=t.oxw().$implicit;t.Q6J("innerHTML",i.ptCount,t.oJD)}}function fe(e,n){if(1&e&&(t.TgZ(0,"td",30),t.YNc(1,_e,7,9,"div",34),t.YNc(2,ve,1,1,"ng-template",null,35,t.W1O),t.qZA()),2&e){var i=t.MAs(3),o=t.oxw();t.xp6(1),t.Q6J("ngIf",o.FAERSDashboardAdverseEventUrl)("ngIfElse",i)}}function ge(e,n){1&e&&(t.TgZ(0,"th",29),t._uU(1," PRR "),t.qZA())}function be(e,n){if(1&e&&(t.TgZ(0,"td",30),t._uU(1),t.ALo(2,"number"),t.qZA()),2&e){var i=n.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,i.prr,".2-2")," ")}}function he(e,n){1&e&&t._UZ(0,"tr",39)}function Ce(e,n){1&e&&t._UZ(0,"tr",40)}var xe=function(){return[5,10,25,100]},Se=function(){var e=function(n){(0,C.Z)(o,n);var i=(0,x.Z)(o);function o(c,a,s,u,l,m,p){var r;return(0,b.Z)(this,o),(r=i.call(this,a,s)).router=c,r.gaService=a,r.adverseEventService=s,r.loadingService=u,r.configService=l,r.authService=m,r.dialog=p,r.countAdvPtOut=new t.vpe,r.adverseEventCount=0,r.order="$root_ptCount",r.ascDescDir="desc",r.showSpinner=!1,r.sortValues=ee.g,r.privateExport=!1,r.disableExport=!1,r.etag="",r.loadingStatus="",r.subscriptions=[],r.adverseEventShinySubstanceNameDisplay=!1,r.adverseEventShinyAdverseEventDisplay=!1,r.FAERSDashboardSearchTerm="/select/Search%20Term/",r.FAERSDashboardReactionTerm="/select/Reaction%20Term/",r.FAERSDashboardReactionGroup="/select/Reaction%20Group/",r.displayedColumns=["ptTerm","primSoc","caseCount","ptCount","prr"],r}return(0,g.Z)(o,[{key:"ngOnInit",value:function(){var a=this,s=this.authService.hasAnyRolesAsync("Admin","Updater","SuperUpdater").subscribe(function(u){a.isAdmin=u});this.subscriptions.push(s),this.bdnum&&(this.getAdverseEventPt(),this.getFaersDashboardUrl(),this.getFaersDashboardRecordByName(),this.adverseEventPtListExportUrl(),this.getAdverseEventShinyConfig())}},{key:"ngOnDestroy",value:function(){this.subscriptions.forEach(function(a){a.unsubscribe()})}},{key:"getAdverseEventPt",value:function(a){var s=this;this.setPageEvent(a),this.showSpinner=!0;var m=this.adverseEventService.getAdverseEventPt(this.order,this.page*this.pageSize,this.pageSize,"root_substanceKey:"+this.bdnum,this.privateFacetParams).subscribe(function(p){s.adverseEventService.totalRecords=p.total,s.adverseEventCount=p.total,s.setResultData(p.content),s.etag=p.etag,s.countAdvPtOut.emit(s.adverseEventCount)},function(p){console.log("error")},function(){m.unsubscribe()});this.loadingStatus="",this.showSpinner=!1}},{key:"adverseEventPtListExportUrl",value:function(){null!=this.bdnum&&(this.exportUrl=this.adverseEventService.getAdverseEventPtListExportUrl(this.bdnum))}},{key:"sortData",value:function(a){var s=this;if(a.active){var u=this.displayedColumns.indexOf(a.active).toString();this.ascDescDir=a.direction,this.sortValues.forEach(function(l){l.displayedColumns&&l.direction&&s.displayedColumns[u]===l.displayedColumns&&s.ascDescDir===l.direction&&(s.order=l.value)}),this.getAdverseEventPt()}}},{key:"export",value:function(){var a=this;if(this.etag){var s="xlsx",u=this.getApiExportUrl(this.etag,s);""!==this.authService.getUser()&&this.dialog.open(N.L,{height:"215x",width:"550px",data:{extension:s,type:"substanceAdverseEventPt"}}).afterClosed().subscribe(function(m){m&&""!==m&&(a.loadingService.setLoading(!0),a.authService.startUserDownload(u,a.privateExport,m+"."+s).subscribe(function(r){a.loadingService.setLoading(!1),a.router.navigate(["/user-downloads/",r.id])},function(r){return a.loadingService.setLoading(!1)}))})}}},{key:"getApiExportUrl",value:function(a,s){return this.adverseEventService.getApiExportUrlPt(a,s)}},{key:"getFaersDashboardRecordByName",value:function(){var a=this,s=this.adverseEventService.getFaersDashboardRecordByName(this.substanceName).subscribe(function(u){u&&u.name&&(a.FAERSDashboardSubstanceName=u.name,a.FAERSDashboardAdverseEventUrl=a.FAERSDashboardAdverseEventUrl+u.name+a.FAERSDashboardReactionTerm)});this.subscriptions.push(s)}},{key:"getFaersDashboardUrl",value:function(){this.configService.configData&&this.configService.configData.FAERSDashboardAdverseEventUrl&&null!==this.configService.configData.FAERSDashboardAdverseEventUrl&&(this.FAERSDashboardAdverseEventUrl=this.configService.configData.FAERSDashboardAdverseEventUrl+this.FAERSDashboardSearchTerm)}},{key:"getAdverseEventShinyConfig",value:function(){this.configService.configData&&(this.configService.configData.adverseEventShinySubstanceNameDisplay&&null!==this.configService.configData.adverseEventShinySubstanceNameDisplay&&(this.adverseEventShinySubstanceNameDisplay=JSON.parse(this.configService.configData.adverseEventShinySubstanceNameDisplay)),this.configService.configData.adverseEventShinySubstanceNameURL&&null!==this.configService.configData.adverseEventShinySubstanceNameURL&&(this.adverseEventShinySubstanceNameURL=this.configService.configData.adverseEventShinySubstanceNameURL,this.adverseEventShinySubstanceNameURLWithParam=this.adverseEventShinySubstanceNameURL+decodeURIComponent(this.substanceName)),this.configService.configData.adverseEventShinyAdverseEventDisplay&&null!==this.configService.configData.adverseEventShinyAdverseEventDisplay&&(this.adverseEventShinyAdverseEventDisplay=JSON.parse(this.configService.configData.adverseEventShinyAdverseEventDisplay)),this.configService.configData.adverseEventShinyAdverseEventURL&&null!==this.configService.configData.adverseEventShinyAdverseEventURL&&(this.adverseEventShinyAdverseEventURL=this.configService.configData.adverseEventShinyAdverseEventURL,this.adverseEventShinyAdverseEventURLWithParam=this.adverseEventShinyAdverseEventURL))}},{key:"getDecodeURL",value:function(a){var s="";return null!==a&&(s=decodeURIComponent(a)),s}}]),o}(E);return e.\u0275fac=function(i){return new(i||e)(t.Y36(f.F0),t.Y36(y.$),t.Y36(k.a),t.Y36(D.b),t.Y36(Y.E),t.Y36(U.e),t.Y36(P.uw))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-substance-adverseeventpt"]],inputs:{bdnum:"bdnum",substanceName:"substanceName"},outputs:{countAdvPtOut:"countAdvPtOut"},features:[t.qOj],decls:28,vars:10,consts:[[1,"padtop5px","padleft25px","font15px","colorblue"],[1,"divflex"],[1,"padtop10px"],["class","marginleft50px padleft25px padtopneg50px width120px",4,"ngIf"],["class","marginleft50px padleft25px width200px",4,"ngIf"],[1,"responsive","mat-table-style"],["class","spinnerstyle",4,"ngIf"],["mat-table","","matSort","","matSortActive","ptCount","matSortDirection","desc","matSortDisableClear","",3,"dataSource","matSortChange"],["matColumnDef","ptTerm"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","primSoc"],["matColumnDef","caseCount"],["matColumnDef","ptCount"],["matColumnDef","prr"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","true",3,"length","pageSize","pageSizeOptions","page"],[1,"marginleft50px","padleft25px","padtopneg50px","width120px"],["class","export",4,"ngIf"],[1,"export"],["matTooltip","Export Search Results","mat-button","",1,"mat-button","export-button","mat-raised-button",3,"click"],["svgIcon","get_app"],[1,"marginleft50px","padleft25px","width200px"],["target","_blank",3,"href"],["mat-icon-button","","color","accent","aria-label","Analysis by Substance Name on Shiny Server"],[1,"colororange"],[1,"spinnerstyle"],["diameter","80","color","warn","mode","indeterminate"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["class","",4,"ngIf"],[1,""],["target","_blank","title","Analysis by Adverse Event/PT Term on Shiny Server",3,"href"],[4,"ngIf","ngIfElse"],["noFaersLink",""],["target","_blank","title","FAERS Public Dashboard",3,"href"],[3,"innerHTML"],[1,"colorgray","font10px"],["mat-header-row",""],["mat-row",""]],template:function(i,o){1&i&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"b"),t._uU(4,"Adverse Event PT"),t.qZA(),t.qZA(),t.YNc(5,ae,2,1,"div",3),t.YNc(6,ie,7,1,"div",4),t.qZA(),t.TgZ(7,"div",5),t.YNc(8,oe,2,0,"div",6),t.TgZ(9,"table",7),t.NdJ("matSortChange",function(a){return o.sortData(a)}),t.ynx(10,8),t.YNc(11,se,2,0,"th",9),t.YNc(12,ce,3,2,"td",10),t.BQk(),t.ynx(13,11),t.YNc(14,ue,2,0,"th",9),t.YNc(15,pe,2,1,"td",10),t.BQk(),t.ynx(16,12),t.YNc(17,le,2,0,"th",9),t.YNc(18,de,2,1,"td",10),t.BQk(),t.ynx(19,13),t.YNc(20,me,2,0,"th",9),t.YNc(21,fe,4,2,"td",10),t.BQk(),t.ynx(22,14),t.YNc(23,ge,2,0,"th",9),t.YNc(24,be,3,4,"td",10),t.BQk(),t.YNc(25,he,1,0,"tr",15),t.YNc(26,Ce,1,0,"tr",16),t.qZA(),t.qZA(),t.TgZ(27,"mat-paginator",17),t.NdJ("page",function(a){return o.getAdverseEventPt(a)}),t.qZA(),t.qZA()),2&i&&(t.xp6(5),t.Q6J("ngIf",o.totalRecords>0),t.xp6(1),t.Q6J("ngIf",!0===o.adverseEventShinySubstanceNameDisplay),t.xp6(2),t.Q6J("ngIf",o.showSpinner),t.xp6(1),t.Q6J("dataSource",o.paged),t.xp6(16),t.Q6J("matHeaderRowDef",o.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(1),t.Q6J("length",o.totalRecords)("pageSize",5)("pageSizeOptions",t.DdM(9,xe)))},directives:[v.O5,S.lW,T.Hw,A.Ou,d.BZ,w.YE,d.w1,d.fO,d.ge,w.nU,d.Dz,d.ev,d.as,d.XQ,d.nj,d.Gk,Z.NW],pipes:[v.rS,v.JJ],styles:[".mat-table-style[_ngcontent-%COMP%]{position:relative}.mat-table-style[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%]{vertical-align:top;font-size:12px}.divflex[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex}.font8px[_ngcontent-%COMP%]{font-size:8px}.font10px[_ngcontent-%COMP%]{font-size:10px}.font15px[_ngcontent-%COMP%]{font-size:15px}.margintop10px[_ngcontent-%COMP%]{margin-top:10px}.margintop90px[_ngcontent-%COMP%]{margin-top:90px}marginleft50px[_ngcontent-%COMP%]{margin-left:50px}.padleft25px[_ngcontent-%COMP%]{padding-left:25px}.padtop5px[_ngcontent-%COMP%]{padding-top:5px}.padtop10px[_ngcontent-%COMP%]{padding-top:10px}.padtopneg50px[_ngcontent-%COMP%]{padding-top:-50px}.colorblue[_ngcontent-%COMP%]{color:#4b4572}.colorgray[_ngcontent-%COMP%]{color:gray}.colorred[_ngcontent-%COMP%]{color:red}.colororange[_ngcontent-%COMP%]{color:#e4862e}.bordergray[_ngcontent-%COMP%]{border:1px solid gray}.width120px[_ngcontent-%COMP%]{width:120px;display:block}.width200px[_ngcontent-%COMP%]{width:200px;display:block}.spinnerstyle[_ngcontent-%COMP%]{position:absolute;top:0;left:0;bottom:56px;right:0;background:rgba(150,148,148,.15);z-index:1;display:-ms-flexbox;display:flex;-ms-flex-align:top;align-items:top;-ms-flex-pack:center;justify-content:center}"]}),e}(),Te=_(52395);function Ae(e,n){if(1&e){var i=t.EpF();t.TgZ(0,"span",16),t.TgZ(1,"button",17),t.NdJ("click",function(){return t.CHM(i),t.oxw().export()}),t._UZ(2,"mat-icon",18),t._uU(3," Export "),t.qZA(),t.qZA()}}function Ze(e,n){1&e&&(t.TgZ(0,"div",19),t._UZ(1,"mat-progress-spinner",20),t.qZA())}function ye(e,n){1&e&&(t.TgZ(0,"th",21),t._uU(1," DME Reactions "),t.qZA())}function Ee(e,n){if(1&e&&(t.TgZ(0,"td",22),t._uU(1),t.qZA()),2&e){var i=n.$implicit;t.xp6(1),t.hij(" ",i.dmeReactions," ")}}function Ue(e,n){1&e&&(t.TgZ(0,"th",21),t._uU(1," PT Term Meddra "),t.qZA())}function Ne(e,n){if(1&e&&(t.TgZ(0,"td",22),t._uU(1),t.qZA()),2&e){var i=n.$implicit;t.xp6(1),t.hij(" ",i.ptTermMeddra," ")}}function De(e,n){1&e&&(t.TgZ(0,"th",21),t._uU(1," Case Count "),t.qZA())}function Pe(e,n){if(1&e&&(t.TgZ(0,"td",22),t._uU(1),t.qZA()),2&e){var i=n.$implicit;t.xp6(1),t.hij(" ",i.caseCount," ")}}function Oe(e,n){1&e&&(t.TgZ(0,"th",21),t._uU(1," Dme Count "),t.qZA())}function we(e,n){if(1&e&&(t.TgZ(0,"td",22),t._uU(1),t.qZA()),2&e){var i=n.$implicit;t.xp6(1),t.hij(" ",i.dmeCount," ")}}function qe(e,n){1&e&&(t.TgZ(0,"th",21),t._uU(1," Dme Count Percent "),t.qZA())}function Ye(e,n){if(1&e&&(t.TgZ(0,"td",22),t._uU(1),t.qZA()),2&e){var i=n.$implicit;t.xp6(1),t.hij(" ",i.dmeCountPercent," ")}}function Ie(e,n){1&e&&(t.TgZ(0,"th",21),t._uU(1," Weighted Average PRR"),t.qZA())}function ke(e,n){if(1&e&&(t.TgZ(0,"td",22),t._uU(1),t.ALo(2,"number"),t.qZA()),2&e){var i=n.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,i.weightedAvgPrr,".2-2")," ")}}function Me(e,n){1&e&&t._UZ(0,"tr",23)}function Qe(e,n){1&e&&t._UZ(0,"tr",24)}var Le=function(){return[5,10,25,100]},Je=function(){var e=function(n){(0,C.Z)(o,n);var i=(0,x.Z)(o);function o(c,a,s,u,l,m){var p;return(0,b.Z)(this,o),(p=i.call(this,a,s)).router=c,p.gaService=a,p.adverseEventService=s,p.authService=u,p.loadingService=l,p.dialog=m,p.countAdvDmeOut=new t.vpe,p.adverseEventCount=0,p.order="$root_dmeCount",p.ascDescDir="desc",p.showSpinner=!1,p.privateExport=!1,p.disableExport=!1,p.etag="",p.loadingStatus="",p.sortValues=Te.O,p.subscriptions=[],p.displayedColumns=["dmeReactions","ptTermMeddra","caseCount","dmeCount","dmeCountPercent","weightedAvgPrr"],p}return(0,g.Z)(o,[{key:"ngOnInit",value:function(){var a=this,s=this.authService.hasAnyRolesAsync("Admin","Updater","SuperUpdater").subscribe(function(u){a.isAdmin=u});this.subscriptions.push(s),this.bdnum&&(this.getAdverseEventDme(),this.adverseEventDmeListExportUrl())}},{key:"ngOnDestroy",value:function(){this.subscriptions.forEach(function(a){a.unsubscribe()})}},{key:"getAdverseEventDme",value:function(a){var s=this;this.setPageEvent(a),this.showSpinner=!0;var m=this.adverseEventService.getAdverseEventDme(this.order,this.page*this.pageSize,this.pageSize,"root_substanceKey:"+this.bdnum,this.privateFacetParams).subscribe(function(p){s.adverseEventService.totalRecords=p.total,s.adverseEventCount=p.total,s.setResultData(p.content),s.etag=p.etag,s.countAdvDmeOut.emit(s.adverseEventCount)},function(p){console.log("error")},function(){m.unsubscribe()});this.loadingStatus="",this.showSpinner=!1}},{key:"sortData",value:function(a){var s=this;if(a.active){var u=this.displayedColumns.indexOf(a.active).toString();this.ascDescDir=a.direction,this.sortValues.forEach(function(l){l.displayedColumns&&l.direction&&s.displayedColumns[u]===l.displayedColumns&&s.ascDescDir===l.direction&&(s.order=l.value)}),this.getAdverseEventDme()}}},{key:"export",value:function(){var a=this;if(this.etag){var s="xlsx",u=this.getApiExportUrl(this.etag,s);""!==this.authService.getUser()&&this.dialog.open(N.L,{height:"215x",width:"550px",data:{extension:s,type:"substanceAdverseEventDme"}}).afterClosed().subscribe(function(m){m&&""!==m&&(a.loadingService.setLoading(!0),a.authService.startUserDownload(u,a.privateExport,m+"."+s).subscribe(function(r){a.loadingService.setLoading(!1),a.router.navigate(["/user-downloads/",r.id])},function(r){return a.loadingService.setLoading(!1)}))})}}},{key:"getApiExportUrl",value:function(a,s){return this.adverseEventService.getApiExportUrlDme(a,s)}},{key:"adverseEventDmeListExportUrl",value:function(){null!=this.bdnum&&(this.exportUrl=this.adverseEventService.getAdverseEventDmeListExportUrl(this.bdnum))}}]),o}(E);return e.\u0275fac=function(i){return new(i||e)(t.Y36(f.F0),t.Y36(y.$),t.Y36(k.a),t.Y36(U.e),t.Y36(D.b),t.Y36(P.uw))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-substance-adverseeventdme"]],inputs:{bdnum:"bdnum"},outputs:{countAdvDmeOut:"countAdvDmeOut"},features:[t.qOj],decls:29,vars:9,consts:[[1,"padtop5px","padleft25px","font15px","colorblue"],["class","export",4,"ngIf"],[1,"responsive","mat-table-style"],["class","spinnerstyle",4,"ngIf"],["mat-table","","matSort","","matSortActive","dmeCount","matSortDirection","desc","matSortDisableClear","",3,"dataSource","matSortChange"],["matColumnDef","dmeReactions"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","ptTermMeddra"],["matColumnDef","caseCount"],["matColumnDef","dmeCount"],["matColumnDef","dmeCountPercent"],["matColumnDef","weightedAvgPrr"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","true",3,"length","pageSize","pageSizeOptions","page"],[1,"export"],["matTooltip","Export Search Results","mat-button","",1,"mat-button","export-button","mat-raised-button",3,"click"],["svgIcon","get_app"],[1,"spinnerstyle"],["diameter","80","color","warn","mode","indeterminate"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(i,o){1&i&&(t.TgZ(0,"div",0),t.TgZ(1,"b"),t._uU(2,"Adverse Event DME"),t.qZA(),t._uU(3," \xa0\xa0\xa0 "),t.YNc(4,Ae,4,0,"span",1),t.qZA(),t.TgZ(5,"div",2),t.YNc(6,Ze,2,0,"div",3),t.TgZ(7,"table",4),t.NdJ("matSortChange",function(a){return o.sortData(a)}),t.ynx(8,5),t.YNc(9,ye,2,0,"th",6),t.YNc(10,Ee,2,1,"td",7),t.BQk(),t.ynx(11,8),t.YNc(12,Ue,2,0,"th",6),t.YNc(13,Ne,2,1,"td",7),t.BQk(),t.ynx(14,9),t.YNc(15,De,2,0,"th",6),t.YNc(16,Pe,2,1,"td",7),t.BQk(),t.ynx(17,10),t.YNc(18,Oe,2,0,"th",6),t.YNc(19,we,2,1,"td",7),t.BQk(),t.ynx(20,11),t.YNc(21,qe,2,0,"th",6),t.YNc(22,Ye,2,1,"td",7),t.BQk(),t.ynx(23,12),t.YNc(24,Ie,2,0,"th",6),t.YNc(25,ke,3,4,"td",7),t.BQk(),t.YNc(26,Me,1,0,"tr",13),t.YNc(27,Qe,1,0,"tr",14),t.qZA(),t.qZA(),t.TgZ(28,"mat-paginator",15),t.NdJ("page",function(a){return o.getAdverseEventDme(a)}),t.qZA()),2&i&&(t.xp6(4),t.Q6J("ngIf",o.isAdmin&&o.adverseEventCount>0),t.xp6(2),t.Q6J("ngIf",o.showSpinner),t.xp6(1),t.Q6J("dataSource",o.paged),t.xp6(19),t.Q6J("matHeaderRowDef",o.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(1),t.Q6J("length",o.totalRecords)("pageSize",5)("pageSizeOptions",t.DdM(8,Le)))},directives:[v.O5,S.lW,T.Hw,A.Ou,d.BZ,w.YE,d.w1,d.fO,d.ge,w.nU,d.Dz,d.ev,d.as,d.XQ,d.nj,d.Gk,Z.NW],pipes:[v.JJ],styles:[".mat-table-style[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%]{vertical-align:top;font-size:12px}.font15px[_ngcontent-%COMP%]{font-size:15px}.padleft25px[_ngcontent-%COMP%]{padding-left:25px}.padtop5px[_ngcontent-%COMP%]{padding-top:5px}.colorblue[_ngcontent-%COMP%]{color:#4b4572}.colorgray[_ngcontent-%COMP%]{color:gray}.spinnerstyle[_ngcontent-%COMP%]{position:absolute;top:0;left:0;bottom:56px;right:0;background:rgba(150,148,148,.15);z-index:1;display:-ms-flexbox;display:flex;-ms-flex-align:top;align-items:top;-ms-flex-pack:center;justify-content:center}"]}),e}(),Re=_(34009);function Fe(e,n){if(1&e){var i=t.EpF();t.TgZ(0,"span",14),t.TgZ(1,"button",15),t.NdJ("click",function(){return t.CHM(i),t.oxw().export()}),t._UZ(2,"mat-icon",16),t._uU(3," Export "),t.qZA(),t.qZA()}}function ze(e,n){1&e&&(t.TgZ(0,"div",17),t._UZ(1,"mat-progress-spinner",18),t.qZA())}function $e(e,n){1&e&&(t.TgZ(0,"th",19),t._uU(1," Adverse Event "),t.qZA())}function Be(e,n){if(1&e&&(t.TgZ(0,"td",20),t._uU(1),t.qZA()),2&e){var i=n.$implicit;t.xp6(1),t.hij(" ",i.adverseEvent," ")}}function je(e,n){1&e&&(t.TgZ(0,"th",19),t._uU(1," Species "),t.qZA())}function He(e,n){if(1&e&&(t.TgZ(0,"td",20),t._uU(1),t.qZA()),2&e){var i=n.$implicit;t.xp6(1),t.hij(" ",i.species," ")}}function Ge(e,n){1&e&&(t.TgZ(0,"th",19),t._uU(1," Adverse Event Count "),t.qZA())}function We(e,n){if(1&e&&(t.TgZ(0,"td",20),t._uU(1),t.qZA()),2&e){var i=n.$implicit;t.xp6(1),t.hij(" ",i.aeCount," ")}}function Ke(e,n){1&e&&(t.TgZ(0,"th",19),t._uU(1," Route of Administration "),t.qZA())}function Xe(e,n){if(1&e&&(t.TgZ(0,"td",20),t._uU(1),t.qZA()),2&e){var i=n.$implicit;t.xp6(1),t.hij(" ",i.routeOfAdmin," ")}}function Ve(e,n){1&e&&t._UZ(0,"tr",21)}function tn(e,n){1&e&&t._UZ(0,"tr",22)}var en=function(){return[5,10,25,100]},nn=function(){var e=function(n){(0,C.Z)(o,n);var i=(0,x.Z)(o);function o(c,a,s,u,l,m){var p;return(0,b.Z)(this,o),(p=i.call(this,a,s)).router=c,p.gaService=a,p.adverseEventService=s,p.authService=u,p.loadingService=l,p.dialog=m,p.countAdvCvmOut=new t.vpe,p.adverseEventCount=0,p.order="$root_aeCount",p.ascDescDir="desc",p.showSpinner=!1,p.privateExport=!1,p.disableExport=!1,p.etag="",p.loadingStatus="",p.sortValues=Re.l,p.subscriptions=[],p.displayedColumns=["adverseEvent","species","adverseEventCount","routeOfAdmin"],p}return(0,g.Z)(o,[{key:"ngOnInit",value:function(){var a=this,s=this.authService.hasAnyRolesAsync("Admin","Updater","SuperUpdater").subscribe(function(u){a.isAdmin=u});this.subscriptions.push(s),this.bdnum&&(this.getAdverseEventCvm(),this.adverseEventCvmListExportUrl())}},{key:"ngOnDestroy",value:function(){this.subscriptions.forEach(function(a){a.unsubscribe()})}},{key:"getAdverseEventCvm",value:function(a){var s=this;this.setPageEvent(a),this.showSpinner=!0;var m=this.adverseEventService.getAdverseEventCvm(this.order,this.page*this.pageSize,this.pageSize,"root_substanceKey:"+this.bdnum,this.privateFacetParams).subscribe(function(p){s.adverseEventService.totalRecords=p.total,s.adverseEventCount=p.total,s.setResultData(p.content),s.etag=p.etag,s.countAdvCvmOut.emit(s.adverseEventCount)},function(p){console.log("error")},function(){m.unsubscribe()});this.loadingStatus="",this.showSpinner=!1}},{key:"sortData",value:function(a){var s=this;if(a.active){var u=this.displayedColumns.indexOf(a.active).toString();this.ascDescDir=a.direction,this.sortValues.forEach(function(l){l.displayedColumns&&l.direction&&s.displayedColumns[u]===l.displayedColumns&&s.ascDescDir===l.direction&&(s.order=l.value)}),this.getAdverseEventCvm()}}},{key:"export",value:function(){var a=this;if(this.etag){var s="xlsx",u=this.getApiExportUrl(this.etag,s);""!==this.authService.getUser()&&this.dialog.open(N.L,{height:"215x",width:"550px",data:{extension:s,type:"substanceAdverseEventCvm"}}).afterClosed().subscribe(function(m){m&&""!==m&&(a.loadingService.setLoading(!0),a.authService.startUserDownload(u,a.privateExport,m+"."+s).subscribe(function(r){a.loadingService.setLoading(!1),a.router.navigate(["/user-downloads/",r.id])},function(r){return a.loadingService.setLoading(!1)}))})}}},{key:"getApiExportUrl",value:function(a,s){return this.adverseEventService.getApiExportUrlCvm(a,s)}},{key:"adverseEventCvmListExportUrl",value:function(){null!=this.bdnum&&(this.exportUrl=this.adverseEventService.getAdverseEventCvmListExportUrl(this.bdnum))}}]),o}(E);return e.\u0275fac=function(i){return new(i||e)(t.Y36(f.F0),t.Y36(y.$),t.Y36(k.a),t.Y36(U.e),t.Y36(D.b),t.Y36(P.uw))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-substance-adverseeventcvm"]],inputs:{bdnum:"bdnum"},outputs:{countAdvCvmOut:"countAdvCvmOut"},features:[t.qOj],decls:23,vars:9,consts:[[1,"padtop5px","padleft25px","font15px","colorblue"],["class","export",4,"ngIf"],[1,"responsive","mat-table-style"],["class","spinnerstyle",4,"ngIf"],["mat-table","","matSort","","matSortActive","adverseEventCount","matSortDirection","desc","matSortDisableClear","",3,"dataSource","matSortChange"],["matColumnDef","adverseEvent"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","species"],["matColumnDef","adverseEventCount"],["matColumnDef","routeOfAdmin"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","true",3,"length","pageSize","pageSizeOptions","page"],[1,"export"],["matTooltip","Export Search Results","mat-button","",1,"mat-button","export-button","mat-raised-button",3,"click"],["svgIcon","get_app"],[1,"spinnerstyle"],["diameter","80","color","warn","mode","indeterminate"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(i,o){1&i&&(t.TgZ(0,"div",0),t.TgZ(1,"b"),t._uU(2,"Adverse Event CVM"),t.qZA(),t._uU(3," \xa0\xa0\xa0 "),t.YNc(4,Fe,4,0,"span",1),t.qZA(),t.TgZ(5,"div",2),t.YNc(6,ze,2,0,"div",3),t.TgZ(7,"table",4),t.NdJ("matSortChange",function(a){return o.sortData(a)}),t.ynx(8,5),t.YNc(9,$e,2,0,"th",6),t.YNc(10,Be,2,1,"td",7),t.BQk(),t.ynx(11,8),t.YNc(12,je,2,0,"th",6),t.YNc(13,He,2,1,"td",7),t.BQk(),t.ynx(14,9),t.YNc(15,Ge,2,0,"th",6),t.YNc(16,We,2,1,"td",7),t.BQk(),t.ynx(17,10),t.YNc(18,Ke,2,0,"th",6),t.YNc(19,Xe,2,1,"td",7),t.BQk(),t.YNc(20,Ve,1,0,"tr",11),t.YNc(21,tn,1,0,"tr",12),t.qZA(),t.qZA(),t.TgZ(22,"mat-paginator",13),t.NdJ("page",function(a){return o.getAdverseEventCvm(a)}),t.qZA()),2&i&&(t.xp6(4),t.Q6J("ngIf",o.isAdmin&&o.adverseEventCount>0),t.xp6(2),t.Q6J("ngIf",o.showSpinner),t.xp6(1),t.Q6J("dataSource",o.paged),t.xp6(13),t.Q6J("matHeaderRowDef",o.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(1),t.Q6J("length",o.totalRecords)("pageSize",5)("pageSizeOptions",t.DdM(8,en)))},directives:[v.O5,S.lW,T.Hw,A.Ou,d.BZ,w.YE,d.w1,d.fO,d.ge,w.nU,d.Dz,d.ev,d.as,d.XQ,d.nj,d.Gk,Z.NW],styles:[".mat-table-style[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%]{vertical-align:top;font-size:12px}.font15px[_ngcontent-%COMP%]{font-size:15px}.padleft25px[_ngcontent-%COMP%]{padding-left:25px}.padtop5px[_ngcontent-%COMP%]{padding-top:5px}.colorblue[_ngcontent-%COMP%]{color:#4b4572}.colorgray[_ngcontent-%COMP%]{color:gray}.spinnerstyle[_ngcontent-%COMP%]{position:absolute;top:0;left:0;bottom:56px;right:0;background:rgba(150,148,148,.15);z-index:1;display:-ms-flexbox;display:flex;-ms-flex-align:top;align-items:top;-ms-flex-pack:center;justify-content:center}"]}),e}(),an=_(91781);function on(e,n){if(1&e){var i=t.EpF();t.TgZ(0,"span",18),t.TgZ(1,"button",19),t.NdJ("click",function(){return t.CHM(i),t.oxw().export()}),t._UZ(2,"mat-icon",20),t._uU(3," Export "),t.qZA(),t.qZA()}}function sn(e,n){1&e&&(t.TgZ(0,"div",21),t._UZ(1,"mat-progress-spinner",22),t.qZA())}function rn(e,n){1&e&&(t.TgZ(0,"th",23),t._uU(1,"Product/Substance Name"),t.qZA())}function cn(e,n){if(1&e&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&e){var i=t.oxw(2).$implicit;t.xp6(1),t.Oqu(i.productSubstanceName)}}function un(e,n){1&e&&t._uU(0," View ")}_(52489);var pn=function(n){return["/impurities",n,"edit"]};function ln(e,n){if(1&e&&(t.TgZ(0,"a",30),t._UZ(1,"mat-icon",31),t.qZA()),2&e){var i=t.oxw(2).$implicit;t.Q6J("routerLink",t.VKq(1,pn,i.id))}}var dn=function(n){return["/impurities",n]};function mn(e,n){if(1&e&&(t.TgZ(0,"div"),t.TgZ(1,"a",26),t.YNc(2,cn,2,1,"div",27),t.YNc(3,un,1,0,"ng-template",null,28,t.W1O),t.qZA(),t._uU(5," \xa0\xa0 "),t.YNc(6,ln,2,3,"a",29),t.qZA()),2&e){var i=t.MAs(4),o=t.oxw().$implicit,c=t.oxw();t.xp6(1),t.Q6J("routerLink",t.VKq(4,dn,o.id)),t.xp6(1),t.Q6J("ngIf",o.productSubstanceName)("ngIfElse",i),t.xp6(4),t.Q6J("ngIf",c.isAdmin)}}function _n(e,n){if(1&e&&(t.TgZ(0,"td",24),t.YNc(1,mn,7,6,"div",25),t.qZA()),2&e){var i=n.$implicit;t.xp6(1),t.Q6J("ngIf",i.id)}}function vn(e,n){1&e&&(t.TgZ(0,"th",23),t._uU(1," Source Type"),t.qZA())}function fn(e,n){if(1&e&&(t.TgZ(0,"td",24),t._uU(1),t.qZA()),2&e){var i=n.$implicit;t.xp6(1),t.hij(" ",i.sourceType," ")}}function gn(e,n){1&e&&(t.TgZ(0,"th",23),t._uU(1," Source "),t.qZA())}function bn(e,n){if(1&e&&(t.TgZ(0,"td",24),t._uU(1),t.qZA()),2&e){var i=n.$implicit;t.xp6(1),t.hij(" ",i.source," ")}}function hn(e,n){1&e&&(t.TgZ(0,"th",23),t._uU(1," Source ID"),t.qZA())}function Cn(e,n){if(1&e&&(t.TgZ(0,"td",24),t._uU(1),t.qZA()),2&e){var i=n.$implicit;t.xp6(1),t.hij(" ",i.sourceId," ")}}function xn(e,n){1&e&&(t.TgZ(0,"th",23),t._uU(1," Type "),t.qZA())}function Sn(e,n){if(1&e&&(t.TgZ(0,"td",24),t._uU(1),t.qZA()),2&e){var i=n.$implicit;t.xp6(1),t.hij(" ",i.type," ")}}function Tn(e,n){1&e&&(t.TgZ(0,"th",23),t._uU(1," Spec Type "),t.qZA())}function An(e,n){if(1&e&&(t.TgZ(0,"td",24),t._uU(1),t.qZA()),2&e){var i=n.$implicit;t.xp6(1),t.hij(" ",i.specType," ")}}function Zn(e,n){1&e&&(t.TgZ(0,"th",23),t._uU(1," Parent Substance "),t.qZA())}var yn=function(n){return["/substances",n]};function En(e,n){if(1&e&&(t.TgZ(0,"div"),t.TgZ(1,"a",26),t.TgZ(2,"span",33),t._uU(3),t.qZA(),t.qZA(),t.qZA()),2&e){var i=n.$implicit;t.xp6(1),t.Q6J("routerLink",t.VKq(2,yn,i._parentSubstanceUuid)),t.xp6(2),t.Oqu(i._parentSubstanceName)}}function Un(e,n){if(1&e&&(t.TgZ(0,"td",24),t.YNc(1,En,4,4,"div",32),t.qZA()),2&e){var i=n.$implicit;t.xp6(1),t.Q6J("ngForOf",i.impuritiesSubstanceList)}}function Nn(e,n){1&e&&(t.TgZ(0,"th",23),t._uU(1," Impurities Related Substance"),t.qZA())}function Dn(e,n){if(1&e&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&e){var i=t.oxw(2).$implicit;t.xp6(1),t.hij("\xa0\xa0\xa0\xa0",i.limitType,"\xa0")}}function Pn(e,n){if(1&e&&(t.TgZ(0,"span",38),t._UZ(1,"br"),t._uU(2),t.qZA()),2&e){var i=t.oxw(2).$implicit;t.xp6(2),t.hij("\xa0\xa0\xa0\xa0",i.impurityType," ")}}function On(e,n){if(1&e&&(t.TgZ(0,"div"),t.TgZ(1,"span",36),t.YNc(2,Dn,2,1,"span",25),t._uU(3),t.qZA(),t.YNc(4,Pn,3,1,"span",37),t.qZA()),2&e){var i=t.oxw().$implicit;t.xp6(2),t.Q6J("ngIf",i.limitType),t.xp6(1),t.AsE(" ",i.limitValue,"\xa0",i.unit," "),t.xp6(1),t.Q6J("ngIf",i.impurityType)}}function wn(e,n){if(1&e&&(t.TgZ(0,"div",35),t.YNc(1,On,5,4,"div",25),t.qZA()),2&e){var i=n.$implicit,o=t.oxw(4);t.xp6(1),t.Q6J("ngIf",i.relatedSubstanceUuid===o.substanceUuid)}}function qn(e,n){if(1&e&&(t.TgZ(0,"div"),t.YNc(1,wn,2,1,"div",34),t.qZA()),2&e){var i=n.$implicit;t.xp6(1),t.Q6J("ngForOf",i.impuritiesDetailsList)}}function Yn(e,n){if(1&e&&(t.TgZ(0,"div"),t.YNc(1,qn,2,1,"div",32),t.qZA()),2&e){var i=n.$implicit;t.xp6(1),t.Q6J("ngForOf",i.impuritiesTestList)}}function In(e,n){if(1&e&&(t.TgZ(0,"td",24),t.YNc(1,Yn,2,1,"div",32),t.qZA()),2&e){var i=n.$implicit;t.xp6(1),t.Q6J("ngForOf",i.impuritiesSubstanceList)}}function kn(e,n){1&e&&t._UZ(0,"tr",39)}function Mn(e,n){1&e&&t._UZ(0,"tr",40)}var Qn=function(){return[5,10,25,100]},Ln=function(){var e=function(n){(0,C.Z)(o,n);var i=(0,x.Z)(o);function o(c,a,s,u,l,m,p){var r;return(0,b.Z)(this,o),(r=i.call(this,a,s)).router=c,r.gaService=a,r.impuritiesService=s,r.generalService=u,r.authService=l,r.loadingService=m,r.dialog=p,r.countImpuritiesOut=new t.vpe,r.subscriptions=[],r.showSpinner=!1,r.totalImpurities=0,r.impuritiesCount=0,r.impuritiesTestTotal=0,r.pageIndex=0,r.pageSize=5,r.privateExport=!1,r.disableExport=!1,r.etag="",r.displayedColumns=["productName","sourceType","source","sourceid","type","specType","parentSubstance","relatedSubstance"],r}return(0,g.Z)(o,[{key:"ngOnInit",value:function(){var a=this,s=this.authService.hasAnyRolesAsync("Admin","Updater","SuperUpdater").subscribe(function(u){a.isAdmin=u});this.subscriptions.push(s),this.substanceUuid&&(this.getImpuritiesBySubstanceUuid(),this.impuritiesListExportUrl())}},{key:"ngOnDestroy",value:function(){this.subscriptions.forEach(function(a){a&&a.unsubscribe()})}},{key:"searchImpurities",value:function(){var a=this;this.privateSearchTerm=this.substanceUuid;var u=this.impuritiesService.searchImpurities(this.pageIndex*this.pageSize,this.pageSize,this.privateSearchTerm,this.privateFacetParams).subscribe(function(l){a.setResultData(l.content),a.impurities=l.content,a.impuritiesCount=l.total,a.countImpuritiesOut.emit(a.impuritiesCount),a.etag=l.etag},function(l){},function(){u.unsubscribe()})}},{key:"getImpuritiesBySubstanceUuid",value:function(a){var s=this;this.setPageEvent(a),this.showSpinner=!0,this.impuritiesService.getImpuritiesBySubstanceUuid(this.substanceUuid).subscribe(function(u){s.impuritiesService.totalRecords=u.total,s.impurities=u.content,s.loadImpuritiesTestDetails(),s.setResultData(s.impurities),s.totalImpurities=u.total,s.etag=u.etag,s.countImpuritiesOut.emit(s.totalImpurities)}),this.showSpinner=!1}},{key:"loadImpuritiesTestDetails",value:function(){var a=this;this.impurities.forEach(function(s,u){s.impuritiesSubstanceList.forEach(function(l,m){l.substanceUuid&&l.substanceUuid===a.substanceUuid&&(l._parentSubstanceName=a.substanceName,l._parentSubstanceUuid=l.substanceUuid),l.impuritiesTestList.forEach(function(p,r){p.impuritiesDetailsList.forEach(function(h,O){if(null!=h.relatedSubstanceUuid&&h.relatedSubstanceUuid===a.substanceUuid){var Qa=a.generalService.getSubstanceNamesBySubstanceUuid(l.substanceUuid).subscribe(function(La){La.forEach(function(R,$a){!0===R.displayName&&(l._parentSubstanceName=R.name,l._parentSubstanceUuid=l.substanceUuid)})});a.subscriptions.push(Qa)}})})})})}},{key:"getSubstanceNames",value:function(a){var s;if(a){var u=this.generalService.getSubstanceNamesBySubstanceUuid(a).subscribe(function(l){l.forEach(function(p,r){!0===p.displayName&&(s=p.name)})});return this.subscriptions.push(u),s}}},{key:"export",value:function(){var a=this;if(this.etag){var s="xlsx",u=this.getApiExportUrl(this.etag,s);""!==this.authService.getUser()&&this.dialog.open(N.L,{height:"215x",width:"550px",data:{extension:s,type:"substanceImpurities"}}).afterClosed().subscribe(function(m){m&&""!==m&&(a.loadingService.setLoading(!0),a.authService.startUserDownload(u,a.privateExport,m+"."+s).subscribe(function(r){a.loadingService.setLoading(!1),a.router.navigate(["/user-downloads/",r.id])},function(r){return a.loadingService.setLoading(!1)}))})}}},{key:"getApiExportUrl",value:function(a,s){return this.impuritiesService.getApiExportUrl(a,s)}},{key:"impuritiesListExportUrl",value:function(){null!=this.substanceUuid&&(this.exportUrl=this.impuritiesService.getImpuritiesListExportUrl(this.substanceUuid))}}]),o}(E);return e.\u0275fac=function(i){return new(i||e)(t.Y36(f.F0),t.Y36(y.$),t.Y36(an.q),t.Y36(Q.m),t.Y36(U.e),t.Y36(D.b),t.Y36(P.uw))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-substance-impurities"]],inputs:{substanceUuid:"substanceUuid",substanceName:"substanceName"},outputs:{countImpuritiesOut:"countImpuritiesOut"},features:[t.qOj],decls:35,vars:9,consts:[[1,"padtop5px","padleft25px","font15px","colorblue"],["class","export",4,"ngIf"],[1,"responsive","mat-table-style"],["class","spinnerstyle",4,"ngIf"],["mat-table","",3,"dataSource"],["matColumnDef","productName"],["mat-header-cell","","class","width100px",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","sourceType"],["matColumnDef","source"],["matColumnDef","sourceid"],["matColumnDef","type"],["matColumnDef","specType"],["matColumnDef","parentSubstance"],["matColumnDef","relatedSubstance"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","true",3,"length","pageSize","pageSizeOptions","page"],[1,"export"],["matTooltip","Export Search Results","mat-button","",1,"mat-button","export-button","mat-raised-button",3,"click"],["svgIcon","get_app"],[1,"spinnerstyle"],["diameter","80","color","warn","mode","indeterminate"],["mat-header-cell","",1,"width100px"],["mat-cell",""],[4,"ngIf"],["target","_blank",3,"routerLink"],[4,"ngIf","ngIfElse"],["noProdName",""],["target","_blank","matTooltip","Edit Impurities Record",3,"routerLink",4,"ngIf"],["target","_blank","matTooltip","Edit Impurities Record",3,"routerLink"],["svgIcon","edit"],[4,"ngFor","ngForOf"],[1,"colorblue"],["class","font12px",4,"ngFor","ngForOf"],[1,"font12px"],[1,"colorgreen"],["class","colorpurple",4,"ngIf"],[1,"colorpurple"],["mat-header-row",""],["mat-row",""]],template:function(i,o){1&i&&(t.TgZ(0,"div",0),t.TgZ(1,"b"),t._uU(2,"Impurities Specs"),t.qZA(),t._uU(3," \xa0\xa0\xa0 "),t.YNc(4,on,4,0,"span",1),t.qZA(),t.TgZ(5,"div",2),t.YNc(6,sn,2,0,"div",3),t.TgZ(7,"table",4),t.ynx(8,5),t.YNc(9,rn,2,0,"th",6),t.YNc(10,_n,2,1,"td",7),t.BQk(),t.ynx(11,8),t.YNc(12,vn,2,0,"th",6),t.YNc(13,fn,2,1,"td",7),t.BQk(),t.ynx(14,9),t.YNc(15,gn,2,0,"th",6),t.YNc(16,bn,2,1,"td",7),t.BQk(),t.ynx(17,10),t.YNc(18,hn,2,0,"th",6),t.YNc(19,Cn,2,1,"td",7),t.BQk(),t.ynx(20,11),t.YNc(21,xn,2,0,"th",6),t.YNc(22,Sn,2,1,"td",7),t.BQk(),t.ynx(23,12),t.YNc(24,Tn,2,0,"th",6),t.YNc(25,An,2,1,"td",7),t.BQk(),t.ynx(26,13),t.YNc(27,Zn,2,0,"th",6),t.YNc(28,Un,2,1,"td",7),t.BQk(),t.ynx(29,14),t.YNc(30,Nn,2,0,"th",6),t.YNc(31,In,2,1,"td",7),t.BQk(),t.YNc(32,kn,1,0,"tr",15),t.YNc(33,Mn,1,0,"tr",16),t.qZA(),t.qZA(),t.TgZ(34,"mat-paginator",17),t.NdJ("page",function(a){return o.getImpuritiesBySubstanceUuid(a)}),t.qZA()),2&i&&(t.xp6(4),t.Q6J("ngIf",o.isAdmin),t.xp6(2),t.Q6J("ngIf",o.showSpinner),t.xp6(1),t.Q6J("dataSource",o.paged),t.xp6(25),t.Q6J("matHeaderRowDef",o.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(1),t.Q6J("length",o.totalRecords)("pageSize",5)("pageSizeOptions",t.DdM(8,Qn)))},directives:[v.O5,S.lW,T.Hw,A.Ou,d.BZ,d.w1,d.fO,d.ge,d.Dz,d.ev,f.yS,v.sg,d.as,d.XQ,d.nj,d.Gk,Z.NW],styles:['@charset "UTF-8";.mat-table-style[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%]{vertical-align:top;font-size:12px}.bordergray[_ngcontent-%COMP%]{border:1px solid gray}.font10px[_ngcontent-%COMP%]{font-size:10px}.font12px[_ngcontent-%COMP%]{font-size:12px}.font15px[_ngcontent-%COMP%]{font-size:15px}.colorgray[_ngcontent-%COMP%]{color:gray}.colorred[_ngcontent-%COMP%]{color:red}.colorgreen[_ngcontent-%COMP%]{color:green}.colorpurple[_ngcontent-%COMP%]{color:purple}.colorblue[_ngcontent-%COMP%]{color:#3828c9}.padleft25px[_ngcontent-%COMP%]{padding-left:25px}.padtop5px[_ngcontent-%COMP%]{padding-top:5px}.marginbottom10px[_ngcontent-%COMP%]{margin-bottom:10px}.width100px[_ngcontent-%COMP%]{width:100px}ol[_ngcontent-%COMP%], li[_ngcontent-%COMP%]{margin-left:0;padding-left:0}\\200b[_ngcontent-%COMP%]   .spinnerstyle[_ngcontent-%COMP%]{position:absolute;top:0;left:0;bottom:56px;right:0;background:rgba(150,148,148,.15);z-index:1;display:-ms-flexbox;display:flex;-ms-flex-align:top;align-items:top;-ms-flex-pack:center;justify-content:center}']}),e}();function Jn(e,n){if(1&e&&t._UZ(0,"a",5),2&e){var i=t.oxw();t.Q6J("href",i.baseDomain+"/ginas/app/substance/"+i.substance.uuid+"#fdadetails",t.LSH)}}function Rn(e,n){1&e&&(t.TgZ(0,"div"),t._UZ(1,"br"),t.TgZ(2,"div",9),t.TgZ(3,"b"),t._uU(4,"No Product Found"),t.qZA(),t.qZA(),t._UZ(5,"br"),t.qZA())}function Fn(e,n){if(1&e){var i=t.EpF();t.TgZ(0,"span",29),t.TgZ(1,"button",30),t.NdJ("click",function(){return t.CHM(i),t.oxw(3).export()}),t._UZ(2,"mat-icon",31),t._uU(3," Export All Products "),t.qZA(),t.qZA()}}function zn(e,n){1&e&&(t.TgZ(0,"div",32),t._UZ(1,"mat-progress-spinner",33),t.qZA())}function $n(e,n){1&e&&(t.TgZ(0,"th",34),t._uU(1," Product ID "),t.qZA())}function Bn(e,n){if(1&e&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&e){var i=t.oxw(2).$implicit;t.xp6(1),t.hij(" ",i.productNDC," ")}}function jn(e,n){1&e&&t._uU(0," (NO NDC) ")}var Hn=function(n){return["/product",n,"edit"]};function Gn(e,n){if(1&e&&(t.TgZ(0,"a",40),t._UZ(1,"mat-icon",41),t.qZA()),2&e){var i=t.oxw(2).$implicit;t.Q6J("routerLink",t.VKq(1,Hn,i.productId))}}var Wn=function(n){return["/product",n]};function Kn(e,n){if(1&e&&(t.TgZ(0,"span"),t.TgZ(1,"a",36),t.YNc(2,Bn,2,1,"span",37),t.YNc(3,jn,1,0,"ng-template",null,38,t.W1O),t.qZA(),t._uU(5," \xa0\xa0 "),t.YNc(6,Gn,2,3,"a",39),t.qZA()),2&e){var i=t.MAs(4),o=t.oxw().$implicit,c=t.oxw(3);t.xp6(1),t.Q6J("routerLink",t.VKq(4,Wn,o.productId)),t.xp6(1),t.Q6J("ngIf",o.productNDC)("ngIfElse",i),t.xp6(4),t.Q6J("ngIf",c.isAdmin)}}function Xn(e,n){if(1&e&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&e){var i=t.oxw(2).$implicit;t.xp6(1),t.hij(" ",i.productNDC," ")}}function Vn(e,n){1&e&&t._uU(0," (NO NDC) ")}var ta=function(n){return["/product-elist",n]};function ea(e,n){if(1&e&&(t.TgZ(0,"span"),t.TgZ(1,"a",36),t.YNc(2,Xn,2,1,"span",37),t.YNc(3,Vn,1,0,"ng-template",null,42,t.W1O),t.qZA(),t._UZ(5,"br"),t.TgZ(6,"span",43),t._uU(7),t.qZA(),t.qZA()),2&e){var i=t.MAs(4),o=t.oxw().$implicit;t.xp6(1),t.Q6J("routerLink",t.VKq(4,ta,o.productId)),t.xp6(1),t.Q6J("ngIf",o.productNDC)("ngIfElse",i),t.xp6(5),t.hij("(",o.fromtable,")")}}function na(e,n){if(1&e&&(t.TgZ(0,"td",35),t.YNc(1,Kn,7,6,"span",4),t.YNc(2,ea,8,6,"span",4),t.qZA()),2&e){var i=n.$implicit;t.xp6(1),t.Q6J("ngIf","GSRS"===i.fromtable),t.xp6(1),t.Q6J("ngIf","GSRS"!=i.fromtable)}}function aa(e,n){1&e&&(t.TgZ(0,"th",34),t._uU(1," Product Name "),t.qZA())}function ia(e,n){if(1&e&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&e){var i=n.$implicit;t.xp6(1),t.hij(" ",i.productName," ")}}function oa(e,n){if(1&e&&(t.TgZ(0,"td",35),t.YNc(1,ia,2,1,"div",44),t.qZA()),2&e){var i=n.$implicit;t.xp6(1),t.Q6J("ngForOf",i.productNameAllList)}}function sa(e,n){1&e&&(t.TgZ(0,"th",34),t._uU(1," Labeler Name "),t.qZA())}function ra(e,n){if(1&e&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&e){var i=n.$implicit;t.xp6(1),t.hij(" ",i.labelerName," ")}}function ca(e,n){if(1&e&&(t.TgZ(0,"td",35),t._uU(1),t.YNc(2,ra,2,1,"div",44),t.qZA()),2&e){var i=n.$implicit;t.xp6(1),t.hij(" ",i.labelerName," "),t.xp6(1),t.Q6J("ngForOf",i.productCompanyAllList)}}function ua(e,n){1&e&&(t.TgZ(0,"th",34),t._uU(1," Country "),t.qZA())}function pa(e,n){if(1&e&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&e){var i=n.$implicit;t.xp6(1),t.hij(" ",i.countryWithoutCode," ")}}function la(e,n){if(1&e&&(t.TgZ(0,"td",35),t.YNc(1,pa,2,1,"div",44),t.qZA()),2&e){var i=n.$implicit;t.xp6(1),t.Q6J("ngForOf",i.productCompanyAllList)}}function da(e,n){1&e&&(t.TgZ(0,"th",34),t._uU(1," Status "),t.qZA())}function ma(e,n){if(1&e&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&e){var i=n.$implicit;t.xp6(1),t.hij(" ",i.status," ")}}function _a(e,n){1&e&&(t.TgZ(0,"th",34),t._uU(1," Product Type "),t.qZA())}function va(e,n){if(1&e&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&e){var i=n.$implicit;t.xp6(1),t.hij(" ",i.productType," ")}}function fa(e,n){1&e&&(t.TgZ(0,"th",34),t._uU(1," Ingredient Type "),t.qZA())}function ga(e,n){if(1&e&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&e){var i=t.oxw(2).$implicit;t.xp6(1),t.hij(" ",i.ingredientType," ")}}function ba(e,n){if(1&e&&(t.TgZ(0,"div"),t.YNc(1,ga,2,1,"div",4),t.qZA()),2&e){var i=t.oxw().$implicit,o=t.oxw(4);t.xp6(1),t.Q6J("ngIf",o.substance.uuid===i.substanceUuid)}}function ha(e,n){if(1&e&&(t.TgZ(0,"div"),t.YNc(1,ba,2,1,"div",4),t.qZA()),2&e){var i=n.$implicit;t.xp6(1),t.Q6J("ngIf",i.substanceUuid)}}function Ca(e,n){if(1&e&&(t.TgZ(0,"td",35),t.YNc(1,ha,2,1,"div",44),t.qZA()),2&e){var i=n.$implicit;t.xp6(1),t.Q6J("ngForOf",i.productIngredientAllList)}}function xa(e,n){1&e&&(t.TgZ(0,"th",34),t._uU(1," Application Number "),t.qZA())}function Sa(e,n){if(1&e&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&e){var i=n.$implicit;t.xp6(1),t.hij(" ",i.appTypeNumber," ")}}function Ta(e,n){1&e&&t._UZ(0,"tr",45)}function Aa(e,n){1&e&&t._UZ(0,"tr",46)}var Za=function(){return[5,10,25,100]};function ya(e,n){if(1&e){var i=t.EpF();t.TgZ(0,"mat-tab",6),t.TgZ(1,"div",10),t.TgZ(2,"b"),t._uU(3),t.qZA(),t._uU(4," \xa0\xa0\xa0 "),t.TgZ(5,"span",11),t._uU(6),t.qZA(),t._uU(7," \xa0\xa0\xa0 "),t.YNc(8,Fn,4,0,"span",12),t.qZA(),t.TgZ(9,"div",13),t.YNc(10,zn,2,0,"div",14),t.TgZ(11,"table",15),t.ynx(12,16),t.YNc(13,$n,2,0,"th",17),t.YNc(14,na,3,2,"td",18),t.BQk(),t.ynx(15,19),t.YNc(16,aa,2,0,"th",17),t.YNc(17,oa,2,1,"td",18),t.BQk(),t.ynx(18,20),t.YNc(19,sa,2,0,"th",17),t.YNc(20,ca,3,2,"td",18),t.BQk(),t.ynx(21,21),t.YNc(22,ua,2,0,"th",17),t.YNc(23,la,2,1,"td",18),t.BQk(),t.ynx(24,22),t.YNc(25,da,2,0,"th",17),t.YNc(26,ma,2,1,"td",18),t.BQk(),t.ynx(27,23),t.YNc(28,_a,2,0,"th",17),t.YNc(29,va,2,1,"td",18),t.BQk(),t.ynx(30,24),t.YNc(31,fa,2,0,"th",17),t.YNc(32,Ca,2,1,"td",18),t.BQk(),t.ynx(33,25),t.YNc(34,xa,2,0,"th",17),t.YNc(35,Sa,2,1,"td",18),t.BQk(),t.YNc(36,Ta,1,0,"tr",26),t.YNc(37,Aa,1,0,"tr",27),t.qZA(),t.qZA(),t.TgZ(38,"mat-paginator",28),t.NdJ("page",function(s){return t.CHM(i),t.oxw(2).getSubstanceProducts(s)}),t.qZA(),t.qZA()}if(2&e){var o=n.$implicit,c=t.oxw(2);t.s9C("label",o),t.xp6(3),t.hij(" ",o,""),t.xp6(3),t.Oqu(c.loadingStatus),t.xp6(2),t.Q6J("ngIf",c.isAdmin),t.xp6(2),t.Q6J("ngIf",c.showSpinner),t.xp6(1),t.Q6J("dataSource",c.paged),t.xp6(25),t.Q6J("matHeaderRowDef",c.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",c.displayedColumns),t.xp6(1),t.Q6J("length",c.totalRecords)("pageSize",5)("pageSizeOptions",t.DdM(11,Za))}}function Ea(e,n){if(1&e){var i=t.EpF();t.TgZ(0,"mat-tab",6),t.YNc(1,Rn,6,0,"div",4),t.TgZ(2,"mat-tab-group",7),t.NdJ("selectedTabChange",function(a){return t.CHM(i),t.oxw().tabSelected(a)}),t.YNc(3,ya,39,12,"mat-tab",8),t.qZA(),t.qZA()}if(2&e){var o=t.oxw();t.MGl("label","Product (",o.productCount,")"),t.xp6(1),t.Q6J("ngIf",!0===o.loadingComplete&&!1===o.foundProvenanceList&&0===o.productCount),t.xp6(2),t.Q6J("ngForOf",o.provenanceList)}}function Ua(e,n){if(1&e){var i=t.EpF();t.TgZ(0,"mat-tab",6),t.TgZ(1,"app-substance-application",47),t.NdJ("countApplicationOut",function(a){return t.CHM(i),t.oxw().getApplicationCount(a)}),t.qZA(),t.qZA()}if(2&e){var o=t.oxw();t.MGl("label","Application (",o.applicationCount,")"),t.xp6(1),t.Q6J("bdnum",o.bdnum)}}function Na(e,n){if(1&e){var i=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"mat-tab",6),t.TgZ(2,"app-substance-clinical-trials",48),t.NdJ("countClinicalTrialOut",function(a){return t.CHM(i),t.oxw().getClinicalTrialCount(a)}),t.qZA(),t.qZA(),t.qZA()}if(2&e){var o=t.oxw();t.xp6(1),t.MGl("label","Clinical Trial (",o.clinicalTrialCount,")"),t.xp6(1),t.Q6J("bdnum",o.bdnum)("substanceUuid",o.substance.uuid)}}function Da(e,n){if(1&e){var i=t.EpF();t.TgZ(0,"mat-tab",6),t.TgZ(1,"app-substance-clinical-trials-eu",49),t.NdJ("countClinicalTrialEuOut",function(a){return t.CHM(i),t.oxw().getClinicalTrialEuCount(a)}),t.qZA(),t.qZA()}if(2&e){var o=t.oxw();t.MGl("label","Clinical Trial Europe (",o.clinicalTrialEuCount,")"),t.xp6(1),t.Q6J("bdnum",o.bdnum)("substanceUuid",o.substance.uuid)}}function Pa(e,n){if(1&e){var i=t.EpF();t.TgZ(0,"mat-tab",6),t.TgZ(1,"app-substance-adverseeventpt",50),t.NdJ("countAdvPtOut",function(a){return t.CHM(i),t.oxw().getAdvPtCount(a)}),t.qZA(),t.qZA()}if(2&e){var o=t.oxw();t.MGl("label","Adverse Event PT (",o.advPtCount,")"),t.xp6(1),t.Q6J("bdnum",o.bdnum)("substanceName",o.substanceName)}}function Oa(e,n){if(1&e){var i=t.EpF();t.TgZ(0,"mat-tab",6),t.TgZ(1,"app-substance-adverseeventdme",51),t.NdJ("countAdvDmeOut",function(a){return t.CHM(i),t.oxw().getAdvDmeCount(a)}),t.qZA(),t.qZA()}if(2&e){var o=t.oxw();t.MGl("label","Adverse Event DME (",o.advDmeCount,")"),t.xp6(1),t.Q6J("bdnum",o.bdnum)}}function wa(e,n){if(1&e){var i=t.EpF();t.TgZ(0,"mat-tab",6),t.TgZ(1,"app-substance-adverseeventcvm",52),t.NdJ("countAdvCvmOut",function(a){return t.CHM(i),t.oxw().getAdvCvmCount(a)}),t.qZA(),t.qZA()}if(2&e){var o=t.oxw();t.MGl("label","Adverse Event CVM (",o.advCvmCount,")"),t.xp6(1),t.Q6J("bdnum",o.bdnum)}}function qa(e,n){if(1&e){var i=t.EpF();t.TgZ(0,"mat-tab",6),t.TgZ(1,"app-substance-impurities",53),t.NdJ("countImpuritiesOut",function(a){return t.CHM(i),t.oxw().getImpuritiesCount(a)}),t.qZA(),t.qZA()}if(2&e){var o=t.oxw();t.MGl("label","Impurities Specs (",o.impuritiesCount,")"),t.xp6(1),t.Q6J("substanceUuid",o.substance.uuid)("substanceName",o.substanceName)}}var Ya=function(){var e=function(n){(0,C.Z)(o,n);var i=(0,x.Z)(o);function o(c,a,s,u,l,m,p){var r;return(0,b.Z)(this,o),(r=i.call(this,a,s)).router=c,r.gaService=a,r.productService=s,r.configService=u,r.authService=l,r.loadingService=m,r.dialog=p,r.productCount=0,r.applicationCount=0,r.clinicalTrialCount=0,r.clinicalTrialEuCount=0,r.advPtCount=0,r.advDmeCount=0,r.advCvmCount=0,r.impuritiesCount=0,r.provenance="",r.provenanceList="",r.datasourceList="",r.loadingStatus="",r.showSpinner=!1,r.foundProvenanceList=!1,r.loadingComplete=!1,r.substanceName="",r.privateExport=!1,r.disableExport=!1,r.etag="",r.etagAllExport="",r.displayedColumns=["productId","productName","labelerName","country","status","productNameType","ingredientType","applicationNumber"],r}return(0,g.Z)(o,[{key:"ngOnInit",value:function(){var a=this;this.loadedComponents=this.configService.configData.loadedComponents||null,this.authService.hasAnyRolesAsync("Admin","Updater","SuperUpdater").pipe((0,I.q)(1)).subscribe(function(s){a.isAdmin=s}),this.substance&&this.substance.uuid&&(this.getSubstanceKey(),this.getProductProvenanceList(),this.privateSearch='root_productIngredientAllList_substanceUuid:"'+this.substance.uuid+'"',this.getSubstanceProducts(null,"initial")),this.baseDomain=this.configService.configData.apiUrlDomain}},{key:"ngAfterViewInit",value:function(){}},{key:"getApplicationCount",value:function(a){this.applicationCount=a}},{key:"getClinicalTrialCount",value:function(a){this.clinicalTrialCount=a}},{key:"getClinicalTrialEuCount",value:function(a){this.clinicalTrialEuCount=a}},{key:"getAdvPtCount",value:function(a){this.advPtCount=a}},{key:"getAdvDmeCount",value:function(a){this.advDmeCount=a}},{key:"getAdvCvmCount",value:function(a){this.advCvmCount=a}},{key:"getImpuritiesCount",value:function(a){this.impuritiesCount=a}},{key:"getSubstanceKey",value:function(){var a=this;this.substance&&(this.substanceName=this.substance._name,this.substance.codes.length>0&&this.substance.codes.forEach(function(s){s.codeSystem&&"BDNUM"===s.codeSystem&&s.type&&"PRIMARY"===s.type&&(a.bdnum=s.code)}))}},{key:"getProductProvenanceList",value:function(){var a=this;this.productService.getProductProvenanceList(this.substance.uuid).subscribe(function(s){a.provenanceList=s,a.provenanceList&&a.provenanceList.length>0&&(a.foundProvenanceList=!0),a.loadingComplete=!0})}},{key:"getSubstanceProducts",value:function(a,s){var u=this;this.setPageEvent(a),this.showSpinner=!0;var m=this.productService.getProducts("default",this.page*this.pageSize,this.pageSize,this.privateSearch,this.privateFacetParams).subscribe(function(p){s&&"initial"===s?u.etagAllExport=p.etag:(u.productService.totalRecords=p.total,u.setResultData(p.content),u.productCount=p.total,u.etag=p.etag)},function(p){console.log("error")},function(){m.unsubscribe()});this.loadingStatus="",this.showSpinner=!1}},{key:"export",value:function(){var a=this;if(this.etagAllExport){var s="xlsx",u=this.getApiExportUrl(this.etagAllExport,s);""!==this.authService.getUser()&&this.dialog.open(N.L,{height:"215x",width:"550px",data:{extension:s,type:"substanceProduct"}}).afterClosed().subscribe(function(m){m&&""!==m&&(a.loadingService.setLoading(!0),a.authService.startUserDownload(u,a.privateExport,m+"."+s).subscribe(function(r){a.loadingService.setLoading(!1),a.router.navigate(["/user-downloads/",r.id])},function(r){return a.loadingService.setLoading(!1)}))})}}},{key:"getApiExportUrl",value:function(a,s){return this.productService.getApiExportUrl(a,s)}},{key:"tabSelected",value:function(a){if(a){var u=a.tab.textLabel;null!=u&&(this.loadingStatus="Loading data...",this.provenance=u,this.paged=[],this.privateSearch='root_productIngredientAllList_substanceUuid:"'+this.substance.uuid+'" AND root_provenance:'+this.provenance,this.getSubstanceProducts())}}}]),o}(E);return e.\u0275fac=function(i){return new(i||e)(t.Y36(f.F0),t.Y36(y.$),t.Y36(z.M),t.Y36(Y.E),t.Y36(U.e),t.Y36(D.b),t.Y36(P.uw))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-substance-products"]],features:[t.qOj],decls:12,vars:9,consts:[[1,"info-container"],["aria-label","FDA details","target","_blank",3,"href",4,"ngIf"],[1,"bordergray","mat-tab-style"],[3,"label",4,"ngIf"],[4,"ngIf"],["aria-label","FDA details","target","_blank",3,"href"],[3,"label"],[3,"selectedTabChange"],[3,"label",4,"ngFor","ngForOf"],[1,"padleft25px","colorblue"],[1,"padtop5px","padleft25px","font15px","colorblue"],[1,"colorred"],["class","export",4,"ngIf"],[1,"responsive","mat-table-style"],["class","spinnerstyle",4,"ngIf"],["mat-table","",1,"font12px",3,"dataSource"],["matColumnDef","productId"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","productName"],["matColumnDef","labelerName"],["matColumnDef","country"],["matColumnDef","status"],["matColumnDef","productNameType"],["matColumnDef","ingredientType"],["matColumnDef","applicationNumber"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","true",3,"length","pageSize","pageSizeOptions","page"],[1,"export"],["matTooltip","Export Search Results","mat-button","",1,"mat-button","export-button","mat-raised-button",3,"click"],["svgIcon","get_app"],[1,"spinnerstyle"],["diameter","80","color","warn","mode","indeterminate"],["mat-header-cell",""],["mat-cell",""],["target","_blank",3,"routerLink"],[4,"ngIf","ngIfElse"],["noProdNDCGSRS",""],["target","_blank","matTooltip","Edit GSRS Product Record",3,"routerLink",4,"ngIf"],["target","_blank","matTooltip","Edit GSRS Product Record",3,"routerLink"],["svgIcon","edit"],["noProdNDC",""],[1,"font10px","colorgray"],[4,"ngFor","ngForOf"],["mat-header-row",""],["mat-row",""],[3,"bdnum","countApplicationOut"],[3,"bdnum","substanceUuid","countClinicalTrialOut"],[3,"bdnum","substanceUuid","countClinicalTrialEuOut"],[3,"bdnum","substanceName","countAdvPtOut"],[3,"bdnum","countAdvDmeOut"],[3,"bdnum","countAdvCvmOut"],[3,"substanceUuid","substanceName","countImpuritiesOut"]],template:function(i,o){1&i&&(t.TgZ(0,"div",0),t.YNc(1,Jn,1,1,"a",1),t.qZA(),t.TgZ(2,"div",2),t.TgZ(3,"mat-tab-group"),t.YNc(4,Ea,4,3,"mat-tab",3),t.YNc(5,Ua,2,2,"mat-tab",3),t.YNc(6,Na,3,3,"div",4),t.YNc(7,Da,2,3,"mat-tab",3),t.YNc(8,Pa,2,3,"mat-tab",3),t.YNc(9,Oa,2,2,"mat-tab",3),t.YNc(10,wa,2,2,"mat-tab",3),t.YNc(11,qa,2,3,"mat-tab",3),t.qZA(),t.qZA()),2&i&&(t.xp6(1),t.Q6J("ngIf",o.substance&&o.substance.uuid),t.xp6(3),t.Q6J("ngIf",o.loadedComponents&&o.loadedComponents.products),t.xp6(1),t.Q6J("ngIf",o.loadedComponents&&o.loadedComponents.applications),t.xp6(1),t.Q6J("ngIf",o.loadedComponents&&o.loadedComponents.clinicaltrials),t.xp6(1),t.Q6J("ngIf",o.loadedComponents&&o.loadedComponents.clinicaltrials),t.xp6(1),t.Q6J("ngIf",o.loadedComponents&&o.loadedComponents.adverseevents),t.xp6(1),t.Q6J("ngIf",o.loadedComponents&&o.loadedComponents.adverseevents),t.xp6(1),t.Q6J("ngIf",o.loadedComponents&&o.loadedComponents.adverseevents),t.xp6(1),t.Q6J("ngIf",o.loadedComponents&&o.loadedComponents.impurities))},directives:[v.O5,q.SP,q.uX,v.sg,S.lW,T.Hw,A.Ou,d.BZ,d.w1,d.fO,d.ge,d.Dz,d.ev,f.yS,d.as,d.XQ,d.nj,d.Gk,Z.NW,Ct,Mt,te,Se,Je,nn,Ln],styles:[".mat-table-style[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%]{vertical-align:top;font-size:12px}.mat-tab-style[_ngcontent-%COMP%]   .mat-tab-labels[_ngcontent-%COMP%], .mat-tab-style[_ngcontent-%COMP%]   .mat-tab-label[_ngcontent-%COMP%], .mat-tab-style[_ngcontent-%COMP%]   .mat-tab-link[_ngcontent-%COMP%]{color:#00f}.bordergray[_ngcontent-%COMP%]{border:1px solid gray}.font10px[_ngcontent-%COMP%]{font-size:10px}.font15px[_ngcontent-%COMP%]{font-size:15px}.colorgray[_ngcontent-%COMP%]{color:gray}.padleft15px[_ngcontent-%COMP%]{padding-left:15px}.padleft25px[_ngcontent-%COMP%]{padding-left:25px}.padtop5px[_ngcontent-%COMP%]{padding-top:5px}.colorblue[_ngcontent-%COMP%]{color:#4b4572}.colorred[_ngcontent-%COMP%]{color:red}.info-container[_ngcontent-%COMP%]{margin-bottom:15px}.info-container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#00f;text-decoration:none}.spinnerstyle[_ngcontent-%COMP%]{position:absolute;top:0;left:0;bottom:56px;right:0;background:rgba(150,148,148,.15);z-index:1;display:-ms-flexbox;display:flex;-ms-flex-align:top;align-items:top;-ms-flex-pack:center;justify-content:center}"]}),e}(),Ia=_(33865),ka=_(43365),J=_(90587),Ma=(_(64061),function(){var e=(0,g.Z)(function n(){(0,b.Z)(this,n)});return e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[v.ez,F.o0.forChild(Ya),d.p0,Ia.HT,Z.TU,w.JX,ka.c,q.Nh,S.ot,T.Ps,A.Cq,J.UX,J.u5,f.Bz]]}),e}())}}]);
//# sourceMappingURL=4371.6026c0c6ad88dd22.js.map