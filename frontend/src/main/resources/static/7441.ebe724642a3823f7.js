"use strict";(self.webpackChunkgsrs_client=self.webpackChunkgsrs_client||[]).push([[7441],{57441:function($,m,t){t.r(m),t.d(m,{SubstanceFormSugarsModule:function(){return L}});var v=t(1884),f=t(39117),g=t(36362),Z=t(75143),C=t(7168),S=t(19975),h=t(65590),p=t(87317),x=t(94673),T=t(44770),b=t(90587),I=t(26439),O=t(43365),A=t(40089),E=t(31959),J=t(91434),M=t(44014),U=t(46751),D=t(56101),Q=t(79550),N=(t(27299),t(33567)),Y=t(40104),n=t(86613),R=t(78444),H=t(51279),P=t(1427);function V(r,u){1&r&&n._UZ(0,"mat-divider",7),2&r&&n.Q6J("inset",!0)}function j(r,u){if(1&r){var c=n.EpF();n.TgZ(0,"div",4),n.TgZ(1,"app-sugar-form",5),n.NdJ("sugarDeleted",function(i){return n.CHM(c),n.oxw().deleteSugar(i)}),n.qZA(),n.YNc(2,V,1,1,"mat-divider",6),n.qZA()}if(2&r){var a=u.$implicit,o=u.last,e=u.index,l=n.oxw();n.Q6J("id","substance-sugars-"+e),n.xp6(1),n.Q6J("sugar",a)("remaining",l.remainingSites),n.xp6(1),n.Q6J("ngIf",!o)}}function z(r,u){if(1&r){var c=n.EpF();n.TgZ(0,"div",8),n._UZ(1,"span",9),n.TgZ(2,"div",8),n.TgZ(3,"button",10),n.NdJ("click",function(){return n.CHM(c),n.oxw().addOtherSugar()}),n._uU(4," Add sugar "),n._UZ(5,"mat-icon",11),n.qZA(),n.qZA(),n.qZA()}}var B=function(){var r=function(u){(0,U.Z)(a,u);var c=(0,D.Z)(a);function a(o,e,l){var s;return(0,f.Z)(this,a),(s=c.call(this,l)).substanceFormService=o,s.scrollToService=e,s.gaService=l,s.remainingSites=[],s.invalidSites=0,s.subscriptions=[],s.analyticsEventCategory="substance form sugars",s}return(0,v.Z)(a,[{key:"ngOnInit",value:function(){this.canAddItemUpdate.emit(!0),this.menuLabelUpdate.emit("Sugars")}},{key:"ngAfterViewInit",value:function(){var e=this,l=this.substanceFormService.substanceSugars.subscribe(function(i){e.sugars=i,e.getRemainingSites()});this.subscriptions.push(l);var s=this.substanceFormService.substanceSubunits.subscribe(function(i){e.subunits=i,e.getRemainingSites()});this.subscriptions.push(s)}},{key:"ngOnDestroy",value:function(){this.componentDestroyed.emit(),this.subscriptions.forEach(function(e){e.unsubscribe()})}},{key:"getRemainingSites",value:function(){var e=[],l=[];this.subunits&&this.sugars&&(this.subunits.forEach(function(s){if(null!=s.sequence&&s.sequence.length>0)for(var i=1;i<=s.sequence.length;i++)l.push({subunitIndex:s.subunitIndex,residueIndex:i})}),this.sugars.forEach(function(s){e=e.concat(s.sites)})),this.remainingSites=l.filter(function(s){return!e.some(function(i){return s.subunitIndex===i.subunitIndex&&s.residueIndex===i.residueIndex})}),this.invalidSites=l.length-e.length}},{key:"addItem",value:function(){this.addOtherSugar()}},{key:"addOtherSugar",value:function(){var e=this;this.substanceFormService.addSubstanceSugar(),setTimeout(function(){e.scrollToService.scrollToElement("substance-sugars-0","center")})}},{key:"deleteSugar",value:function(e){this.substanceFormService.deleteSubstanceSugar(e)}},{key:"findElements",value:function(e,l,s){var y,i=[],d=(0,M.Z)(e);try{for(d.s();!(y=d.n()).done;){var F=y.value;F[l]===s&&i.push(F)}}catch(X){d.e(X)}finally{d.f()}return i}}]),a}(Q.u);return r.\u0275fac=function(c){return new(c||r)(n.Y36(N.B),n.Y36(R.i),n.Y36(Y.$))},r.\u0275cmp=n.Xpm({type:r,selectors:[["app-substance-form-sugars"]],features:[n.qOj],decls:5,vars:4,consts:[[1,"responsive"],[1,"form-row",3,"ngClass"],["class","alternate-backgrounds","appScrollToTarget","",3,"id",4,"ngFor","ngForOf"],["class","form-row",4,"ngIf"],["appScrollToTarget","",1,"alternate-backgrounds",3,"id"],[3,"sugar","remaining","sugarDeleted"],["class","form-divider",3,"inset",4,"ngIf"],[1,"form-divider",3,"inset"],[1,"form-row"],[1,"middle-fill"],["mat-button","",3,"click"],["svgIcon","add_circle_outline"]],template:function(c,a){1&c&&(n.TgZ(0,"div",0),n.TgZ(1,"div",1),n._uU(2),n.qZA(),n.YNc(3,j,3,4,"div",2),n.qZA(),n.YNc(4,z,6,0,"div",3)),2&c&&(n.xp6(1),n.Q6J("ngClass",0===a.invalidSites?"":"too-many"),n.xp6(1),n.hij("Remaining Sugars: ",0===a.invalidSites?a.remainingSites.length:a.invalidSites,""),n.xp6(1),n.Q6J("ngForOf",a.sugars),n.xp6(1),n.Q6J("ngIf",a.sugars&&a.sugars.length>0))},directives:[g.mk,g.sg,H.P,P.I,g.O5,S.d,p.lW,h.Hw],styles:[".form-row[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center;padding:5px 10px;-ms-flex-align:end;align-items:flex-end;font-size:18px;margin-bottom:5px}.too-many[_ngcontent-%COMP%]{color:var(--regular-red-color)}"]}),r}(),L=(t(64061),function(){var r=(0,v.Z)(function u(){(0,f.Z)(this,u)});return r.\u0275fac=function(c){return new(c||r)},r.\u0275mod=n.oAB({type:r}),r.\u0275inj=n.cJS({imports:[[g.ez,Z.o0.forChild(B),C.O,S.t,h.Ps,p.ot,x.w,T.lN,b.UX,b.u5,I.TU,A.AV,E.vV,O.c,J.LD]]}),r}())}}]);
//# sourceMappingURL=7441.ebe724642a3823f7.js.map