"use strict";(self.webpackChunkgsrs_client=self.webpackChunkgsrs_client||[]).push([[8302],{48302:function(E,N,r){r.d(N,{V:function(){return Oe}});var x=r(78069),D=r(48047),v=r(33567),Z=r(42827),y=r(91770),o=r(95758),e=r(76442),O=r(61534),U=r(40089),f=r(97217),R=r(36362),T=r(87317);function Y(n,a){1&n&&(e.TgZ(0,"th",17),e._uU(1," Apply "),e.qZA())}function p(n,a){if(1&n){var t=e.EpF();e.TgZ(0,"td",18),e.TgZ(1,"mat-checkbox",3),e.NdJ("change",function(u){var b=e.CHM(t).$implicit;return e.oxw().toggleReference(u,b)}),e.qZA(),e.qZA()}if(2&n){var i=a.$implicit,c=e.oxw();e.xp6(1),e.Q6J("checked",c.domainReferenceUuids.indexOf(i.uuid)>-1)}}function d(n,a){1&n&&(e.TgZ(0,"th",17),e._uU(1," Type "),e.qZA())}function m(n,a){if(1&n&&(e.TgZ(0,"td",18),e._uU(1),e.qZA()),2&n){var t=a.$implicit,i=e.oxw();e.xp6(1),e.hij(" ",i.documentTypes[t.docType]&&i.documentTypes[t.docType].value," ")}}function l(n,a){1&n&&(e.TgZ(0,"th",17),e._uU(1," Citation "),e.qZA())}function g(n,a){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){var t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.citation)}}function h(n,a){if(1&n&&(e.TgZ(0,"a",21),e._uU(1),e.qZA()),2&n){var t=e.oxw().$implicit;e.Q6J("href",t.url,e.LSH),e.xp6(1),e.Oqu(t.citation)}}function C(n,a){if(1&n&&(e.TgZ(0,"td",18),e.YNc(1,g,2,1,"span",19),e.YNc(2,h,2,2,"a",20),e.qZA()),2&n){var t=a.$implicit;e.xp6(1),e.Q6J("ngIf",!t.url),e.xp6(1),e.Q6J("ngIf",t.url)}}function k(n,a){1&n&&(e.TgZ(0,"th",17),e._uU(1," Public Domain "),e.qZA())}function I(n,a){if(1&n&&(e.TgZ(0,"td",18),e._uU(1),e.qZA()),2&n){var t=a.$implicit;e.xp6(1),e.hij(" ",t.publicDomain?"Yes":"No"," ")}}function w(n,a){1&n&&(e.TgZ(0,"th",17),e._uU(1," Access "),e.qZA())}function M(n,a){1&n&&(e.TgZ(0,"span"),e._uU(1," Public "),e.qZA())}function J(n,a){1&n&&(e.TgZ(0,"span"),e._uU(1,", "),e.qZA())}function P(n,a){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.YNc(2,J,2,0,"span",19),e.qZA()),2&n){var t=a.$implicit,i=a.last;e.xp6(1),e.hij(" ",t," "),e.xp6(1),e.Q6J("ngIf",!i)}}function Q(n,a){if(1&n&&(e.TgZ(0,"span"),e.YNc(1,P,3,2,"span",22),e.qZA()),2&n){var t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",t.access)}}function q(n,a){if(1&n&&(e.TgZ(0,"td",18),e.YNc(1,M,2,0,"span",19),e.YNc(2,Q,2,1,"span",19),e.qZA()),2&n){var t=a.$implicit;e.xp6(1),e.Q6J("ngIf",!t.access||0===t.access.length),e.xp6(1),e.Q6J("ngIf",t.access&&t.access.length>0)}}function F(n,a){1&n&&e._UZ(0,"tr",23)}function S(n,a){1&n&&e._UZ(0,"tr",24)}var B=function(){var n=function(){function a(t,i,c){(0,x.Z)(this,a),this.dialogRef=t,this.data=i,this.cvService=c,this.domainReferenceUuids=[],this.documentTypes={},this.displayedColumns=["apply","type","citation","publicDomain","access"],this.filter=!1,this.domainReferenceUuids=i.domainRefereceUuids.slice(),this.substanceReferences=i.substanceReferences}return(0,D.Z)(a,[{key:"ngOnInit",value:function(){var i=this;this.unfiltered=JSON.parse(JSON.stringify(this.substanceReferences)),this.getVocabularies(),this.dialogRef.beforeClosed().subscribe(function(){return i.dialogRef.close(i.domainReferenceUuids&&i.domainReferenceUuids.length>0?i.domainReferenceUuids:null)}),this.filterRefs()}},{key:"filterRefs",value:function(){this.filter=!this.filter,this.substanceReferences=this.filter?this.substanceReferences.filter(function(i){return"SYSTEM"!==i.docType&&"VALIDATION_MESSAGE"!==i.docType}):JSON.parse(JSON.stringify(this.unfiltered))}},{key:"getVocabularies",value:function(){var i=this;this.cvService.getDomainVocabulary("DOCUMENT_TYPE").subscribe(function(c){i.documentTypes=c.DOCUMENT_TYPE.dictionary})}},{key:"toggleReference",value:function(i,c){var s=this.domainReferenceUuids.indexOf(c.uuid);i.checked&&-1===s?this.domainReferenceUuids.push(c.uuid):!i.checked&&s>-1&&this.domainReferenceUuids.splice(s,1)}},{key:"save",value:function(){this.dialogRef.close(this.domainReferenceUuids)}},{key:"cancel",value:function(){this.dialogRef.close()}}]),a}();return n.\u0275fac=function(t){return new(t||n)(e.Y36(o.so),e.Y36(o.WI),e.Y36(Z.I))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-reuse-references-dialog"]],decls:30,vars:4,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[1,"form-row"],["matTooltip","Apply",3,"checked","change"],["mat-table","",3,"dataSource"],["matColumnDef","apply"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","type"],["matColumnDef","citation"],["matColumnDef","publicDomain"],["matColumnDef","access"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["matDialogActions",""],[1,"middle-fill"],["mat-button","",3,"click"],["mat-header-cell",""],["mat-cell",""],[4,"ngIf"],["target","_blank",3,"href",4,"ngIf"],["target","_blank",3,"href"],[4,"ngFor","ngForOf"],["mat-header-row",""],["mat-row",""]],template:function(t,i){1&t&&(e.TgZ(0,"h1",0),e._uU(1,"Reuse Substance References"),e.qZA(),e.TgZ(2,"div",1),e.TgZ(3,"div",2),e.TgZ(4,"mat-checkbox",3),e.NdJ("change",function(){return i.filterRefs()}),e._uU(5,"Filter Out System / Validation references "),e.qZA(),e.qZA(),e.TgZ(6,"table",4),e.ynx(7,5),e.YNc(8,Y,2,0,"th",6),e.YNc(9,p,2,1,"td",7),e.BQk(),e.ynx(10,8),e.YNc(11,d,2,0,"th",6),e.YNc(12,m,2,1,"td",7),e.BQk(),e.ynx(13,9),e.YNc(14,l,2,0,"th",6),e.YNc(15,C,3,2,"td",7),e.BQk(),e.ynx(16,10),e.YNc(17,k,2,0,"th",6),e.YNc(18,I,2,1,"td",7),e.BQk(),e.ynx(19,11),e.YNc(20,w,2,0,"th",6),e.YNc(21,q,3,2,"td",7),e.BQk(),e.YNc(22,F,1,0,"tr",12),e.YNc(23,S,1,0,"tr",13),e.qZA(),e.qZA(),e.TgZ(24,"div",14),e._UZ(25,"span",15),e.TgZ(26,"button",16),e.NdJ("click",function(){return i.cancel()}),e._uU(27,"Cancel"),e.qZA(),e.TgZ(28,"button",16),e.NdJ("click",function(){return i.save()}),e._uU(29," Save "),e.qZA(),e.qZA()),2&t&&(e.xp6(4),e.Q6J("checked",i.filter),e.xp6(2),e.Q6J("dataSource",i.substanceReferences),e.xp6(16),e.Q6J("matHeaderRowDef",i.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",i.displayedColumns))},directives:[o.uh,o.xY,O.oG,U.gM,f.BZ,f.w1,f.fO,f.ge,f.Dz,f.ev,R.O5,R.sg,f.as,f.XQ,f.nj,f.Gk,o.H8,T.lW],styles:["tr.mat-row[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]{border-bottom-width:0}"]}),n}(),$=r(52149),H=r(24936),j=r(66088),A=r(16531),W=r(70178),V=r(65590),L=r(98827);function z(n,a){if(1&n){var t=e.EpF();e.TgZ(0,"button",11),e.NdJ("click",function(c){return e.CHM(t),e.oxw().reuseExistingReference(),c.stopPropagation()}),e._uU(1," Reuse "),e._UZ(2,"mat-icon",12),e.qZA()}}function K(n,a){1&n&&(e.TgZ(0,"th",27),e._uU(1," Type "),e.qZA())}function G(n,a){if(1&n&&(e.TgZ(0,"td",28),e._uU(1),e.qZA()),2&n){var t=a.$implicit,i=e.oxw(2);e.xp6(1),e.hij(" ",i.documentTypesDictionary[t.docType]&&i.documentTypesDictionary[t.docType].value," ")}}function X(n,a){1&n&&(e.TgZ(0,"th",27),e._uU(1," Citation "),e.qZA())}function ee(n,a){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){var t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.citation)}}function ne(n,a){if(1&n&&(e.TgZ(0,"a",31),e._uU(1),e.qZA()),2&n){var t=e.oxw().$implicit;e.Q6J("href",t.url,e.LSH),e.xp6(1),e.Oqu(t.citation)}}function te(n,a){if(1&n&&(e.TgZ(0,"td",28),e.YNc(1,ee,2,1,"span",29),e.YNc(2,ne,2,2,"a",30),e.qZA()),2&n){var t=a.$implicit;e.xp6(1),e.Q6J("ngIf",!t.url),e.xp6(1),e.Q6J("ngIf",t.url)}}function ie(n,a){1&n&&(e.TgZ(0,"th",27),e._uU(1," Public Domain "),e.qZA())}function ae(n,a){if(1&n&&(e.TgZ(0,"td",28),e._uU(1),e.qZA()),2&n){var t=a.$implicit;e.xp6(1),e.hij(" ",t.publicDomain?"Yes":"No"," ")}}function oe(n,a){1&n&&(e.TgZ(0,"th",27),e._uU(1," Access "),e.qZA())}function ce(n,a){1&n&&(e.TgZ(0,"span"),e._uU(1," Public "),e.qZA())}function se(n,a){1&n&&(e.TgZ(0,"span"),e._uU(1,", "),e.qZA())}function re(n,a){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.YNc(2,se,2,0,"span",29),e.qZA()),2&n){var t=a.$implicit,i=a.last;e.xp6(1),e.hij(" ",t," "),e.xp6(1),e.Q6J("ngIf",!i)}}function le(n,a){if(1&n&&(e.TgZ(0,"span"),e.YNc(1,re,3,2,"span",32),e.qZA()),2&n){var t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",t.access)}}function fe(n,a){if(1&n&&(e.TgZ(0,"td",28),e.YNc(1,ce,2,0,"span",29),e.YNc(2,le,2,1,"span",29),e.qZA()),2&n){var t=a.$implicit;e.xp6(1),e.Q6J("ngIf",!t.access||0===t.access.length),e.xp6(1),e.Q6J("ngIf",t.access&&t.access.length>0)}}function ue(n,a){1&n&&(e.TgZ(0,"th",27),e._uU(1," Edit "),e.qZA())}function me(n,a){if(1&n){var t=e.EpF();e.TgZ(0,"td",28),e.TgZ(1,"button",33),e.NdJ("click",function(){var s=e.CHM(t).$implicit;return e.oxw(2).openExistingReferenceForm(s)}),e._UZ(2,"mat-icon",34),e.qZA(),e.qZA()}}function _e(n,a){1&n&&(e.TgZ(0,"th",27),e._uU(1," Deselect "),e.qZA())}function pe(n,a){if(1&n){var t=e.EpF();e.TgZ(0,"td",28),e.TgZ(1,"button",35),e.NdJ("click",function(){var s=e.CHM(t).$implicit;return e.oxw(2).removeDomainReference(s.uuid)}),e._UZ(2,"mat-icon",36),e.qZA(),e.qZA()}}function de(n,a){1&n&&e._UZ(0,"th",27)}function ge(n,a){if(1&n){var t=e.EpF();e.TgZ(0,"div"),e.TgZ(1,"a",37),e.NdJ("click",function(){e.CHM(t);var c=e.oxw().$implicit;return e.oxw(2).downloadDocument(c.uploadedFile)}),e._UZ(2,"mat-icon",38),e.qZA(),e.qZA()}}function he(n,a){if(1&n&&(e.TgZ(0,"td",28),e.YNc(1,ge,3,0,"div",29),e.qZA()),2&n){var t=a.$implicit;e.xp6(1),e.Q6J("ngIf",t.uploadedFile)}}function ve(n,a){1&n&&(e.TgZ(0,"th",27),e._uU(1," Tags "),e.qZA())}function Re(n,a){if(1&n&&(e.TgZ(0,"span",41),e._uU(1),e.qZA()),2&n){var t=a.$implicit;e.xp6(1),e.hij(" ",t," ")}}function Te(n,a){if(1&n){var t=e.EpF();e.TgZ(0,"a",42),e.NdJ("click",function(){e.CHM(t);var c=e.oxw(4);return c.showmore=!c.showmore}),e._uU(1,"hide"),e.qZA()}}function Ce(n,a){if(1&n&&(e.TgZ(0,"span"),e.YNc(1,Re,2,1,"span",39),e.YNc(2,Te,2,0,"a",40),e.qZA()),2&n){var t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",t.tags),e.xp6(1),e.Q6J("ngIf",t.tags.length>1)}}function be(n,a){if(1&n){var t=e.EpF();e.TgZ(0,"a",42),e.NdJ("click",function(){e.CHM(t);var c=e.oxw(4);return c.showmore=!c.showmore}),e._uU(1,"more..."),e.qZA()}}function xe(n,a){if(1&n&&(e.TgZ(0,"span"),e.TgZ(1,"span",41),e._uU(2),e.qZA(),e.YNc(3,be,2,0,"a",40),e.qZA()),2&n){var t=e.oxw().$implicit;e.xp6(2),e.hij(" ",t.tags.length>0?t.tags[0]:null,""),e.xp6(1),e.Q6J("ngIf",t.tags.length>1)}}function De(n,a){if(1&n&&(e.TgZ(0,"td",28),e.YNc(1,Ce,3,2,"span",29),e.YNc(2,xe,4,2,"span",29),e.qZA()),2&n){var t=a.$implicit,i=e.oxw(2);e.xp6(1),e.Q6J("ngIf",i.showmore&&t.tags&&t.tags.length>0),e.xp6(1),e.Q6J("ngIf",!i.showmore&&t.tags&&t.tags.length>0)}}function Ze(n,a){1&n&&e._UZ(0,"th",27)}function ye(n,a){if(1&n&&(e.TgZ(0,"td",28),e._UZ(1,"app-apply-reference",43),e.qZA()),2&n){var t=a.$implicit;e.xp6(1),e.Q6J("subReferenceUuid",t.uuid)}}function Ue(n,a){1&n&&e._UZ(0,"tr",44)}function Ae(n,a){1&n&&e._UZ(0,"tr",45)}function Ne(n,a){if(1&n&&(e.TgZ(0,"table",13),e.ynx(1,14),e.YNc(2,K,2,0,"th",15),e.YNc(3,G,2,1,"td",16),e.BQk(),e.ynx(4,17),e.YNc(5,X,2,0,"th",15),e.YNc(6,te,3,2,"td",16),e.BQk(),e.ynx(7,18),e.YNc(8,ie,2,0,"th",15),e.YNc(9,ae,2,1,"td",16),e.BQk(),e.ynx(10,19),e.YNc(11,oe,2,0,"th",15),e.YNc(12,fe,3,2,"td",16),e.BQk(),e.ynx(13,20),e.YNc(14,ue,2,0,"th",15),e.YNc(15,me,3,0,"td",16),e.BQk(),e.ynx(16,21),e.YNc(17,_e,2,0,"th",15),e.YNc(18,pe,3,0,"td",16),e.BQk(),e.ynx(19,22),e.YNc(20,de,1,0,"th",15),e.YNc(21,he,2,1,"td",16),e.BQk(),e.ynx(22,23),e.YNc(23,ve,2,0,"th",15),e.YNc(24,De,3,2,"td",16),e.BQk(),e.ynx(25,24),e.YNc(26,Ze,1,0,"th",15),e.YNc(27,ye,2,1,"td",16),e.BQk(),e.YNc(28,Ue,1,0,"tr",25),e.YNc(29,Ae,1,0,"tr",26),e.qZA()),2&n){var t=e.oxw();e.Q6J("dataSource",t.tableData),e.xp6(28),e.Q6J("matHeaderRowDef",t.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns)}}var Oe=function(){var n=function(){function a(t,i,c,s,u,_,b){(0,x.Z)(this,a),this.cvService=t,this.substanceFormReferencesService=i,this.dialog=c,this.element=s,this.utilsService=u,this.overlayContainerService=_,this.substanceFormService=b,this.canReuse=!1,this.references=[],this.documentTypesDictionary={},this.displayedColumns=["type","citation","publicDomain","access","goToReference","remove","attachment","tags","apply"],this.isExpanded=!1,this.showmore=!1,this.subscriptions=[]}return(0,D.Z)(a,[{key:"ngOnInit",value:function(){var i=this;this.getVocabularies();var c=this.substanceFormReferencesService.substanceReferences.subscribe(function(s){i.substanceReferences=s&&s.length?s.filter(function(u){return!u.$$deletedCode}):[],i.canReuse=i.substanceReferences&&i.substanceReferences.length>0,i.loadReferences()});this.subscriptions.push(c),this.overlayContainer=this.overlayContainerService.getContainerElement()}},{key:"ngOnDestroy",value:function(){this.subscriptions.forEach(function(i){i.unsubscribe()})}},{key:"referencesUuids",get:function(){return this.domainReferenceUuids},set:function(i){this.domainReferenceUuids=i||[],this.loadReferences()}},{key:"getVocabularies",value:function(){var i=this,c=this.cvService.getDomainVocabulary("DOCUMENT_TYPE").subscribe(function(s){i.documentTypesDictionary=s.DOCUMENT_TYPE.dictionary});this.subscriptions.push(c)}},{key:"loadReferences",value:function(){var i=this;this.domainReferenceUuids&&this.substanceReferences?(this.references=[],this.domainReferenceUuids.forEach(function(c){var s=i.substanceReferences.find(function(u){return u.uuid===c});null!=s&&i.references.push(s)}),this.tableData=new f.by(this.references)):this.references=[]}},{key:"addNewReference",value:function(){var i=this,s=this.dialog.open(y.n,{data:{tags:[],access:[]},width:"900px"});this.overlayContainer.style.zIndex="1002";var u=s.afterClosed().subscribe(function(_){i.overlayContainer.style.zIndex=null,null!=_&&(_=i.substanceFormReferencesService.addSubstanceReference(_),setTimeout(function(){i.addDomainReference(_.uuid)}),i.canReuse=!0)});this.subscriptions.push(u)}},{key:"openExistingReferenceForm",value:function(i){var c=this,s=this.dialog.open(y.n,{data:i,width:"900px"});this.overlayContainer.style.zIndex="1002";var u=s.afterClosed().subscribe(function(_){c.overlayContainer.style.zIndex=null});this.subscriptions.push(u)}},{key:"addDomainReference",value:function(i){-1===this.domainReferenceUuids.indexOf(i)&&this.domainReferenceUuids.push(i);var c=this.references.find(function(s){return s.uuid===i});null==c&&null!=(c=this.substanceReferences.find(function(s){return s.uuid===i}))&&(this.references.unshift(c),this.tableData.data=this.references)}},{key:"reuseExistingReference",value:function(){var i=this,s=this.dialog.open(B,{data:{domainRefereceUuids:this.domainReferenceUuids,substanceReferences:this.substanceReferences},width:"900px"});this.overlayContainer.style.zIndex="1002";var u=s.afterClosed().subscribe(function(_){i.overlayContainer.style.zIndex=null,null!=_&&i.updateDomainReferences(_)});this.subscriptions.push(u)}},{key:"updateDomainReferences",value:function(){var i=this,c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.domainReferenceUuids.length=0,c.forEach(function(u){i.domainReferenceUuids.push(u)});var s=[];this.domainReferenceUuids.forEach(function(u){var _=i.substanceReferences.find(function(b){return b.uuid===u});null!=_&&s.push(_)}),this.references=s,this.tableData.data=this.references}},{key:"removeDomainReference",value:function(i){var c=this.domainReferenceUuids.indexOf(i);c>-1&&this.domainReferenceUuids.splice(c,1);var s=this.references.findIndex(function(u){return u.uuid===i});s>-1&&this.references.splice(s,1),this.tableData.data=this.references}},{key:"panelOpened",value:function(){this.isExpanded=!0;var i=new Event("focusin",{bubbles:!0,cancelable:!0});this.element.nativeElement.dispatchEvent(i)}},{key:"panelClosed",value:function(){this.isExpanded=!1;var i=new Event("focusout",{bubbles:!0,cancelable:!0});this.element.nativeElement.dispatchEvent(i)}},{key:"downloadDocument",value:function(i){this.substanceFormService.bypassUpdateCheck(),window.open(i)}}]),a}();return n.\u0275fac=function(t){return new(t||n)(e.Y36(Z.I),e.Y36(H.v),e.Y36(o.uw),e.Y36(e.SBq),e.Y36($.F),e.Y36(j.Xj),e.Y36(v.B))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-domain-references"]],inputs:{card:"card",referencesUuids:"referencesUuids"},decls:16,vars:4,consts:[[1,"domain-references-content"],[3,"closed","opened"],[1,"domain-reference-header"],["matTooltip","Expand references",1,"title","ref-title"],["matBadgeOverlap","false",1,"custom-badge",3,"matBadge"],[1,"middle-fill"],[1,"title-actions"],["mat-flat-button","","color","primary","matTooltip","Create new reference",3,"click"],["svgIcon","add_circle_outline"],["mat-flat-button","","color","primary","matTooltip","Reuse existing reference",3,"click",4,"ngIf"],["mat-table","",3,"dataSource",4,"ngIf"],["mat-flat-button","","color","primary","matTooltip","Reuse existing reference",3,"click"],["svgIcon","move_to_inbox"],["mat-table","",3,"dataSource"],["matColumnDef","type"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","citation"],["matColumnDef","publicDomain"],["matColumnDef","access"],["matColumnDef","goToReference"],["matColumnDef","remove"],["matColumnDef","attachment"],["matColumnDef","tags"],["matColumnDef","apply"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],[4,"ngIf"],["target","_blank",3,"href",4,"ngIf"],["target","_blank",3,"href"],[4,"ngFor","ngForOf"],["mat-icon-button","","matTooltip","Open reference form",3,"click"],["svgIcon","edit"],["mat-icon-button","","matTooltip","Remove reference",3,"click"],["svgIcon","clear"],["mat-icon-button","","matTooltip","Download document",3,"click"],["svgIcon","cloud_download"],["class","badge",4,"ngFor","ngForOf"],["class","morelink",3,"click",4,"ngIf"],[1,"badge"],[1,"morelink",3,"click"],[3,"subReferenceUuid"],["mat-header-row",""],["mat-row",""]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"mat-accordion"),e.TgZ(2,"mat-expansion-panel",1),e.NdJ("closed",function(){return i.panelClosed()})("opened",function(){return i.panelOpened()}),e.TgZ(3,"mat-expansion-panel-header",2),e.TgZ(4,"mat-panel-title"),e.TgZ(5,"h4",3),e._uU(6),e._UZ(7,"span",4),e.qZA(),e._UZ(8,"div",5),e.TgZ(9,"div",6),e.TgZ(10,"button",7),e.NdJ("click",function(s){return i.addNewReference(),s.stopPropagation()}),e._uU(11," Create new "),e._UZ(12,"mat-icon",8),e.qZA(),e.YNc(13,z,3,0,"button",9),e.qZA(),e.qZA(),e.qZA(),e.TgZ(14,"div"),e.YNc(15,Ne,30,3,"table",10),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(6),e.hij(" ",i.card&&"definition"===i.card?"Definitional ":"","References "),e.xp6(1),e.Q6J("matBadge",i.referencesUuids&&i.referencesUuids.length||0),e.xp6(6),e.Q6J("ngIf",i.canReuse),e.xp6(2),e.Q6J("ngIf",i.referencesUuids))},directives:[A.pp,A.ib,A.yz,A.yK,U.gM,W.k,T.lW,V.Hw,R.O5,f.BZ,f.w1,f.fO,f.ge,f.Dz,f.ev,R.sg,T.zs,L.U,f.as,f.XQ,f.nj,f.Gk],styles:[".domain-reference[_ngcontent-%COMP%]{display:block;padding:5px 0 10px;color:#448aff}.mat-expansion-panel[_ngcontent-%COMP%]:not([class*=mat-elevation-z]), .mat-expansion-panel[_ngcontent-%COMP%]{box-shadow:none}.domain-reference-header[_ngcontent-%COMP%]     .mat-expansion-indicator:after{margin-right:7px}.mat-expansion-panel-header[_ngcontent-%COMP%]{padding:0}.domain-references-content[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{margin-bottom:5px;padding:0 7px}.domain-references-content[_ngcontent-%COMP%]     .mat-expansion-panel-body{padding:0}.mat-expansion-panel-header-title.block-display[_ngcontent-%COMP%]{display:block}.custom-badge[_ngcontent-%COMP%] > .mat-badge-content[_ngcontent-%COMP%]{background-color:#fff!important;color:#4793d1!important}.title-actions[_ngcontent-%COMP%]{display:-ms-inline-flexbox;display:inline-flex;-ms-flex-align:end;align-items:flex-end;padding-bottom:5px}.title-actions[_ngcontent-%COMP%]   .mat-flat-button[_ngcontent-%COMP%]{min-width:0;padding:0 10px;line-height:30px}.title-actions[_ngcontent-%COMP%]   .mat-flat-button[_ngcontent-%COMP%]:not(:last-child){margin-right:10px}.ref-title[_ngcontent-%COMP%]{min-width:200px}"]}),n}()},91770:function(E,N,r){r.d(N,{n:function(){return Y}});var x=r(78069),D=r(48047),v=r(95758),Z=r(12570),y=r(44250),o=r(76442),e=r(36362),O=r(53349),U=r(95465),f=r(87317);function R(p,d){if(1&p){var m=o.EpF();o.TgZ(0,"app-previous-references",4),o.NdJ("selectedReference",function(g){return o.CHM(m),o.oxw().fillReference(g)}),o.qZA()}}function T(p,d){if(1&p){var m=o.EpF();o.TgZ(0,"div"),o._UZ(1,"app-reference-form",5,6),o.TgZ(3,"div",7),o._UZ(4,"span",8),o.TgZ(5,"button",9),o.NdJ("click",function(){return o.CHM(m),o.oxw().cancel()}),o._uU(6,"Cancel"),o.qZA(),o.TgZ(7,"button",10),o.NdJ("click",function(){return o.CHM(m),o.oxw().save()}),o._uU(8," Save "),o.qZA(),o.qZA(),o.qZA()}if(2&p){var l=o.MAs(2),g=o.oxw();o.xp6(1),o.Q6J("reference",g.reference),o.xp6(6),o.Q6J("disabled",!l||!l.isValid)}}var Y=function(){var p=function(){function d(m,l,g){var h=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};(0,x.Z)(this,d),this.dialogRef=m,this.substanceService=l,this.authService=g,this.reference=h,this.showPrev=!1}return(0,D.Z)(d,[{key:"ngOnInit",value:function(){var l=this;this.dialogRef.beforeClosed().subscribe(function(){return l.dialogRef.close(l.reference.docType&&""!==l.reference.docType&&l.reference.citation&&""!==l.reference.citation?l.reference:null)})}},{key:"save",value:function(){this.dialogRef.close(this.reference)}},{key:"cancel",value:function(){this.dialogRef.close()}},{key:"fillReference",value:function(l){delete l.uuid,delete l.lastEdited,delete l.lastEditedBy,delete l.created,delete l.createdBy,delete l._self,l.docType&&""!==l.docType&&l.citation&&""!==l.citation&&(this.reference=l),this.showPrev=!1}}]),d}();return p.\u0275fac=function(m){return new(m||p)(o.Y36(v.so),o.Y36(Z.d),o.Y36(y.e),o.Y36(v.WI))},p.\u0275cmp=o.Xpm({type:p,selectors:[["app-refernce-form-dialog"]],decls:5,vars:3,consts:[["mat-dialog-title",""],["mat-dialog-content","","name","reference-dialog-container","id","reference-dialog-container"],[3,"selectedReference",4,"ngIf"],[4,"ngIf"],[3,"selectedReference"],["hideDelete","true","id","reference-dialog-form","name","reference-dialog-form",3,"reference"],["referenceForm",""],[1,"actions"],[1,"middle-fill"],["mat-button","",3,"click"],["mat-button","",3,"disabled","click"]],template:function(m,l){1&m&&(o.TgZ(0,"h1",0),o._uU(1),o.qZA(),o.TgZ(2,"div",1),o.YNc(3,R,1,0,"app-previous-references",2),o.YNc(4,T,9,2,"div",3),o.qZA()),2&m&&(o.xp6(1),o.hij("",l.reference.uuid?"Edit":"Add"," Reference"),o.xp6(2),o.Q6J("ngIf",l.showPrev),o.xp6(1),o.Q6J("ngIf",l.reference))},directives:[v.uh,v.xY,e.O5,O.s,U.b,f.lW],styles:[".actions[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex}.form-row[_ngcontent-%COMP%]{width:100%;display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row}"]}),p}()}}]);
//# sourceMappingURL=8302.2fb7a95454afe2eb.js.map