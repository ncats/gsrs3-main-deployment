(self.webpackChunkgsrs_client=self.webpackChunkgsrs_client||[]).push([[4874],{54874:function(m,O,n){"use strict";n.r(O),n.d(O,{SubstanceFormSubunitsModule:function(){return ht}});var a=n(1884),c=n(39117),l=n(36362),h=n(75143),g=n(46751),C=n(56101),x=n(33567),T=n(40104),q=(n(27299),n(79550)),A=n(18291),u=n(39401),f=n(39233),t=n(86613),b=n(78444),_=n(95758),N=n(54244),M=n(87317),I=n(65590),U=n(31959),F=n(51279),w=n(15541),E=n(21109);function Y(r,p){if(1&r){var i=t.EpF();t.TgZ(0,"button",12),t.NdJ("click",function(){t.CHM(i);var o=t.oxw(2).$implicit;return t.oxw(2).select(o.subunitIndex)}),t._uU(1),t.qZA()}if(2&r){var e=t.oxw(2).$implicit;t.xp6(1),t.hij(" Copy From Subunit ",e.subunitIndex," ")}}function j(r,p){if(1&r&&(t.TgZ(0,"div",10),t.YNc(1,Y,2,1,"button",11),t.qZA()),2&r){var i=t.oxw().$implicit,e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",i.subunitIndex!==e.unit)}}function B(r,p){if(1&r&&(t.TgZ(0,"div",10),t._uU(1),t.qZA()),2&r){var i=t.oxw().$implicit;t.xp6(1),t.hij(" Subunit ",i.subunitIndex," is not applicable ")}}function L(r,p){if(1&r&&(t.TgZ(0,"div",8),t.YNc(1,j,2,1,"div",9),t.YNc(2,B,2,1,"div",9),t.qZA()),2&r){var i=p.$implicit,e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",i.sequence==e.sequence),t.xp6(1),t.Q6J("ngIf",i.sequence!==e.sequence)}}function z(r,p){if(1&r&&(t.TgZ(0,"span"),t.YNc(1,L,3,2,"div",7),t.qZA()),2&r){var i=t.oxw();t.xp6(1),t.Q6J("ngForOf",i.units)}}function G(r,p){if(1&r){var i=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"div",13),t._uU(2),t.qZA(),t.TgZ(3,"div",13),t.TgZ(4,"button",12),t.NdJ("click",function(){return t.CHM(i),t.oxw().confirm()}),t._uU(5,"Confirm"),t.qZA(),t._UZ(6,"span",6),t.TgZ(7,"button",12),t.NdJ("click",function(){return t.CHM(i),t.oxw().cancel()}),t._uU(8,"Cancel"),t.qZA(),t.qZA(),t.qZA()}if(2&r){var e=t.oxw();t.xp6(2),t.lnq(" Are you sure you want to copy the disulfide links from subunit ",e.selected," to subunit ",e.unit,"? Any disulfide links on subunit ",e.unit," will be erased and overwritten. ")}}function V(r,p){if(1&r&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&r){var i=t.oxw();t.xp6(1),t.hij(" ",i.message,"\n")}}var X=function(){var r=function(){function p(i,e){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,c.Z)(this,p),this.dialogRef=i,this.subService=e,this.data=s,this.showButtons=!0,i.disableClose=!0}return(0,a.Z)(p,[{key:"ngOnInit",value:function(){var e=this;this.unit=this.data.unit,this.sequence=this.data.full.sequence,this.subService.substanceSubunits.subscribe(function(s){e.units=s})}},{key:"select",value:function(e){this.selected=e,this.showButtons=!1}},{key:"confirm",value:function(){var e=this;this.subService.copyDisulfideLinks(this.unit,this.selected),this.selected=null,this.message="Copying...",setTimeout(function(){e.message="Links successfully copied over."},500)}},{key:"cancel",value:function(){this.selected=null,this.showButtons=!0}}]),p}();return r.\u0275fac=function(i){return new(i||r)(t.Y36(_.so),t.Y36(x.B),t.Y36(_.WI))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-copy-disulfide-dialog"]],decls:12,vars:3,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[1,"form-row","desc"],[4,"ngIf"],["mat-dialog-actions",""],["mat-flat-button","","color","primary","matDialogClose",""],[1,"middle-fill"],["class","form-column",4,"ngFor","ngForOf"],[1,"form-column"],["class","option",4,"ngIf"],[1,"option"],["mat-button","",3,"click",4,"ngIf"],["mat-button","",3,"click"],[1,"form-row"]],template:function(i,e){1&i&&(t.TgZ(0,"div",0),t._uU(1," Copy Disulfide Links "),t.qZA(),t.TgZ(2,"div",1),t.TgZ(3,"div",2),t._uU(4," Copy intra-connected disulfide links from one subunit to another with an identical sequence. "),t.qZA(),t.YNc(5,z,2,1,"span",3),t.qZA(),t.YNc(6,G,9,3,"div",3),t.YNc(7,V,2,1,"div",3),t.TgZ(8,"div",4),t.TgZ(9,"button",5),t._uU(10,"Close"),t.qZA(),t._UZ(11,"span",6),t.qZA()),2&i&&(t.xp6(5),t.Q6J("ngIf",e.showButtons),t.xp6(1),t.Q6J("ngIf",e.selected),t.xp6(1),t.Q6J("ngIf",e.message))},directives:[_.uh,_.xY,l.O5,l.sg,M.lW,_.H8,_.ZT],styles:[".form-row[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex;width:100%;-ms-flex-direction:row;flex-direction:row;margin-bottom:15px}.option[_ngcontent-%COMP%]{padding:10px}.desc[_ngcontent-%COMP%]{margin-bottom:30px}"]}),r}(),W=n(98002),R=n(40089),$=n(90587),K=n(14900);function tt(r,p){1&r&&(t.TgZ(0,"div",24),t._uU(1," Deleted\xa0 "),t.qZA())}function et(r,p){if(1&r){var i=t.EpF();t.TgZ(0,"button",25),t.NdJ("click",function(){return t.CHM(i),t.oxw().convertSequence()}),t._uU(1," convert"),t.qZA()}}function nt(r,p){if(1&r){var i=t.EpF();t.TgZ(0,"button",26),t.NdJ("click",function(){return t.CHM(i),t.oxw().copyDisulfides()}),t._uU(1," copy disulfide links"),t.qZA()}}function it(r,p){if(1&r&&(t.TgZ(0,"span",36),t.TgZ(1,"span",37),t._uU(2),t.qZA(),t.qZA()),2&r){var i=p.$implicit,e=t.oxw(4);t.xp6(1),t.s9C("matTooltip",e.getTooltipMessage(e.subunitSequence.subunitIndex,i.unitIndex,i.unitValue,i.class||"").join("\n")),t.Q6J("ngClass",i.class),t.xp6(1),t.Oqu(i.unitValue)}}function ot(r,p){if(1&r&&(t.TgZ(0,"div",32),t.TgZ(1,"div",33),t._uU(2),t.qZA(),t.TgZ(3,"div",34),t.YNc(4,it,3,3,"span",35),t.qZA(),t.qZA()),2&r){var i=p.$implicit,e=p.last,s=t.oxw().last,o=t.oxw(2);t.Q6J("ngClass",s&&e?"last-section":""),t.xp6(2),t.Oqu(i[1]),t.xp6(2),t.Q6J("ngForOf",o.subunitSequence.subunits.slice(i[0],i[1]))}}function st(r,p){if(1&r&&(t.TgZ(0,"div",30),t.YNc(1,ot,5,3,"div",31),t.qZA()),2&r){var i=p.$implicit;t.xp6(1),t.Q6J("ngForOf",i)}}function rt(r,p){if(1&r&&(t.TgZ(0,"div",27),t.TgZ(1,"div",28),t.YNc(2,st,2,1,"div",29),t.qZA(),t.qZA()),2&r){var i=t.oxw();t.xp6(2),t.Q6J("ngForOf",i.subunitSequence.subsections)}}function ut(r,p){if(1&r){var i=t.EpF();t.TgZ(0,"div"),t._uU(1),t.TgZ(2,"button",38),t.NdJ("click",function(){return t.CHM(i),t.oxw().generateSites("DNA")}),t._uU(3,"DNA"),t.qZA(),t.TgZ(4,"button",38),t.NdJ("click",function(){return t.CHM(i),t.oxw().generateSites("RNA")}),t._uU(5,"RNA"),t.qZA(),t._uU(6," sequence "),t.qZA()}if(2&r){var e=t.oxw();t.xp6(1),t.hij(" Generate",e.sequenceType?"d":""," links and sugars for this subunit as a "),t.xp6(1),t.Q6J("ngClass","DNA"===e.sequenceType?"generated":""),t.xp6(2),t.Q6J("ngClass","RNA"===e.sequenceType?"generated":"")}}var at=function(){var r=function(){function p(i,e,s,o,d,v,y,P){(0,c.Z)(this,p),this.substanceFormService=i,this.substanceFormLinksService=e,this.scrollToService=s,this.gaService=o,this.cvService=d,this.dialog=v,this.overlayContainerService=y,this.router=P,this.subunitDeleted=new t.vpe,this.vocabulary={},this.subscriptions=[],this.toggle={},this.allSites=[],this.features=[],this.sequenceSites=[],this.sequenceType="",this.validArray=[]}return(0,a.Z)(p,[{key:"ngOnInit",value:function(){var e=this;this.allSites=[],this.overlayContainer=this.overlayContainerService.getContainerElement(),""===this.subunit.sequence&&(this.toggle[this.subunit.subunitIndex]=!0),this.substanceFormService.definition.subscribe(function(o){e.substanceType=o.substanceClass,e.searchType="protein"===e.substanceType?"Protein":"Nucleicacid",e.getVocabularies()}).unsubscribe()}},{key:"ngAfterViewInit",value:function(){var e=this;setTimeout(function(){var o=e.substanceFormService.subunitDisplaySequences.subscribe(function(d){var v=d.filter(function(y){return y.subunitIndex===e.subunit.subunitIndex})[0];(!e.subunitSequence||!w(e.subunitSequence,v))&&(e.subunitSequence&&JSON.stringify(e.subunitSequence)!==JSON.stringify(v)?(e.subunitSequence=v,setTimeout(function(){e.allSites&&e.addStyle()})):e.subunitSequence=v)});e.subscriptions.push(o)});var s=this.substanceFormService.allSites.subscribe(function(o){var d=[];o.forEach(function(v){v.subunit===e.subunit.subunitIndex&&d.push(v)}),e.allSites&&e.allSites!==d?(e.allSites=d,setTimeout(function(){e.subunitSequence&&e.addStyle()})):e.allSites||(e.allSites=d)});this.subscriptions.push(s),setTimeout(function(){})}},{key:"ngOnChanges",value:function(e){}},{key:"ngOnDestroy",value:function(){this.subscriptions.forEach(function(e){e.unsubscribe()})}},{key:"getVocabularies",value:function(){var e=this,s={value:"X",display:"Non-standard Residue"};"protein"===this.substanceType?this.cvService.getDomainVocabulary("AMINO_ACID_RESIDUE").subscribe(function(o){for(var d in e.vocabulary=o.AMINO_ACID_RESIDUE.dictionary,e.vocabulary.X=s,e.vocabulary)e.validArray.push(e.vocabulary[d].value)},function(o){}):this.cvService.getDomainVocabulary("NUCLEIC_ACID_BASE").subscribe(function(o){for(var d in e.vocabulary=o.NUCLEIC_ACID_BASE.dictionary,e.vocabulary.X=s,e.vocabulary)e.validArray.push(e.vocabulary[d].value)},function(o){})}},{key:"addStyle",value:function(){var e=this;this.subunitSequence&&this.subunitSequence.subunits&&this.allSites.forEach(function(s){e.subunitSequence.subunits&&(e.subunitSequence.subunits[s.residue-1].class=e.subunitSequence.subunits[s.residue-1].class&&e.subunitSequence.subunits[s.residue-1].class!==s.type?e.subunitSequence.subunits[s.residue-1].class+" "+s.type:s.type)})}},{key:"getTooltipMessage",value:function(e,s,o,d){var v=void 0===this.vocabulary[o.toUpperCase()]?"UNDEFINED":this.vocabulary[o.toUpperCase()].display,y=[],P={modification:"Structural Modification",other:"Other Link","C-Glycosylation":"C-Glycosylation","N-Glycosylation":"N-Glycosylation","O-Glycosylation":"O-Glycosylation",feature:this.substanceType.toUpperCase()+" Feature",disulfide:"Disulfide Link"};return y.push("".concat(e," - ").concat(s,": ").concat(o.toUpperCase()," (").concat(v,")")),d.split(" ").forEach(function(S){y.push(P[S]||"")}),y}},{key:"copyDisulfides",value:function(){var e=this,s=this.dialog.open(X,{data:{unit:this.subunit.subunitIndex,full:this.subunit},width:"600px"});this.overlayContainer.style.zIndex="1002",s.afterClosed().subscribe(function(d){e.overlayContainer.style.zIndex=null})}},{key:"search",value:function(){var e=this.makeRandom();sessionStorage.setItem("gsrs_edit_sequence_"+e,JSON.stringify(this.subunit.sequence));var o=window.location.href.replace(this.router.url,"")+this.router.serializeUrl(this.router.createUrlTree(["/sequence-search"],{queryParams:{seq_type:this.searchType,source:"edit",source_id:e}}));window.open(o,"_blank")}},{key:"makeRandom",value:function(){for(var e="",s="ABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890",o=0;o<6;o++)e+=s.charAt(Math.floor(Math.random()*s.length));return e}},{key:"editSubunit",value:function(e,s){this.toggle[e.subunitIndex]=!this.toggle[e.subunitIndex],!1===this.toggle[e.subunitIndex]?(this.subunit.sequence=s.trim().replace(/\s/g,""),this.substanceFormService.emitSubunitUpdate(),this.substanceFormService.recalculateCysteine()):(this.editSequence=this.preformatSeq(this.subunit.sequence),setTimeout(function(){var o=document.getElementsByClassName("sequence-textarea");[].forEach.call(o,function(d){d.style.height=d.scrollHeight+10+"px"})}))}},{key:"change",value:function(e){!1===this.toggle[this.subunit.subunitIndex]&&(e.target.value=this.subunit.sequence)}},{key:"deleteSubunit",value:function(){this.subunitDeleted.emit(this.subunit)}},{key:"preformatSeq",value:function(e){var s="";if(e)for(var o=0;o<e.length;o+=10)o%50==0&&(s+="\n"),s+=e.substr(o,10)+"     ";return s.trim()}},{key:"cleanSequence",value:function(){var e=this;if(this.toggle[this.subunit.subunitIndex]){var v=this.editSequence.replace(/\s/g,"").split("").filter(function(y){return e.validArray.indexOf(y.toUpperCase())>=0}).toString().replace(/,/g,"").trim();"protein"!==this.substanceType&&(v=v.toUpperCase()),this.editSequence=this.preformatSeq(v)}else{var o=this.subunit.sequence.split("").filter(function(y){return e.validArray.indexOf(y.toUpperCase())>=0}).toString().replace(/,/g,"").trim();"protein"!==this.substanceType&&(o=o.toUpperCase()),o!==this.subunit.sequence&&(this.subunit.sequence=o,this.substanceFormService.emitSubunitUpdate(),this.substanceFormService.recalculateCysteine())}}},{key:"convertSequence",value:function(){var o=[],d={},v="";o="A\tAla;C\tCys;D\tAsp;E\tGlu;F\tPhe;G\tGly;H\tHis;I\tIle;K\tLys;L\tLeu;M\tMet;N\tAsn;P\tPro;Q\tGln;R\tArg;S\tSer;T\tThr;V\tVal;W\tTrp;Y\tTyr".split(";");for(var y=0;y<o.length;y++){var P=[];d[(P=o[y].split("\t"))[0]]=P[1],d[P[1].toUpperCase()]=P[0]}var k=[];k=this.toggle[this.subunit.subunitIndex]?this.editSequence.replace(/[ ]/g,"-").split("-"):this.subunit.sequence.replace(/[ ]/g,"-").split("-");for(var S=0;S<k.length;S++){var J=d[k[S].toUpperCase()];k[S].length>3?v+=k[S]:(void 0===J&&(J="X"),v+=J)}this.toggle[this.subunit.subunitIndex]?this.editSequence=v:(this.subunit.sequence=v,this.substanceFormService.emitSubunitUpdate(),this.substanceFormService.recalculateCysteine())}},{key:"generateSites",value:function(e){var s=this;this.sequenceType=e;var v,o=this.substanceFormService.substanceSugars.subscribe(function(D){s.sugars=D}),d=this.substanceFormLinksService.substanceLinks.subscribe(function(D){s.links=D});v="DNA"===e?"dR":"R",this.sugars.forEach(function(D){D.sites=D.sites.filter(function(Q){return Q.subunitIndex!==s.subunit.subunitIndex})});var y=[];if(null!=this.subunit&&null!=this.subunit.sequence)for(var P=1;P<=this.subunit.sequence.length;P++)y.push({subunitIndex:this.subunit.subunitIndex,residueIndex:P});this.sugars.push({sugar:v,sites:y}),this.links.forEach(function(D){D.sites=D.sites.filter(function(Q){return Q.subunitIndex!==s.subunit.subunitIndex})});var S=[];if(null!=this.subunit&&null!=this.subunit.sequence)for(var J=2;J<=this.subunit.sequence.length;J++)S.push({subunitIndex:this.subunit.subunitIndex,residueIndex:J});this.links.push({linkage:"P",sites:S}),this.substanceFormService.emitSugarUpdate(),this.substanceFormService.emitLinkUpdate(),d.unsubscribe(),o.unsubscribe()}}]),p}();return r.\u0275fac=function(i){return new(i||r)(t.Y36(x.B),t.Y36(E.e),t.Y36(b.i),t.Y36(T.$),t.Y36(A.I),t.Y36(_.uw),t.Y36(N.Xj),t.Y36(W.F0))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-subunit-form"]],inputs:{subunit:"subunit",view:"view",sites:"sites"},outputs:{subunitDeleted:"subunitDeleted"},features:[t.TTD],decls:30,vars:12,consts:[[1,"subunit-container"],["class","notification-backdrop",4,"ngIf"],[1,"form-row"],[1,"delete-container"],["mat-icon-button","","matTooltip","Delete link",3,"click"],["svgIcon","delete_forever"],[1,"subunit-label"],[1,"buttons"],[1,"mat-button","mat-primary","action-button",3,"click"],[1,"mat-button","action-button","mat-primary",3,"click"],[1,"spacer"],["class","mat-button action-button mat-primary convert","matTooltip","convert 3 letter sequence to 1 letter",3,"click",4,"ngIf"],["matTooltip","search for sequence in a new tab",1,"button-link",3,"click"],["class","mat-button action-button mat-primary","matTooltip","copy disulfides from another subunit",3,"click",4,"ngIf"],[1,"subunit-edit",3,"ngClass"],["cdkAutosizeMinRows","3","placeholder","Enter sequence here","name","edit",1,"sequence-textarea",3,"ngModel","ngModelChange","change"],["sequence",""],[3,"ngClass"],[1,"nest"],[1,"subunit"],[1,"raw-sequence"],["class","subunit-sequence",4,"ngIf"],[4,"ngIf"],[3,"source"],[1,"notification-backdrop"],["matTooltip","convert 3 letter sequence to 1 letter",1,"mat-button","action-button","mat-primary","convert",3,"click"],["matTooltip","copy disulfides from another subunit",1,"mat-button","action-button","mat-primary",3,"click"],[1,"subunit-sequence"],[1,"responsive"],["class","sequence-section-group",4,"ngFor","ngForOf"],[1,"sequence-section-group"],["class","sequence-section",3,"ngClass",4,"ngFor","ngForOf"],[1,"sequence-section",3,"ngClass"],[1,"section-number"],[1,"section-units-container"],["class","section-unit",4,"ngFor","ngForOf"],[1,"section-unit"],["matTooltipClass","unit-tooltip",1,"selectedSite","siteref",3,"matTooltip","ngClass"],["mat-button","",3,"ngClass","click"]],template:function(i,e){1&i&&(t.TgZ(0,"div",0),t.YNc(1,tt,2,0,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"div",3),t.TgZ(4,"button",4),t.NdJ("click",function(){return e.deleteSubunit()}),t._UZ(5,"mat-icon",5),t.qZA(),t.qZA(),t.TgZ(6,"div",6),t._uU(7),t.qZA(),t.TgZ(8,"div",7),t.TgZ(9,"button",8),t.NdJ("click",function(){return e.editSubunit(e.subunit,e.editSequence)}),t._uU(10),t.qZA(),t.TgZ(11,"button",9),t.NdJ("click",function(){return e.cleanSequence()}),t._uU(12," clean"),t.qZA(),t._UZ(13,"span",10),t.YNc(14,et,2,0,"button",11),t.TgZ(15,"a",12),t.NdJ("click",function(){return e.search()}),t._uU(16,"sequence search"),t.qZA(),t.YNc(17,nt,2,0,"button",13),t.qZA(),t.qZA(),t.TgZ(18,"div",14),t.TgZ(19,"textarea",15,16),t.NdJ("ngModelChange",function(o){return e.editSequence=o})("change",function(){return e.editSubunit(e.subunit,e.editSequence)}),t.qZA(),t.qZA(),t.TgZ(21,"div",17),t.TgZ(22,"div",18),t.TgZ(23,"div",19),t.TgZ(24,"div",20),t._uU(25),t.qZA(),t.qZA(),t.qZA(),t.YNc(26,rt,3,1,"div",21),t.qZA(),t.TgZ(27,"div",2),t.YNc(28,ut,7,3,"div",22),t.qZA(),t._UZ(29,"app-audit-info",23),t.qZA()),2&i&&(t.xp6(1),t.Q6J("ngIf",e.subunit.$$deletedCode),t.xp6(6),t.hij("Subunit ",e.subunit.subunitIndex,""),t.xp6(3),t.hij(" ",e.toggle[e.subunit.subunitIndex]?"save":"edit",""),t.xp6(4),t.Q6J("ngIf","nucleicAcid"!==e.substanceType),t.xp6(3),t.Q6J("ngIf","protein"===e.substanceType),t.xp6(1),t.Q6J("ngClass",e.toggle[e.subunit.subunitIndex]?"show":"hide"),t.xp6(1),t.Q6J("ngModel",e.editSequence),t.xp6(2),t.Q6J("ngClass",e.toggle[e.subunit.subunitIndex]?"hide":"show"),t.xp6(4),t.Oqu(e.subunit.sequence),t.xp6(1),t.Q6J("ngIf",e.subunitSequence),t.xp6(2),t.Q6J("ngIf","nucleicAcid"===e.substanceType),t.xp6(1),t.Q6J("source",e.subunit))},directives:[l.O5,M.lW,R.gM,I.Hw,l.mk,$.Fj,$.JJ,$.On,l.sg,K.n],styles:[".details[_ngcontent-%COMP%]   .subunit[_ngcontent-%COMP%]{display:none}.details[_ngcontent-%COMP%]   .subunit-sequence[_ngcontent-%COMP%]{display:block}.sequence-textarea[_ngcontent-%COMP%]{font-size:14px;letter-spacing:2px}.show[_ngcontent-%COMP%]{display:block}.hide[_ngcontent-%COMP%]{display:none}.raw[_ngcontent-%COMP%]   .subunit[_ngcontent-%COMP%]{display:block}.raw[_ngcontent-%COMP%]   .subunit-sequence[_ngcontent-%COMP%]{display:none}.subunit-sequence[_ngcontent-%COMP%]{margin-bottom:30px}.sequence-section-group[_ngcontent-%COMP%]{width:100%;display:-ms-flexbox;display:flex;margin-bottom:10px}.section-number[_ngcontent-%COMP%]{text-align:right;padding:0 10px;font-size:.8em}.sequence-section[_ngcontent-%COMP%]{-ms-flex-positive:0;flex-grow:0;padding:0 10px;-ms-flex-preferred-size:20%;flex-basis:20%;-ms-flex-negative:0;flex-shrink:0}.section-units-container[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex}.section-units-container[_ngcontent-%COMP%]   .section-unit[_ngcontent-%COMP%]:hover{cursor:default}.subunit[_ngcontent-%COMP%]{padding-top:5px;padding-bottom:20px}.subunit[_ngcontent-%COMP%]:not(:last-child){border-bottom:solid 1px var(--box-shadow-color-3)}.raw-sequence[_ngcontent-%COMP%]{word-break:break-all;line-height:26px}.filters-container[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex;-ms-flex-pack:end;justify-content:flex-end}.subunit-form-container[_ngcontent-%COMP%]{padding:30px 10px 12px;position:relative}.notification-backdrop[_ngcontent-%COMP%]{position:absolute;inset:0;display:-ms-flexbox;display:flex;z-index:10;background-color:var(--notif-backdrop-bg-color);-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center;font-size:30px;font-weight:700;color:var(--notif-backdrop-color)}.form-row[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex;-ms-flex-align:start;align-items:flex-start;margin-top:20px}.delete-container[_ngcontent-%COMP%]{padding:0 10px 8px 0;width:30px}.subunit-label[_ngcontent-%COMP%]{font-size:18px;font-weight:400;padding-top:0;margin-top:10px;padding-left:30px;width:20%}.buttons[_ngcontent-%COMP%]{width:75%;display:-ms-flexbox;display:flex}.action-button[_ngcontent-%COMP%]{margin:5px}.glycosylation[_ngcontent-%COMP%]{color:var(--regular-white-color);background-color:var(--regular-darkgreen-color)}.disulfide[_ngcontent-%COMP%]{color:#fff;background-color:#cca300}.other[_ngcontent-%COMP%]{color:var(--regular-white-color);background-color:var(--regular-darkslateblue-color)}.glycosylation[_ngcontent-%COMP%]{color:#fff;background-color:#608000}.N-Glycosylation[_ngcontent-%COMP%]{color:#fff;background-color:#06c}.C-Glycosylation[_ngcontent-%COMP%]{color:#fff;background-color:gray}.O-Glycosylation[_ngcontent-%COMP%]{color:#fff;background-color:#f66}.feature[_ngcontent-%COMP%]{border-top:1px solid var(--regular-magenta-color);border-bottom:1px solid var(--regular-magenta-color)}.modification[_ngcontent-%COMP%]{color:var(--regular-white-color);background-color:var(--regular-darkolivegreen-color)}.selectedSite[_ngcontent-%COMP%]{display:block;text-align:center}.last-section[_ngcontent-%COMP%]{-ms-flex-preferred-size:0!important;flex-basis:0!important}.siteref[_ngcontent-%COMP%]{display:block;width:15.5px!important;text-align:center}.generated[_ngcontent-%COMP%]{background-color:var(--box-shadow-color-2)}.subunit-container[_ngcontent-%COMP%]{padding:5px}.button-link[_ngcontent-%COMP%]{color:var(--primary-color);text-decoration:none;vertical-align:middle;font-weight:500;text-align:center;line-height:46px}.convert[_ngcontent-%COMP%]{padding-right:40px}.spacer[_ngcontent-%COMP%]{width:15%}.error[_ngcontent-%COMP%]{color:var(--regular-red-color)}"]}),r}(),H=n(19975);function ct(r,p){if(1&r){var i=t.EpF();t.TgZ(0,"div",1),t.TgZ(1,"button",2),t.NdJ("click",function(){return t.CHM(i),t.oxw().openAnyDialog()}),t._uU(2," Add Any Site Type "),t._UZ(3,"mat-icon",3),t.qZA(),t.qZA()}}function lt(r,p){1&r&&t._UZ(0,"mat-divider",18),2&r&&t.Q6J("inset",!0)}function ft(r,p){if(1&r){var i=t.EpF();t.TgZ(0,"div",15),t.TgZ(1,"app-subunit-form",16),t.NdJ("subunitDeleted",function(y){return t.CHM(i),t.oxw().deleteSubunit(y)}),t.qZA(),t.YNc(2,lt,1,1,"mat-divider",17),t.qZA()}if(2&r){var e=p.$implicit,s=p.last,o=p.index,d=t.oxw();t.Q6J("id","substance-subunit-"+o),t.xp6(1),t.Q6J("subunit",e)("view",d.substanceType),t.xp6(1),t.Q6J("ngIf",!s)}}function pt(r,p){if(1&r){var i=t.EpF();t.TgZ(0,"div",19),t.TgZ(1,"div",1),t.TgZ(2,"button",2),t.NdJ("click",function(){return t.CHM(i),t.oxw().addSubunit()}),t._uU(3," Add Subunit "),t._UZ(4,"mat-icon",3),t.qZA(),t.qZA(),t.qZA()}}var dt=function(){var r=function(p){(0,g.Z)(e,p);var i=(0,C.Z)(e);function e(s,o,d,v,y,P,k){var S;return(0,c.Z)(this,e),(S=i.call(this,d)).substanceFormService=s,S.scrollToService=o,S.gaService=d,S.cvService=v,S.dialog=y,S.overlayContainerService=P,S.substanceFormPropertiesService=k,S.subunits=[],S.subunitSequences=[],S.vocabulary={},S.subscriptions=[],S.toggle={},S.view="details",S.sequenceType="",S.allSites=[],S.subcount=0,S.sequenceSites=[],S.analyticsEventCategory="substance form subunits",S}return(0,a.Z)(e,[{key:"ngOnInit",value:function(){this.menuLabelUpdate.emit("Subunits"),this.overlayContainer=this.overlayContainerService.getContainerElement()}},{key:"ngAfterViewInit",value:function(){var o=this;this.substanceFormService.definition.subscribe(function(y){o.substanceType=y.substanceClass}).unsubscribe(),this.canAddItemUpdate.emit(!0);var v=this.substanceFormService.substanceSubunits.subscribe(function(y){o.subunits=y,o.filtered=y,o.subunits.forEach(function(P){o.allSites[P.subunitIndex]=[]})});this.subscriptions.push(v)}},{key:"getSites",value:function(o){return this.subcount=this.subcount+1,this.allSites[o]}},{key:"ngOnDestroy",value:function(){this.subscriptions.forEach(function(o){o.unsubscribe()})}},{key:"updateView",value:function(o){this.gaService.sendEvent(this.analyticsEventCategory,"button:view-update",o.value),this.view=o.value}},{key:"addItem",value:function(){this.addSubunit()}},{key:"addSubunit",value:function(){var o=this;this.substanceFormService.addSubstanceSubunit();var d="substance-subunit-"+(this.subunits.length-1);setTimeout(function(){o.scrollToService.scrollToElement(d,"center")}),this.substanceFormService.emitSubunitUpdate()}},{key:"deleteSubunit",value:function(o){this.substanceFormService.deleteSubstanceSubunit(o)}},{key:"getSequence",value:function(o){var d={};return this.subunitSequences.forEach(function(v){v.subunitIndex===o+1&&(d=v)}),d}},{key:"openDialog",value:function(){var o=this,d=this.dialog.open(u.r,{data:{card:"feature",link:[]},width:"1040px",panelClass:"subunit-dialog"});this.overlayContainer.style.zIndex="1002";var v=d.afterClosed().subscribe(function(y){y&&(o.substanceFormPropertiesService.addSubstancePropertyFromFeature(y),setTimeout(function(){alert('Feature added under "Properties"')})),o.overlayContainer.style.zIndex=null});this.subscriptions.push(v)}},{key:"openAnyDialog",value:function(){var o=this,d=this.dialog.open(u.r,{data:{card:"any",link:[]},width:"1040px",panelClass:"subunit-dialog"});this.overlayContainer.style.zIndex="1002";var v=d.afterClosed().subscribe(function(y){y&&("feature"===y.siteType?o.substanceFormPropertiesService.addSubstancePropertyFromFeature(y.sentFeature):o.substanceFormService.addAnySiteType(y))});this.subscriptions.push(v)}}]),e}(q.u);return r.\u0275fac=function(i){return new(i||r)(t.Y36(x.B),t.Y36(b.i),t.Y36(T.$),t.Y36(A.I),t.Y36(_.uw),t.Y36(N.Xj),t.Y36(f.S))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-substance-form-subunits"]],features:[t.qOj],decls:16,vars:5,consts:[[1,"add-container"],[1,"add-button"],["mat-button","",3,"click"],["svgIcon","add_circle_outline"],["class","add-button",4,"ngIf"],[1,"middle-fill"],[1,"filters-container"],[3,"value","change"],["value","details"],["svgIcon","list"],["value","raw"],["svgIcon","view_stream"],[3,"ngClass"],["appScrollToTarget","",3,"id",4,"ngFor","ngForOf"],["class","add-container-bottom",4,"ngIf"],["appScrollToTarget","",3,"id"],[3,"subunit","view","subunitDeleted"],["class","form-divider",3,"inset",4,"ngIf"],[1,"form-divider",3,"inset"],[1,"add-container-bottom"]],template:function(i,e){1&i&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"button",2),t.NdJ("click",function(){return e.openDialog()}),t._uU(3," Add Feature "),t._UZ(4,"mat-icon",3),t.qZA(),t.qZA(),t.YNc(5,ct,4,0,"div",4),t._UZ(6,"div",5),t.TgZ(7,"div",6),t.TgZ(8,"mat-button-toggle-group",7),t.NdJ("change",function(o){return e.updateView(o)}),t.TgZ(9,"mat-button-toggle",8),t._UZ(10,"mat-icon",9),t.qZA(),t.TgZ(11,"mat-button-toggle",10),t._UZ(12,"mat-icon",11),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(13,"div",12),t.YNc(14,ft,3,4,"div",13),t.qZA(),t.YNc(15,pt,5,0,"div",14)),2&i&&(t.xp6(5),t.Q6J("ngIf","protein"===e.substanceType),t.xp6(3),t.Q6J("value",e.view),t.xp6(5),t.Q6J("ngClass",e.view),t.xp6(1),t.Q6J("ngForOf",e.subunits),t.xp6(1),t.Q6J("ngIf",e.subunits&&e.subunits.length>0))},directives:[M.lW,I.Hw,l.O5,U.A9,U.Yi,l.mk,l.sg,F.P,at,H.d],styles:[".details[_ngcontent-%COMP%]   .subunit[_ngcontent-%COMP%]{display:none}.details[_ngcontent-%COMP%]   .subunit-sequence[_ngcontent-%COMP%], .show[_ngcontent-%COMP%]{display:block}.hide[_ngcontent-%COMP%]{display:none}.raw[_ngcontent-%COMP%]   .subunit[_ngcontent-%COMP%]{display:block}.raw[_ngcontent-%COMP%]   .subunit-sequence[_ngcontent-%COMP%]{display:none}.subunit-sequence[_ngcontent-%COMP%]{margin-bottom:30px}.sequence-section-group[_ngcontent-%COMP%]{width:100%;display:-ms-flexbox;display:flex;margin-bottom:10px}.section-number[_ngcontent-%COMP%]{text-align:right;padding:0 10px;font-size:.8em}.sequence-section[_ngcontent-%COMP%]{-ms-flex-positive:0;flex-grow:0;padding:0 10px;-ms-flex-preferred-size:20%;flex-basis:20%;-ms-flex-negative:0;flex-shrink:0}.section-units-container[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex}.section-units-container[_ngcontent-%COMP%]   .section-unit[_ngcontent-%COMP%]{-ms-flex-positive:1;flex-grow:1}.section-units-container[_ngcontent-%COMP%]   .section-unit[_ngcontent-%COMP%]:hover{cursor:default}.subunit[_ngcontent-%COMP%]{padding-top:5px;padding-bottom:20px}.subunit[_ngcontent-%COMP%]:not(:last-child){border-bottom:solid 1px var(--box-shadow-color-3)}.raw-sequence[_ngcontent-%COMP%]{word-break:break-all;line-height:26px}.add-container[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-line-pack:center;align-content:center}.add-button[_ngcontent-%COMP%]{margin-right:10px}.add-container-bottom[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex;margin-top:10px;-ms-flex-pack:end;justify-content:flex-end}"]}),r}(),gt=n(7168),bt=n(94673),vt=n(44770),mt=n(26439),yt=n(43365),ht=(n(64061),function(){var r=(0,a.Z)(function p(){(0,c.Z)(this,p)});return r.\u0275fac=function(i){return new(i||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[[l.ez,h.o0.forChild(dt),gt.O,H.t,I.Ps,M.ot,bt.w,vt.lN,$.UX,$.u5,mt.TU,R.AV,U.vV,yt.c]]}),r}())},15541:function(m,O,n){var a=n(62093),c=n(9102),l=n(25734),h=n(6687),g=n(18704),C=n(94666),x=Date.prototype.getTime;function Z(u){return null==u}function q(u){return!(!u||"object"!=typeof u||"number"!=typeof u.length||"function"!=typeof u.copy||"function"!=typeof u.slice||u.length>0&&"number"!=typeof u[0])}m.exports=function T(u,f,t){var b=t||{};return!!(b.strict?l(u,f):u===f)||(!u||!f||"object"!=typeof u&&"object"!=typeof f?b.strict?l(u,f):u==f:function A(u,f,t){var b,_;if(typeof u!=typeof f||Z(u)||Z(f)||u.prototype!==f.prototype||c(u)!==c(f))return!1;var N=h(u),M=h(f);if(N!==M)return!1;if(N||M)return u.source===f.source&&g(u)===g(f);if(C(u)&&C(f))return x.call(u)===x.call(f);var I=q(u),U=q(f);if(I!==U)return!1;if(I||U){if(u.length!==f.length)return!1;for(b=0;b<u.length;b++)if(u[b]!==f[b])return!1;return!0}if(typeof u!=typeof f)return!1;try{var F=a(u),w=a(f)}catch(E){return!1}if(F.length!==w.length)return!1;for(F.sort(),w.sort(),b=F.length-1;b>=0;b--)if(F[b]!=w[b])return!1;for(b=F.length-1;b>=0;b--)if(!T(u[_=F[b]],f[_],t))return!1;return!0}(u,f,b))}},11790:function(m,O,n){"use strict";var a=n(62093),c="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),l=Object.prototype.toString,h=Array.prototype.concat,g=Object.defineProperty,x=n(19006)(),T=g&&x,Z=function(u,f,t,b){f in u&&(!function(u){return"function"==typeof u&&"[object Function]"===l.call(u)}(b)||!b())||(T?g(u,f,{configurable:!0,enumerable:!1,value:t,writable:!0}):u[f]=t)},q=function(u,f){var t=arguments.length>2?arguments[2]:{},b=a(f);c&&(b=h.call(b,Object.getOwnPropertySymbols(f)));for(var _=0;_<b.length;_+=1)Z(u,b[_],f[b[_]],t[b[_]])};q.supportsDescriptors=!!T,m.exports=q},13677:function(m){"use strict";var O=function(){return"string"==typeof function(){}.name},n=Object.getOwnPropertyDescriptor;if(n)try{n([],"length")}catch(c){n=null}O.functionsHaveConfigurableNames=function(){if(!O()||!n)return!1;var l=n(function(){},"name");return!!l&&!!l.configurable};var a=Function.prototype.bind;O.boundFunctionsHaveNames=function(){return O()&&"function"==typeof a&&""!==function(){}.bind().name},m.exports=O},19006:function(m,O,n){"use strict";var c=n(79903)("%Object.defineProperty%",!0),l=function(){if(c)try{return c({},"a",{value:1}),!0}catch(g){return!1}return!1};l.hasArrayLengthDefineBug=function(){if(!l())return null;try{return 1!==c([],"length",{value:1}).length}catch(g){return!0}},m.exports=l},94666:function(m,O,n){"use strict";var a=Date.prototype.getDay,l=Object.prototype.toString,g=n(13261)();m.exports=function(x){return"object"==typeof x&&null!==x&&(g?function(x){try{return a.call(x),!0}catch(T){return!1}}(x):"[object Date]"===l.call(x))}},6687:function(m,O,n){"use strict";var l,h,g,C,a=n(4263),c=n(13261)();if(c){l=a("Object.prototype.hasOwnProperty"),h=a("RegExp.prototype.exec"),g={};var x=function(){throw g};C={toString:x,valueOf:x},"symbol"==typeof Symbol.toPrimitive&&(C[Symbol.toPrimitive]=x)}var T=a("Object.prototype.toString"),Z=Object.getOwnPropertyDescriptor;m.exports=c?function(u){if(!u||"object"!=typeof u)return!1;var f=Z(u,"lastIndex");if(!f||!l(f,"value"))return!1;try{h(u,C)}catch(b){return b===g}}:function(u){return!(!u||"object"!=typeof u&&"function"!=typeof u)&&"[object RegExp]"===T(u)}},56872:function(m){"use strict";var O=function(a){return a!=a};m.exports=function(a,c){return 0===a&&0===c?1/a==1/c:!!(a===c||O(a)&&O(c))}},25734:function(m,O,n){"use strict";var a=n(11790),c=n(3855),l=n(56872),h=n(3306),g=n(67715),C=c(h(),Object);a(C,{getPolyfill:h,implementation:l,shim:g}),m.exports=C},3306:function(m,O,n){"use strict";var a=n(56872);m.exports=function(){return"function"==typeof Object.is?Object.is:a}},67715:function(m,O,n){"use strict";var a=n(3306),c=n(11790);m.exports=function(){var h=a();return c(Object,{is:h},{is:function(){return Object.is!==h}}),h}},91149:function(m,O,n){"use strict";var a;if(!Object.keys){var c=Object.prototype.hasOwnProperty,l=Object.prototype.toString,h=n(55185),g=Object.prototype.propertyIsEnumerable,C=!g.call({toString:null},"toString"),x=g.call(function(){},"prototype"),T=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],Z=function(t){var b=t.constructor;return b&&b.prototype===t},q={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},A=function(){if("undefined"==typeof window)return!1;for(var f in window)try{if(!q["$"+f]&&c.call(window,f)&&null!==window[f]&&"object"==typeof window[f])try{Z(window[f])}catch(t){return!0}}catch(t){return!0}return!1}();a=function(t){var b=null!==t&&"object"==typeof t,_="[object Function]"===l.call(t),N=h(t),M=b&&"[object String]"===l.call(t),I=[];if(!b&&!_&&!N)throw new TypeError("Object.keys called on a non-object");var U=x&&_;if(M&&t.length>0&&!c.call(t,0))for(var F=0;F<t.length;++F)I.push(String(F));if(N&&t.length>0)for(var w=0;w<t.length;++w)I.push(String(w));else for(var E in t)(!U||"prototype"!==E)&&c.call(t,E)&&I.push(String(E));if(C)for(var Y=function(t){if("undefined"==typeof window||!A)return Z(t);try{return Z(t)}catch(b){return!1}}(t),j=0;j<T.length;++j)(!Y||"constructor"!==T[j])&&c.call(t,T[j])&&I.push(T[j]);return I}}m.exports=a},62093:function(m,O,n){"use strict";var a=Array.prototype.slice,c=n(55185),l=Object.keys,h=l?function(x){return l(x)}:n(91149),g=Object.keys;h.shim=function(){if(Object.keys){var x=function(){var T=Object.keys(arguments);return T&&T.length===arguments.length}(1,2);x||(Object.keys=function(Z){return c(Z)?g(a.call(Z)):g(Z)})}else Object.keys=h;return Object.keys||h},m.exports=h},55185:function(m){"use strict";var O=Object.prototype.toString;m.exports=function(a){var c=O.call(a),l="[object Arguments]"===c;return l||(l="[object Array]"!==c&&null!==a&&"object"==typeof a&&"number"==typeof a.length&&a.length>=0&&"[object Function]"===O.call(a.callee)),l}},44040:function(m,O,n){"use strict";var a=n(13677).functionsHaveConfigurableNames(),c=Object,l=TypeError;m.exports=function(){if(null!=this&&this!==c(this))throw new l("RegExp.prototype.flags getter called on non-object");var g="";return this.hasIndices&&(g+="d"),this.global&&(g+="g"),this.ignoreCase&&(g+="i"),this.multiline&&(g+="m"),this.dotAll&&(g+="s"),this.unicode&&(g+="u"),this.sticky&&(g+="y"),g},a&&Object.defineProperty&&Object.defineProperty(m.exports,"name",{value:"get flags"})},18704:function(m,O,n){"use strict";var a=n(11790),c=n(3855),l=n(44040),h=n(49783),g=n(29369),C=c(h());a(C,{getPolyfill:h,implementation:l,shim:g}),m.exports=C},49783:function(m,O,n){"use strict";var a=n(44040),c=n(11790).supportsDescriptors,l=Object.getOwnPropertyDescriptor;m.exports=function(){if(c&&"gim"===/a/gim.flags){var g=l(RegExp.prototype,"flags");if(g&&"function"==typeof g.get&&"boolean"==typeof RegExp.prototype.dotAll&&"boolean"==typeof RegExp.prototype.hasIndices){var C="",x={};if(Object.defineProperty(x,"hasIndices",{get:function(){C+="d"}}),Object.defineProperty(x,"sticky",{get:function(){C+="y"}}),"dy"===C)return g.get}}return a}},29369:function(m,O,n){"use strict";var a=n(11790).supportsDescriptors,c=n(49783),l=Object.getOwnPropertyDescriptor,h=Object.defineProperty,g=TypeError,C=Object.getPrototypeOf,x=/a/;m.exports=function(){if(!a||!C)throw new g("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var Z=c(),q=C(x),A=l(q,"flags");return(!A||A.get!==Z)&&h(q,"flags",{configurable:!0,enumerable:!1,get:Z}),Z}}}]);
//# sourceMappingURL=4874.ed0f068a0f5f2cf9.js.map