"use strict";(self.webpackChunkgsrs_client=self.webpackChunkgsrs_client||[]).push([[4869],{84869:function(H,f,a){a.r(f),a.d(f,{SubstanceNotesModule:function(){return Q}});var u=a(1884),g=a(39117),p=a(36362),v=a(46751),C=a(56101),x=a(2756),b=a(24874),Z=a(50253),t=a(86613),d=a(95758),T=a(54244),l=a(97217),h=a(65590);function y(e,o){if(1&e){var n=t.EpF();t.TgZ(0,"a",2),t.NdJ("click",function(){return t.CHM(n),t.oxw().toggleView()}),t._uU(1),t._UZ(2,"mat-icon",3),t.qZA()}if(2&e){var s=t.oxw();t.xp6(1),t.hij("Show ",s.isCollapsed?"all ":"less"," "),t.xp6(1),t.s9C("svgIcon",s.isCollapsed?"drop_down":"drop_up")}}var M=function(){var e=function(){function o(n){(0,g.Z)(this,o),this.elementRef=n,this.maxLength=200,this.hideToggle=!0,this.isCollapsed=!0}return(0,u.Z)(o,[{key:"ngOnInit",value:function(){this.determineView()}},{key:"toggleView",value:function(){this.isCollapsed=!this.isCollapsed,this.determineView()}},{key:"determineView",value:function(){if(!this.text||this.text.length<=this.maxLength)return this.currentText=this.text.replace(/(?:\r\n|\r|\n)/g,"<br/>"),this.isCollapsed=!1,void(this.hideToggle=!0);this.hideToggle=!1,!0===this.isCollapsed?(this.currentText=this.text.substring(0,this.maxLength)+"...",this.currentText=this.currentText.replace(/(?:\r\n|\r|\n)/g,"<br/>")):!1===this.isCollapsed&&(this.currentText=this.currentText=this.text.replace(/(?:\r\n|\r|\n)/g,"<br/>"))}}]),o}();return e.\u0275fac=function(n){return new(n||e)(t.Y36(t.SBq))},e.\u0275cmp=t.Xpm({type:e,selectors:[["read-more"]],inputs:{text:"text",maxLength:"maxLength"},decls:2,vars:2,consts:[[3,"innerHTML"],["class","blue-font toggle",3,"click",4,"ngIf"],[1,"blue-font","toggle",3,"click"],[3,"svgIcon"]],template:function(n,s){1&n&&(t._UZ(0,"div",0),t.YNc(1,y,3,2,"a",1)),2&n&&(t.Q6J("innerHTML",s.currentText,t.oJD),t.xp6(1),t.Q6J("ngIf",!s.hideToggle))},directives:[p.O5,h.Hw],styles:[".toggle[_ngcontent-%COMP%]{display:-ms-inline-flexbox;display:inline-flex;vertical-align:middle}"]}),e}(),N=a(73430);function S(e,o){1&e&&(t.TgZ(0,"th",8),t._uU(1," Note "),t.qZA())}function O(e,o){if(1&e&&(t.TgZ(0,"td",9),t._UZ(1,"read-more",10),t.qZA()),2&e){var n=o.$implicit;t.xp6(1),t.Q6J("text",n.note)("maxLength",100)}}function w(e,o){1&e&&(t.TgZ(0,"th",8),t._uU(1," References "),t.qZA())}function R(e,o){if(1&e&&(t.TgZ(0,"h2",13),t._uU(1,"References"),t.qZA(),t.TgZ(2,"div",14),t._UZ(3,"app-references-manager",15),t.qZA(),t.TgZ(4,"div",16),t._UZ(5,"span",17),t.TgZ(6,"button",18),t._uU(7,"Close"),t.qZA(),t.qZA()),2&e){var n=t.oxw().$implicit,s=t.oxw();t.xp6(3),t.Q6J("substance",s.substance)("references",n.references)}}function U(e,o){if(1&e){var n=t.EpF();t.TgZ(0,"td",9),t.TgZ(1,"button",11),t.NdJ("click",function(){t.CHM(n);var i=t.MAs(4);return t.oxw().openModal(i)}),t._uU(2,"View"),t.qZA(),t.YNc(3,R,8,2,"ng-template",null,12,t.W1O),t.qZA()}if(2&e){var s=o.$implicit;t.xp6(1),t.Q6J("disabled",s.references.length<=0)}}function A(e,o){1&e&&t._UZ(0,"tr",19)}function P(e,o){1&e&&t._UZ(0,"tr",20)}var Y=function(){var e=function(o){(0,v.Z)(s,o);var n=(0,C.Z)(s);function s(m,i,c){var r;return(0,g.Z)(this,s),(r=n.call(this)).dialog=m,r.gaService=i,r.overlayContainerService=c,r.notes=[],r.displayedColumns=["note","references"],r.substanceUpdated=new Z.x,r}return(0,u.Z)(s,[{key:"ngOnInit",value:function(){var i=this;this.substanceUpdated.subscribe(function(c){i.substance=c,null!=i.substance&&null!=i.substance.notes&&i.substance.notes.length&&(i.notes=i.substance.notes),i.countUpdate.emit(i.notes.length)}),this.overlayContainer=this.overlayContainerService.getContainerElement()}},{key:"openModal",value:function(i){var c=this;this.gaService.sendEvent(this.analyticsEventCategory,"button","references view");var r=this.dialog.open(i,{minWidth:"40%",maxWidth:"90%"});this.overlayContainer.style.zIndex="1002",r.afterClosed().subscribe(function(L){c.overlayContainer.style.zIndex=null})}}]),s}(x.B);return e.\u0275fac=function(n){return new(n||e)(t.Y36(d.uw),t.Y36(b.$),t.Y36(T.Xj))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-substance-notes"]],features:[t.qOj],decls:10,vars:3,consts:[[1,"responsive"],["mat-table","",1,"no-bottom-border",3,"dataSource"],["matColumnDef","note"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","references"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],[3,"text","maxLength"],[1,"mat-raised-button","mat-primary","dialog-close",3,"disabled","click"],["refTemplate",""],["mat-dialog-title",""],["mat-dialog-content",""],[3,"substance","references"],["mat-dialog-actions",""],[1,"middle-fill"],["mat-dialog-close","",1,"mat-raised-button","mat-primary"],["mat-header-row",""],["mat-row",""]],template:function(n,s){1&n&&(t.TgZ(0,"div",0),t.TgZ(1,"table",1),t.ynx(2,2),t.YNc(3,S,2,0,"th",3),t.YNc(4,O,2,2,"td",4),t.BQk(),t.ynx(5,5),t.YNc(6,w,2,0,"th",3),t.YNc(7,U,5,1,"td",4),t.BQk(),t.YNc(8,A,1,0,"tr",6),t.YNc(9,P,1,0,"tr",7),t.qZA(),t.qZA()),2&n&&(t.xp6(1),t.Q6J("dataSource",s.notes),t.xp6(7),t.Q6J("matHeaderRowDef",s.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",s.displayedColumns))},directives:[l.BZ,l.w1,l.fO,l.ge,l.Dz,l.ev,M,d.uh,d.xY,N.C,d.H8,d.ZT,l.as,l.XQ,l.nj,l.Gk],styles:["table.mat-table[_ngcontent-%COMP%]{width:100%}td.mat-cell[_ngcontent-%COMP%]:not(:last-child), td.mat-footer-cell[_ngcontent-%COMP%]:not(:last-child), th.mat-header-cell[_ngcontent-%COMP%]:not(:last-child){padding-right:10px}td.mat-cell[_ngcontent-%COMP%], td.mat-footer-cell[_ngcontent-%COMP%], th.mat-header-cell[_ngcontent-%COMP%]{padding-top:10px;padding-bottom:10px}.no-bottom-border[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td.mat-cell[_ngcontent-%COMP%]{border-bottom:none}.mat-sort-header-content[_ngcontent-%COMP%]{display:block!important}"]}),e}(),J=a(64061),D=a(33865),I=a(38277),Q=function(){var e=(0,u.Z)(function o(){(0,g.Z)(this,o)});return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[p.ez,J.o.forChild(Y),l.p0,D.HT,d.Is,I.V,h.Ps]]}),e}()}}]);
//# sourceMappingURL=4869.8cdc14d81f977c12.js.map