"use strict";(self.webpackChunkgsrs_client=self.webpackChunkgsrs_client||[]).push([[2686],{12686:function(ue,v,s){s.r(v),s.d(v,{SubstanceRelationshipsModule:function(){return re}});var Z=s(1884),C=s(39117),b=s(36362),R=s(46751),U=s(56101),M=s(52149),O=s(92507),q=s(54025),D=s(24874),w=s(50253),e=s(86613),f=s(95758),N=s(54244),T=s(44770),S=s(43365),m=s(90587),p=s(97217),h=s(64316),J=s(9292),x=s(98002),y=s(65590),L=s(73430),_=s(26439);function Q(n,o){1&n&&(e.TgZ(0,"th",17),e._uU(1," Related Record"),e.qZA())}var A=function(o){return["/substances",o]};function Y(n,o){if(1&n&&(e.TgZ(0,"td",18),e.TgZ(1,"div",19),e.TgZ(2,"div"),e._uU(3),e.qZA(),e._UZ(4,"img",20),e.TgZ(5,"div"),e.TgZ(6,"a",21),e._uU(7),e._UZ(8,"mat-icon",22),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&n){var i=o.$implicit;e.xp6(3),e.Oqu(i.relatedSubstance.linkingID),e.xp6(1),e.Q6J("entityId",i.relatedSubstance.refuuid),e.xp6(2),e.Q6J("routerLink",e.VKq(4,A,i.relatedSubstance.refuuid)),e.xp6(1),e.hij(" ",i.relatedSubstance.name," ")}}function I(n,o){1&n&&(e.TgZ(0,"th",17),e._uU(1," Type "),e.qZA())}function P(n,o){if(1&n&&(e.TgZ(0,"td",23),e._uU(1),e.qZA()),2&n){var i=o.$implicit;e.xp6(1),e.hij(" ",i.type," ")}}function j(n,o){1&n&&(e.TgZ(0,"th",24),e._uU(1," Details "),e.qZA())}function E(n,o){if(1&n&&(e.TgZ(0,"div",19),e.TgZ(1,"div"),e._uU(2),e.qZA(),e._UZ(3,"img",20),e.TgZ(4,"div"),e.TgZ(5,"a",21),e._uU(6),e._UZ(7,"mat-icon",22),e.qZA(),e.qZA(),e.qZA()),2&n){var i=e.oxw(2).$implicit;e.xp6(2),e.Oqu(i.mediatorSubstance.linkingID),e.xp6(1),e.Q6J("entityId",i.mediatorSubstance.refuuid),e.xp6(2),e.Q6J("routerLink",e.VKq(4,A,i.mediatorSubstance.refuuid)),e.xp6(1),e.hij(" ",i.mediatorSubstance.name," ")}}function $(n,o){1&n&&(e.TgZ(0,"div"),e.TgZ(1,"i"),e._uU(2,"none"),e.qZA(),e.qZA())}function H(n,o){if(1&n&&(e.TgZ(0,"div",37),e.TgZ(1,"div",38),e._uU(2," Interaction Type: "),e.qZA(),e.TgZ(3,"div",39),e._uU(4),e.qZA(),e.qZA()),2&n){var i=e.oxw(2).$implicit;e.xp6(4),e.hij(" ",i.interactionType," ")}}function V(n,o){if(1&n&&(e.TgZ(0,"div",37),e.TgZ(1,"div",38),e._uU(2," Comments: "),e.qZA(),e.TgZ(3,"div",39),e._uU(4),e.qZA(),e.qZA()),2&n){var i=e.oxw(2).$implicit;e.xp6(4),e.hij(" ",i.comments," ")}}function z(n,o){if(1&n&&(e.TgZ(0,"div",37),e.TgZ(1,"div",38),e._uU(2," Qualification: "),e.qZA(),e.TgZ(3,"div",39),e._uU(4),e.qZA(),e.qZA()),2&n){var i=e.oxw(2).$implicit;e.xp6(4),e.hij(" ",i.qualification," ")}}function B(n,o){if(1&n&&(e.TgZ(0,"i"),e._uU(1),e.qZA()),2&n){var i=e.oxw(3).$implicit;e.xp6(1),e.Oqu(i.amount.nonNumericValue)}}function F(n,o){if(1&n&&(e.TgZ(0,"div",37),e.TgZ(1,"div",38),e._uU(2," Amount: "),e.qZA(),e.TgZ(3,"div",39),e._uU(4),e.YNc(5,B,2,1,"i",33),e.qZA(),e.qZA()),2&n){var i=e.oxw(2).$implicit,c=e.oxw();e.xp6(4),e.hij(" ",c.displayAmount(i.amount)," "),e.xp6(1),e.Q6J("ngIf",i.amount.nonNumericValue)}}function X(n,o){if(1&n&&(e.TgZ(0,"h2",27),e._uU(1,"Details"),e.qZA(),e.TgZ(2,"div",28),e.TgZ(3,"table",29),e.TgZ(4,"tr"),e.TgZ(5,"th",30),e._uU(6," Mediator Substance "),e.qZA(),e.TgZ(7,"th",30),e._uU(8," Details "),e.qZA(),e.qZA(),e.TgZ(9,"tr"),e.TgZ(10,"td",31),e.YNc(11,E,8,6,"div",32),e.YNc(12,$,3,0,"div",33),e.qZA(),e.TgZ(13,"td",31),e.YNc(14,H,5,1,"div",34),e.YNc(15,V,5,1,"div",34),e.YNc(16,z,5,1,"div",34),e.YNc(17,F,6,2,"div",34),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(18,"div",35),e._UZ(19,"span",1),e.TgZ(20,"button",36),e._uU(21,"Close"),e.qZA(),e.qZA()),2&n){var i=e.oxw().$implicit;e.xp6(11),e.Q6J("ngIf",i.mediatorSubstance),e.xp6(1),e.Q6J("ngIf",!i.mediatorSubstance),e.xp6(2),e.Q6J("ngIf",i.interactionType),e.xp6(1),e.Q6J("ngIf",i.comments),e.xp6(1),e.Q6J("ngIf",i.qualification),e.xp6(1),e.Q6J("ngIf",i.amount)}}function K(n,o){if(1&n){var i=e.EpF();e.TgZ(0,"td",23),e.TgZ(1,"button",25),e.NdJ("click",function(){e.CHM(i);var a=e.MAs(4);return e.oxw().openModal(a)}),e._uU(2," View"),e.qZA(),e.YNc(3,X,22,6,"ng-template",null,26,e.W1O),e.qZA()}if(2&n){var c=o.$implicit,d=e.oxw();e.xp6(1),e.Q6J("disabled",!d.hasDetails(c))}}function W(n,o){1&n&&(e.TgZ(0,"th",24),e._uU(1," References "),e.qZA())}function k(n,o){if(1&n&&(e.TgZ(0,"h2",27),e._uU(1,"References"),e.qZA(),e.TgZ(2,"div",28),e._UZ(3,"app-references-manager",41),e.qZA(),e.TgZ(4,"div",35),e._UZ(5,"span",1),e.TgZ(6,"button",36),e._uU(7,"Close"),e.qZA(),e.qZA()),2&n){var i=e.oxw().$implicit,c=e.oxw();e.xp6(3),e.Q6J("substance",c.substance)("references",i.references)}}function G(n,o){if(1&n){var i=e.EpF();e.TgZ(0,"td",23),e.TgZ(1,"button",25),e.NdJ("click",function(){e.CHM(i);var t=e.MAs(4);return e.oxw().openModal(t)}),e._uU(2),e.qZA(),e.YNc(3,k,8,2,"ng-template",null,40,e.W1O),e.qZA()}if(2&n){var c=o.$implicit;e.xp6(1),e.Q6J("disabled",c.references.length<=0),e.xp6(1),e.hij("View ",c.references.length>0?c.references.length:""," references")}}function ee(n,o){1&n&&e._UZ(0,"tr",42)}function te(n,o){1&n&&e._UZ(0,"tr",43)}var ne=function(){return[5,10,25,100]},ie=function(){var n=function(o){(0,R.Z)(c,o);var i=(0,U.Z)(c);function c(d,t,a,r,u){var l;return(0,C.Z)(this,c),(l=i.call(this,r)).utilService=d,l.configService=t,l.dialog=a,l.gaService=r,l.overlayContainerService=u,l.relationships=[],l.displayedColumns=["relatedRecord","type","details","references"],l.substanceUpdated=new w.x,l}return(0,Z.Z)(c,[{key:"ngOnInit",value:function(){var t=this;this.substanceUpdated.subscribe(function(a){if(t.relationships=[],t.substance=a,"RELATIONSHIPS"===t.type&&t.configService.configData&&t.configService.configData.substanceDetailsCards&&t.configService.configData.substanceDetailsCards.length){var r=t.configService.configData.substanceDetailsCards.find(function(l){return l.type===t.type});if(null!=r&&r.filters&&r.filters.length){var u=r.filters.find(function(l){return"substanceRelationships"===l.filterName})||{value:[]};t.excludedRelationships=u.value}}null!=t.substance&&null!=t.type&&(t.filterRelationhships(),t.countUpdate.emit(t.relationships.length),t.filtered=t.relationships,t.pageChange(),t.searchControl.valueChanges.subscribe(function(l){t.filterList(l,t.relationships,t.analyticsEventCategory)},function(l){console.log(l)}))}),this.overlayContainer=this.overlayContainerService.getContainerElement()}},{key:"sortData",value:function(t){var a=this,r=this.relationships.slice();if(!t.active||""===t.direction)return this.filtered=r,void this.pageChange();this.filtered=r.sort(function(u,l){var g="asc"===t.direction;switch(t.active){case"relatedRecord":return a.utilService.compare(u.relatedSubstance.name?u.relatedSubstance.name.toUpperCase():"",l.relatedSubstance.name?l.relatedSubstance.name.toUpperCase():"",g);case"type":return a.utilService.compare(u.type?u.type:"",l.type?l.type:"",g);default:return 0}}),this.pageChange(),this.overlayContainer=this.overlayContainerService.getContainerElement()}},{key:"filterRelationhships",value:function(){var t=this;this.substance.relationships&&this.substance.relationships.length>0&&this.substance.relationships.forEach(function(a){var r=a.type,u=r&&r.trim()||"";if(null!=t.excludedRelationships&&t.excludedRelationships instanceof Array){var l=!1;t.excludedRelationships.forEach(function(g){u.toLowerCase().indexOf(g.toLowerCase())>-1&&(l=!0)}),l||t.relationships.push(a)}else u.toLowerCase().indexOf(t.type.toLowerCase())>-1&&t.relationships.push(a)})}},{key:"hasDetails",value:function(t){return!!(t.mediatorSubstance&&t.mediatorSubstance.name||t.amount||t.qualification||t.interactionType||t.comments)}},{key:"openModal",value:function(t){var a=this;this.gaService.sendEvent(this.analyticsEventCategory,"button","references view");var r=this.dialog.open(t,{});this.overlayContainer.style.zIndex="1002",r.afterClosed().subscribe(function(u){a.overlayContainer.style.zIndex=null})}},{key:"formatValue",value:function(t){return t?"object"==typeof t?t.display?t.display:t.value?t.value:null:t:null}},{key:"displayAmount",value:function(t){var a="";if(t&&"object"==typeof t&&t){var r=!1,u=this.formatValue(t.units);u||(u="");var l=this.formatValue(t.type);l&&(a+=l+"\n"),(t.average||t.high||t.low)&&(t.average&&(a+=t.average,t.units&&(a+=" "+u,r=!0)),(t.high||t.low)&&(a+=" [",t.high&&!t.low?a+="<"+t.high:!t.high&&t.low?a+=">"+t.low:t.high&&t.low&&(a+=t.low+" to "+t.high),a+="] ",r||t.units&&(a+=" "+u,r=!0)),a+=" (average) "),(t.highLimit||t.lowLimit)&&(a+="\n["),t.highLimit&&!t.lowLimit?a+="<"+t.highLimit:!t.highLimit&&t.lowLimit?a+=">"+t.lowLimit:t.highLimit&&t.lowLimit&&(a+=t.lowLimit+" to "+t.highLimit),(t.highLimit||t.lowLimit)&&(a+="] ",r||t.units&&(a+=" "+u,r=!0),a+=" (limits)")}return a}}]),c}(q.u);return n.\u0275fac=function(i){return new(i||n)(e.Y36(M.F),e.Y36(O.E),e.Y36(f.uw),e.Y36(D.$),e.Y36(N.Xj))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-substance-relationships"]],features:[e.qOj],decls:21,vars:9,consts:[[1,"flex-row"],[1,"middle-fill"],[1,"search",3,"floatLabel"],["matInput","","placeholder","Search",3,"formControl"],[1,"responsive"],["mat-table","","matSort","",3,"dataSource","matSortChange"],["matColumnDef","relatedRecord"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["class","text-center","mat-cell","",4,"matCellDef"],["matColumnDef","type"],["mat-cell","",4,"matCellDef"],["matColumnDef","details"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","references"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","true",3,"length","pageSize","pageSizeOptions","page"],["mat-header-cell","","mat-sort-header",""],["mat-cell","",1,"text-center"],[1,"thumb-col"],["appSubstanceImage","",1,"structure-image",3,"entityId"],["target","_blank",1,"substance-name",2,"height","18px",3,"routerLink"],["svgIcon","open_in_new",1,"icon"],["mat-cell",""],["mat-header-cell",""],[1,"mat-raised-button","mat-primary",3,"disabled","click"],["detailTemplate",""],["mat-dialog-title",""],["mat-dialog-content",""],[1,"details-table","mat-table"],[1,"mat-header-cell"],[1,"mat-cell"],["class","thumb-col",4,"ngIf"],[4,"ngIf"],["class","detail",4,"ngIf"],["mat-dialog-actions",""],["mat-dialog-close","",1,"mat-raised-button","mat-primary"],[1,"detail"],[1,"subhead"],[1,"subval"],["refTemplate",""],[3,"substance","references"],["mat-header-row",""],["mat-row",""]],template:function(i,c){1&i&&(e.TgZ(0,"div",0),e._UZ(1,"span",1),e.TgZ(2,"mat-form-field",2),e._UZ(3,"input",3),e.qZA(),e.qZA(),e.TgZ(4,"div",4),e.TgZ(5,"table",5),e.NdJ("matSortChange",function(t){return c.sortData(t)}),e.ynx(6,6),e.YNc(7,Q,2,0,"th",7),e.YNc(8,Y,9,6,"td",8),e.BQk(),e.ynx(9,9),e.YNc(10,I,2,0,"th",7),e.YNc(11,P,2,1,"td",10),e.BQk(),e.ynx(12,11),e.YNc(13,j,2,0,"th",12),e.YNc(14,K,5,1,"td",10),e.BQk(),e.ynx(15,13),e.YNc(16,W,2,0,"th",12),e.YNc(17,G,5,2,"td",10),e.BQk(),e.YNc(18,ee,1,0,"tr",14),e.YNc(19,te,1,0,"tr",15),e.qZA(),e.qZA(),e.TgZ(20,"mat-paginator",16),e.NdJ("page",function(t){return c.pageChange(t,c.analyticsEventCategory)}),e.qZA()),2&i&&(e.xp6(2),e.Q6J("floatLabel","never"),e.xp6(1),e.Q6J("formControl",c.searchControl),e.xp6(2),e.Q6J("dataSource",c.paged),e.xp6(13),e.Q6J("matHeaderRowDef",c.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",c.displayedColumns),e.xp6(1),e.Q6J("length",c.filtered&&c.filtered.length||0)("pageSize",5)("pageSizeOptions",e.DdM(8,ne)))},directives:[T.KE,S.Nt,m.Fj,m.JJ,m.oH,p.BZ,h.YE,p.w1,p.fO,p.ge,h.nU,p.Dz,p.ev,J.m,x.yS,y.Hw,f.uh,f.xY,b.O5,f.H8,f.ZT,L.C,p.as,p.XQ,p.nj,p.Gk,_.NW],styles:["table.mat-table[_ngcontent-%COMP%]{width:100%}td.mat-cell[_ngcontent-%COMP%]:not(:last-child), td.mat-footer-cell[_ngcontent-%COMP%]:not(:last-child), th.mat-header-cell[_ngcontent-%COMP%]:not(:last-child){padding-right:10px}.no-bottom-border[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td.mat-cell[_ngcontent-%COMP%]{border-bottom:none}.mat-sort-header-content[_ngcontent-%COMP%]{display:block!important}td.mat-cell[_ngcontent-%COMP%], td.mat-footer-cell[_ngcontent-%COMP%], th.mat-header-cell[_ngcontent-%COMP%]{padding-top:10px;padding-bottom:10px}.structure-image[_ngcontent-%COMP%]{width:150px;height:auto}.search[_ngcontent-%COMP%]{width:400px;max-width:100%}.thumb-col[_ngcontent-%COMP%]{max-width:400px}.subhead[_ngcontent-%COMP%]{display:inline-block;width:130px}.subval[_ngcontent-%COMP%]{display:inline}.details-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:10px}"]}),n}(),ae=s(64061),oe=s(38277),se=s(33865),le=s(40089),ce=s(24054),re=function(){var n=(0,Z.Z)(function o(){(0,C.Z)(this,o)});return n.\u0275fac=function(i){return new(i||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[b.ez,ae.o.forChild(ie),p.p0,oe.V,y.Ps,f.Is,_.TU,m.u5,T.lN,m.UX,S.c,se.HT,le.AV,x.Bz,h.JX,ce.f]]}),n}()}}]);
//# sourceMappingURL=2686.0f59d85217c0fefb.js.map