"use strict";(self.webpackChunkgsrs_client=self.webpackChunkgsrs_client||[]).push([[8592],{99146:function(P,A,a){a.d(A,{a:function(){return y}});var D=a(39117),O=a(1884),t=a(95758),C=a(24874),n=a(86613),e=a(10837),g=a(87317),y=function(){var f=function(){function T(v,M,b){(0,D.Z)(this,T),this.dialogRef=v,this.gaService=M,this.data=b}return(0,O.Z)(T,[{key:"ngOnInit",value:function(){this.data.name&&(this.name=this.data.name)}},{key:"nameResolved",value:function(M){this.dialogRef.close(M)}},{key:"dismissDialog",value:function(){this.gaService.sendEvent("nameResolverDialog","button:close","cancel resolver"),this.dialogRef.close()}}]),T}();return f.\u0275fac=function(v){return new(v||f)(n.Y36(t.so),n.Y36(C.$),n.Y36(t.WI))},f.\u0275cmp=n.Xpm({type:f,selectors:[["app-name-resolver-dialog"]],decls:8,vars:1,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[3,"startingName","structureSelected"],["mat-dialog-actions","",1,"flex-row"],[1,"middle-fill"],["mat-button","",3,"click"]],template:function(v,M){1&v&&(n.TgZ(0,"h1",0),n._uU(1," Get Structure From Name\n"),n.qZA(),n.TgZ(2,"div",1),n.TgZ(3,"app-name-resolver",2),n.NdJ("structureSelected",function(R){return M.nameResolved(R)}),n.qZA(),n.qZA(),n.TgZ(4,"div",3),n._UZ(5,"span",4),n.TgZ(6,"button",5),n.NdJ("click",function(){return M.dismissDialog()}),n._uU(7,"Close"),n.qZA(),n.qZA()),2&v&&(n.xp6(3),n.Q6J("startingName",M.name))},directives:[e.W,g.lW],styles:[""]}),f}()},11920:function(P,A,a){a.d(A,{V:function(){return O.V}}),a(73430);var O=a(38277)},73430:function(P,A,a){a.d(A,{C:function(){return w}});var D=a(39117),O=a(1884),t=a(12570),C=a(36362),n=a(59295),e=a(86613),g=a(97217),y=a(65590),f=a(40089);function T(o,_){1&o&&(e.TgZ(0,"th",13),e._uU(1," Index "),e.qZA())}function v(o,_){if(1&o&&(e.TgZ(0,"td",14),e._uU(1),e.qZA()),2&o){var i=_.$implicit,p=e.oxw();e.xp6(1),e.hij("",p.getParentIndex(i)," ")}}function M(o,_){1&o&&(e.TgZ(0,"th",13),e._uU(1," Source Text / Citation "),e.qZA())}function b(o,_){if(1&o&&(e.TgZ(0,"a",17),e._uU(1),e.qZA()),2&o){var i=e.oxw().$implicit;e.Q6J("href",i.url,e.LSH),e.xp6(1),e.Oqu(i.citation)}}function R(o,_){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&o){var i=e.oxw().$implicit;e.xp6(1),e.Oqu(i.citation)}}function I(o,_){if(1&o&&(e.TgZ(0,"td",14),e.YNc(1,b,2,2,"a",15),e.YNc(2,R,2,1,"span",16),e.qZA()),2&o){var i=_.$implicit;e.xp6(1),e.Q6J("ngIf",i.url),e.xp6(1),e.Q6J("ngIf",!i.url)}}function S(o,_){1&o&&(e.TgZ(0,"th",13),e._uU(1," Source Type "),e.qZA())}function U(o,_){if(1&o&&(e.TgZ(0,"td",14),e._uU(1),e.qZA()),2&o){var i=_.$implicit;e.xp6(1),e.hij(" ",i.docType," ")}}function N(o,_){1&o&&(e.TgZ(0,"th",13),e._uU(1," Tags "),e.qZA())}function d(o,_){if(1&o&&(e.TgZ(0,"span",20),e._uU(1),e.qZA()),2&o){var i=_.$implicit;e.xp6(1),e.hij(" ",i," ")}}function h(o,_){if(1&o){var i=e.EpF();e.TgZ(0,"a",21),e.NdJ("click",function(){e.CHM(i);var Z=e.oxw(3);return Z.showmore=!Z.showmore}),e._uU(1,"hide"),e.qZA()}}function u(o,_){if(1&o&&(e.TgZ(0,"span"),e.YNc(1,d,2,1,"span",18),e.YNc(2,h,2,0,"a",19),e.qZA()),2&o){var i=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",i.tags),e.xp6(1),e.Q6J("ngIf",i.tags.length>1)}}function c(o,_){if(1&o){var i=e.EpF();e.TgZ(0,"a",21),e.NdJ("click",function(){e.CHM(i);var Z=e.oxw(3);return Z.showmore=!Z.showmore}),e._uU(1,"more..."),e.qZA()}}function s(o,_){if(1&o&&(e.TgZ(0,"span"),e.TgZ(1,"span",20),e._uU(2),e.qZA(),e.YNc(3,c,2,0,"a",19),e.qZA()),2&o){var i=e.oxw().$implicit;e.xp6(2),e.hij(" ",i.tags.length>0?i.tags[0]:null,""),e.xp6(1),e.Q6J("ngIf",i.tags.length>1)}}function l(o,_){if(1&o&&(e.TgZ(0,"td",14),e.YNc(1,u,3,2,"span",16),e.YNc(2,s,4,2,"span",16),e.qZA()),2&o){var i=_.$implicit,p=e.oxw();e.xp6(1),e.Q6J("ngIf",p.showmore&&i.tags&&i.tags.length>0),e.xp6(1),e.Q6J("ngIf",!p.showmore&&i.tags&&i.tags.length>0)}}function r(o,_){1&o&&(e.TgZ(0,"th",22),e._uU(1," File "),e.qZA())}function m(o,_){if(1&o&&(e.TgZ(0,"a",24),e._UZ(1,"mat-icon",25),e.qZA()),2&o){var i=e.oxw().$implicit;e.Q6J("href",i.uploadedFile,e.LSH)}}function E(o,_){if(1&o&&(e.TgZ(0,"td",14),e.YNc(1,m,2,1,"a",23),e.qZA()),2&o){var i=_.$implicit;e.xp6(1),e.Q6J("ngIf",i.uploadedFile)}}function x(o,_){1&o&&(e.TgZ(0,"th",13),e._uU(1," Date Accessed "),e.qZA())}function Y(o,_){if(1&o&&(e.TgZ(0,"td",14),e._uU(1),e.qZA()),2&o){var i=_.$implicit,p=e.oxw();e.xp6(1),e.hij(" ",p.convertTimestamp(i.lastEdited)," ")}}function J(o,_){1&o&&(e.TgZ(0,"th",22),e._uU(1," Access "),e.qZA())}function B(o,_){1&o&&e._UZ(0,"mat-icon",30)}function F(o,_){if(1&o&&(e.TgZ(0,"span",28),e.YNc(1,B,1,0,"mat-icon",29),e.qZA()),2&o){var i=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",i.access.length)}}function Q(o,_){1&o&&e._UZ(0,"mat-icon",33)}function W(o,_){if(1&o&&(e.TgZ(0,"span",31),e.YNc(1,Q,1,0,"mat-icon",32),e.qZA()),2&o){var i=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",0===i.access.length)}}function k(o,_){if(1&o&&(e.TgZ(0,"td",14),e.YNc(1,F,2,1,"span",26),e.YNc(2,W,2,1,"span",27),e.qZA()),2&o){var i=_.$implicit;e.xp6(1),e.Q6J("ngIf",i.access.length),e.xp6(1),e.Q6J("ngIf",!i.access.length)}}function q(o,_){1&o&&e._UZ(0,"tr",34)}function K(o,_){1&o&&e._UZ(0,"tr",35)}var w=function(){var o=function(){function _(i){(0,D.Z)(this,_),this.substanceService=i,this.matchedRef=[],this.showmore=!1,this.displayedColumns=["index","citation","docType","tags","files","lastEdited","access"]}return(0,O.Z)(_,[{key:"ngOnInit",value:function(){var p=this;if(this.substance)this.subRef=this.substance.references;else if(this.subUUID)var Z=this.substanceService.getSubstanceDetails(this.subUUID).pipe((0,n.q)(1)).subscribe(function(L){L&&(p.substance=L,p.subRef=p.substance.references),Z.unsubscribe()},function(L){Z.unsubscribe()});this.subRef&&this.compileReferences()}},{key:"compileReferences",value:function(){var p=this;this.substance.references&&this.substance.references.forEach(function(Z){p.references.indexOf(Z.uuid)>-1&&p.matchedRef.push(Z)})}},{key:"convertTimestamp",value:function(p){return new C.uU("en-US").transform(p,"MMM dd, yyyy")}},{key:"getParentIndex",value:function(p){return this.subRef.indexOf(p)+1}}]),_}();return o.\u0275fac=function(i){return new(i||o)(e.Y36(t.d))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-references-manager"]],inputs:{substance:"substance",subUUID:"subUUID",references:"references"},decls:24,vars:3,consts:[["mat-table","",3,"dataSource"],["matColumnDef","index"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","citation"],["matColumnDef","docType"],["matColumnDef","tags"],["matColumnDef","files"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","lastEdited"],["matColumnDef","access"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["target","_blank","appTrackLinkEvent","","evCategory","substanceOverview",3,"href",4,"ngIf"],[4,"ngIf"],["target","_blank","appTrackLinkEvent","","evCategory","substanceOverview",3,"href"],["class","badge",4,"ngFor","ngForOf"],["class","morelink",3,"click",4,"ngIf"],[1,"badge"],[1,"morelink",3,"click"],["mat-header-cell","","mat-sort-header",""],[3,"href",4,"ngIf"],[3,"href"],["color","primary","svgIcon","cloud_download",1,"blue"],["matTooltip","Not Public",4,"ngIf"],["matTooltip","Public",4,"ngIf"],["matTooltip","Not Public"],["svgIcon","lock","class","icon-align blue-font",4,"ngIf"],["svgIcon","lock",1,"icon-align","blue-font"],["matTooltip","Public"],["svgIcon","lock_open","class","icon-align blue-font",4,"ngIf"],["svgIcon","lock_open",1,"icon-align","blue-font"],["mat-header-row",""],["mat-row",""]],template:function(i,p){1&i&&(e.TgZ(0,"table",0),e.ynx(1,1),e.YNc(2,T,2,0,"th",2),e.YNc(3,v,2,1,"td",3),e.BQk(),e.ynx(4,4),e.YNc(5,M,2,0,"th",2),e.YNc(6,I,3,2,"td",3),e.BQk(),e.ynx(7,5),e.YNc(8,S,2,0,"th",2),e.YNc(9,U,2,1,"td",3),e.BQk(),e.ynx(10,6),e.YNc(11,N,2,0,"th",2),e.YNc(12,l,3,2,"td",3),e.BQk(),e.ynx(13,7),e.YNc(14,r,2,0,"th",8),e.YNc(15,E,2,1,"td",3),e.BQk(),e.ynx(16,9),e.YNc(17,x,2,0,"th",2),e.YNc(18,Y,2,1,"td",3),e.BQk(),e.ynx(19,10),e.YNc(20,J,2,0,"th",8),e.YNc(21,k,3,2,"td",3),e.BQk(),e.YNc(22,q,1,0,"tr",11),e.YNc(23,K,1,0,"tr",12),e.qZA()),2&i&&(e.Q6J("dataSource",p.matchedRef),e.xp6(22),e.Q6J("matHeaderRowDef",p.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",p.displayedColumns))},directives:[g.BZ,g.w1,g.fO,g.ge,g.Dz,g.ev,C.O5,C.sg,y.Hw,f.gM,g.as,g.XQ,g.nj,g.Gk],styles:[".mat-row[_ngcontent-%COMP%]:nth-child(odd){background-color:var(--ref-manager-mat-row-nth-child-color)}.morelink[_ngcontent-%COMP%]{color:var(--link-color);padding-left:10px}"]}),o}()},38277:function(P,A,a){a.d(A,{V:function(){return y}});var D=a(1884),O=a(39117),t=a(36362),C=a(40089),n=a(65590),e=a(97217),g=a(86613),y=function(){var f=(0,D.Z)(function T(){(0,O.Z)(this,T)});return f.\u0275fac=function(v){return new(v||f)},f.\u0275mod=g.oAB({type:f}),f.\u0275inj=g.cJS({imports:[[t.ez,e.p0,n.Ps,C.AV]]}),f}()},17537:function(P,A,a){a.d(A,{h:function(){return N}});var D=a(39117),O=a(1884),t=a(86613),C=a(42827),n=a(54244),e=a(36362),g=a(90587),y=a(44770),f=a(43365),T=a(91434),v=a(1130),M=a(14900);function b(d,h){if(1&d&&(t.TgZ(0,"mat-option",20),t._uU(1),t.qZA()),2&d){var u=h.$implicit;t.Q6J("value",u.value),t.xp6(1),t.hij(" ",u.display," ")}}function R(d,h){if(1&d&&(t.TgZ(0,"mat-option",20),t._uU(1),t.qZA()),2&d){var u=h.$implicit;t.Q6J("value",u.value),t.xp6(1),t.hij(" ",u.display," ")}}function I(d,h){if(1&d&&(t.TgZ(0,"mat-option",20),t._uU(1),t.qZA()),2&d){var u=h.$implicit;t.Q6J("value",u.value),t.xp6(1),t.hij(" ",u.display," ")}}function S(d,h){1&d&&t._UZ(0,"div")}function U(d,h){if(1&d){var u=t.EpF();t.TgZ(0,"form",1),t.TgZ(1,"div",2),t.TgZ(2,"mat-form-field",3),t.TgZ(3,"input",4),t.NdJ("ngModelChange",function(l){return t.CHM(u),t.oxw().structure.formula=l}),t.qZA(),t.qZA(),t.TgZ(4,"mat-form-field",5),t.TgZ(5,"mat-label"),t._uU(6,"Stereochemistry"),t.qZA(),t.TgZ(7,"mat-select",6),t.NdJ("ngModelChange",function(l){return t.CHM(u),t.oxw().structure.stereochemistry=l}),t.YNc(8,b,2,2,"mat-option",7),t.qZA(),t.qZA(),t.TgZ(9,"mat-form-field",8),t.TgZ(10,"mat-label"),t._uU(11,"Optical Activity"),t.qZA(),t.TgZ(12,"mat-select",9),t.NdJ("ngModelChange",function(l){return t.CHM(u),t.oxw().structure.opticalActivity=l}),t.YNc(13,R,2,2,"mat-option",7),t.qZA(),t.qZA(),t.TgZ(14,"mat-form-field",10),t.TgZ(15,"mat-label"),t._uU(16,"Additional Stereochemistry"),t.qZA(),t.TgZ(17,"mat-select",11),t.NdJ("ngModelChange",function(l){return t.CHM(u),t.oxw().structure.atropisomerism=l}),t.YNc(18,I,2,2,"mat-option",7),t.qZA(),t.qZA(),t.qZA(),t.TgZ(19,"div",2),t.TgZ(20,"div",12),t.TgZ(21,"div",13),t._uU(22," Molecular Weight "),t.qZA(),t.TgZ(23,"div",14),t._uU(24),t.qZA(),t.qZA(),t.TgZ(25,"div",12),t.TgZ(26,"div",13),t._uU(27," Defined Stereocenters "),t.qZA(),t.TgZ(28,"div",14),t._uU(29),t.qZA(),t.qZA(),t.TgZ(30,"div",12),t.TgZ(31,"div",13),t._uU(32," EZ Centers "),t.qZA(),t.TgZ(33,"div",14),t._uU(34),t.qZA(),t.qZA(),t.TgZ(35,"div",12),t.TgZ(36,"div",13),t._uU(37," Structure Charge "),t.qZA(),t.TgZ(38,"div",14),t._uU(39),t.qZA(),t.qZA(),t.YNc(40,S,1,0,"div",15),t.qZA(),t.TgZ(41,"div",2),t.TgZ(42,"div",16),t.TgZ(43,"div",17),t._uU(44,"Stereo Comments"),t.qZA(),t.TgZ(45,"textarea",18),t.NdJ("ngModelChange",function(l){return t.CHM(u),t.oxw().structure.stereoComments=l}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(46,"div",2),t._UZ(47,"app-audit-info",19),t.qZA(),t.qZA()}if(2&d){var c=t.oxw();t.xp6(3),t.Q6J("ngModel",c.structure.formula),t.xp6(4),t.Q6J("ngModel",c.structure.stereochemistry),t.xp6(1),t.Q6J("ngForOf",c.stereoChemistryTypeList),t.xp6(4),t.Q6J("ngModel",c.structure.opticalActivity),t.xp6(1),t.Q6J("ngForOf",c.opticalActivityList),t.xp6(4),t.Q6J("ngModel",c.structure.atropisomerism),t.xp6(1),t.Q6J("ngForOf",c.atropisomerismList),t.xp6(6),t.hij(" ",c.structure.mwt," "),t.xp6(5),t.AsE(" ",c.structure.definedStereo," / ",c.structure.stereoCenters," "),t.xp6(5),t.hij(" ",c.structure.ezCenters," "),t.xp6(5),t.hij(" ",c.structure.charge," "),t.xp6(1),t.Q6J("ngIf",!c.hideAccess),t.xp6(5),t.Q6J("ngModel",c.structure.stereoComments),t.xp6(2),t.Q6J("source",c.structure)}}var N=function(){var d=function(){function h(u,c){(0,D.Z)(this,h),this.cvService=u,this.overlayContainerService=c,this.privateStructure={},this.stereoChemistryTypeList=[],this.opticalActivityList=[],this.atropisomerismList=[],this.hideAccess=!0,this.showSettings=!1,this.structureImported=new t.vpe,this.subscriptions=[]}return(0,O.Z)(h,[{key:"ngOnInit",value:function(){this.getVocabularies(),this.optical=this.privateStructure.opticalActivity}},{key:"ngOnDestroy",value:function(){this.subscriptions.forEach(function(c){c.unsubscribe()})}},{key:"structure",get:function(){return"NONE"===this.privateStructure.opticalActivity&&!this.inCV(this.opticalActivityList,this.privateStructure.opticalActivity)&&(this.privateStructure.opticalActivity="none"),this.privateStructure},set:function(c){null!=c&&(this.privateStructure=c,"NONE"===this.privateStructure.opticalActivity&&!this.inCV(this.opticalActivityList,this.privateStructure.opticalActivity)&&(this.privateStructure.opticalActivity="none"))}},{key:"getVocabularies",value:function(){var c=this;this.cvService.getDomainVocabulary("STEREOCHEMISTRY_TYPE","OPTICAL_ACTIVITY","ATROPISOMERISM").subscribe(function(s){c.stereoChemistryTypeList=s.STEREOCHEMISTRY_TYPE.list,c.opticalActivityList=s.OPTICAL_ACTIVITY.list,c.atropisomerismList=s.ATROPISOMERISM.list})}},{key:"updateAccess",value:function(c){this.privateStructure.access=c}},{key:"inCV",value:function(c,s){return!c||c.some(function(l){return s===l.value})}}]),h}();return d.\u0275fac=function(u){return new(u||d)(t.Y36(C.I),t.Y36(n.Xj))},d.\u0275cmp=t.Xpm({type:d,selectors:[["app-structure-form"]],inputs:{hideAccess:"hideAccess",showSettings:"showSettings",type:"type",structure:"structure"},outputs:{structureImported:"structureImported"},decls:1,vars:1,consts:[["class","structure-form",4,"ngIf"],[1,"structure-form"],[1,"form-row"],[1,"mol-formula"],["matInput","","placeholder","Molecular Formula","name","formula","required","",3,"ngModel","ngModelChange"],[1,"stereochemistry"],["name","stereochemistry",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"optical-activity"],["name","opticalActivity",3,"ngModel","ngModelChange"],[1,"atropisomerism"],["name","additionalStereochemistry",3,"ngModel","ngModelChange"],[1,"key-value-pair"],[1,"key"],[1,"value"],[4,"ngIf"],[1,"stereo-comments"],[1,"textarea-label"],["placeholder","Enter text here","name","stereoComments",3,"ngModel","ngModelChange"],[3,"source"],[3,"value"]],template:function(u,c){1&u&&t.YNc(0,U,48,15,"form",0),2&u&&t.Q6J("ngIf",c.structure&&"structure"===c.type)},directives:[e.O5,g._Y,g.JL,g.F,y.KE,f.Nt,g.Fj,g.Q7,g.JJ,g.On,y.hX,T.gD,e.sg,v.ey,M.n],styles:[".structure-form[_ngcontent-%COMP%]{padding:15px 7px}.form-row[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;-ms-flex-align:end;align-items:flex-end}.form-row[_ngcontent-%COMP%]   .mol-formula[_ngcontent-%COMP%], .form-row[_ngcontent-%COMP%]   .stereochemistry[_ngcontent-%COMP%], .form-row[_ngcontent-%COMP%]   .optical-activity[_ngcontent-%COMP%]{-ms-flex-positive:1;flex-grow:1;padding-right:15px}.form-row[_ngcontent-%COMP%]   .atropisomerism[_ngcontent-%COMP%]{-ms-flex-positive:1;flex-grow:1}.polymer-form[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex}.key-value-pair[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column}.key-value-pair[_ngcontent-%COMP%]   .key[_ngcontent-%COMP%]{font-size:11px;padding-bottom:4px}.stereo-comments[_ngcontent-%COMP%]{width:100%;padding-top:10px}.settings_container[_ngcontent-%COMP%]{padding-left:7px}.settings_container[_ngcontent-%COMP%]   .mat-icon-button[_ngcontent-%COMP%]{width:45px;height:45px}.settings_container[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{width:35px;height:35px}.WARNING[_ngcontent-%COMP%]{color:var(--warning-dialog-color);background-color:var(--warning-dialog-bg-color)}.ERROR[_ngcontent-%COMP%]{color:var(--error-dialog-color);background-color:var(--error-dialog-bg-color)}.dupe-check[_ngcontent-%COMP%]{margin-bottom:5px}.internal-link[_ngcontent-%COMP%]{color:var(--link-primary-color)}"]}),d}()},22544:function(P,A,a){a.d(A,{h:function(){return c}});var D=a(39117),O=a(1884),t=a(12570),C=a(95758),n=a(86613),e=a(93392),g=a(36362),y=a(87317);function f(s,l){if(1&s&&(n.TgZ(0,"div"),n._uU(1),n.qZA()),2&s){var r=n.oxw();n.xp6(1),n.hij(" Are you sure you'd like to restore version ",r.version,"? ")}}function T(s,l){1&s&&(n.TgZ(0,"div"),n._uU(1," Restoring... "),n.qZA())}function v(s,l){1&s&&(n.TgZ(0,"div"),n._uU(1," Record restored successfullly. Close this dialog to redirect to the new version. "),n.qZA())}function M(s,l){if(1&s){var r=n.EpF();n.TgZ(0,"div"),n.TgZ(1,"div"),n._uU(2," There was a problem restoring this version. "),n.qZA(),n.TgZ(3,"div"),n._uU(4,"Would you like to see the error details?"),n.qZA(),n.TgZ(5,"a",9),n.NdJ("click",function(){return n.CHM(r),n.oxw().status="error"}),n._uU(6,"Show errors"),n.qZA(),n.qZA()}}function b(s,l){if(1&s&&(n.TgZ(0,"div",13),n._uU(1),n.qZA()),2&s){var r=l.$implicit;n.xp6(1),n.hij(" ",r.message.message?r.message.message:r.message," ")}}function R(s,l){if(1&s&&(n.TgZ(0,"span"),n.YNc(1,b,2,1,"div",12),n.qZA()),2&s){var r=n.oxw(3);n.xp6(1),n.Q6J("ngForOf",r.validationMessages)}}function I(s,l){if(1&s&&(n.TgZ(0,"div"),n.YNc(1,R,2,1,"span",3),n.qZA()),2&s){var r=n.oxw(2);n.xp6(1),n.Q6J("ngIf",r.validationMessages.length>0)}}function S(s,l){if(1&s&&(n.TgZ(0,"div"),n._uU(1),n.qZA()),2&s){var r=n.oxw(2);n.xp6(1),n.hij(" ",r.serverError," ")}}function U(s,l){1&s&&(n.TgZ(0,"div"),n.TgZ(1,"i"),n._uU(2,"No error information returned from the server"),n.qZA(),n.qZA())}function N(s,l){if(1&s&&(n.TgZ(0,"div",10),n.TgZ(1,"div",11),n._uU(2," Error restoring record. Here is some information on the error to share with a system admin / developers. "),n.qZA(),n.YNc(3,I,2,1,"div",3),n.YNc(4,S,2,1,"div",3),n.YNc(5,U,3,0,"div",3),n.qZA()),2&s){var r=n.oxw();n.xp6(3),n.Q6J("ngIf",r.validationMessages),n.xp6(1),n.Q6J("ngIf",r.serverError),n.xp6(1),n.Q6J("ngIf",!r.validationMessages&&!r.serverError)}}function d(s,l){1&s&&(n.TgZ(0,"button",14),n._uU(1,"Cancel"),n.qZA())}function h(s,l){if(1&s){var r=n.EpF();n.TgZ(0,"button",15),n.NdJ("click",function(){return n.CHM(r),n.oxw().accept()}),n._uU(1,"Accept"),n.qZA()}}function u(s,l){if(1&s){var r=n.EpF();n.TgZ(0,"button",15),n.NdJ("click",function(){return n.CHM(r),n.oxw().close()}),n._uU(1,"Close"),n.qZA()}}var c=function(){var s=function(){function l(r,m,E,x){(0,D.Z)(this,l),this.loadingService=r,this.substanceService=m,this.dialogRef=E,this.data=x}return(0,O.Z)(l,[{key:"ngOnInit",value:function(){this.substance=this.data.substance,this.latest=this.data.latest,this.version=this.data.version,this.status="start"}},{key:"close",value:function(){this.dialogRef.close("success")}},{key:"accept",value:function(){var m=this;this.status="running",this.loadingService.setLoading(!0),this.substanceService.getSubstanceDetails(this.substance.uuid,this.version).subscribe(function(E){m.substance.changeReason="reverted to version "+m.version,m.substance.version=m.latest,m.substanceService.saveSubstance(m.substance).subscribe(function(x){m.substance=x,m.status="complete",m.loadingService.setLoading(!1)},function(x){m.status="failed",m.loadingService.setLoading(!1),x&&x.error&&x.error.validationMessages?m.validationMessages=x.error.validationMessages:m.serverError=x})},function(E){m.status="failed",m.loadingService.setLoading(!1),console.log(E)})}}]),l}();return s.\u0275fac=function(r){return new(r||s)(n.Y36(e.b),n.Y36(t.d),n.Y36(C.so),n.Y36(C.WI))},s.\u0275cmp=n.Xpm({type:s,selectors:[["app-substance-history-dialog"]],decls:15,vars:8,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[1,"main-text"],[4,"ngIf"],["class","errors",4,"ngIf"],["mat-dialog-actions",""],["mat-flat-button","","color","primary","matDialogClose","",4,"ngIf"],[1,"middle-fill"],["mat-flat-button","","color","primary",3,"click",4,"ngIf"],[1,"primary-color",3,"click"],[1,"errors"],[1,"error-title"],["class","validation-message",4,"ngFor","ngForOf"],[1,"validation-message"],["mat-flat-button","","color","primary","matDialogClose",""],["mat-flat-button","","color","primary",3,"click"]],template:function(r,m){1&r&&(n.TgZ(0,"div",0),n.TgZ(1,"h3"),n._uU(2,"Version Control"),n.qZA(),n.qZA(),n.TgZ(3,"div",1),n.TgZ(4,"div",2),n.YNc(5,f,2,1,"div",3),n.YNc(6,T,2,0,"div",3),n.YNc(7,v,2,0,"div",3),n.YNc(8,M,7,0,"div",3),n.qZA(),n.YNc(9,N,6,3,"div",4),n.qZA(),n.TgZ(10,"div",5),n.YNc(11,d,2,0,"button",6),n._UZ(12,"span",7),n.YNc(13,h,2,0,"button",8),n.YNc(14,u,2,0,"button",8),n.qZA()),2&r&&(n.xp6(5),n.Q6J("ngIf","start"===m.status),n.xp6(1),n.Q6J("ngIf","running"===m.status),n.xp6(1),n.Q6J("ngIf","complete"===m.status),n.xp6(1),n.Q6J("ngIf","failed"===m.status),n.xp6(1),n.Q6J("ngIf","error"===m.status),n.xp6(2),n.Q6J("ngIf","complete"!==m.status),n.xp6(2),n.Q6J("ngIf","start"===m.status),n.xp6(1),n.Q6J("ngIf","complete"===m.status))},directives:[C.uh,C.xY,g.O5,g.sg,C.H8,y.lW,C.ZT],styles:[".main-text[_ngcontent-%COMP%]{font-size:18px;display:-ms-flexbox;display:flex;width:100%;margin-bottom:20px;min-height:50px}.validation-message[_ngcontent-%COMP%]{padding-bottom:12px}.primary-color[_ngcontent-%COMP%]{color:var(--link-primary-color)}.error-title[_ngcontent-%COMP%]{padding-bottom:20px}"]}),s}()}}]);
//# sourceMappingURL=common.d5ed4c444bdec56b.js.map