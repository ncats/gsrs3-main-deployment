(self.webpackChunkgsrs_client=self.webpackChunkgsrs_client||[]).push([[4874],{54874:function(S,C,s){"use strict";s.r(C),s.d(C,{SubstanceFormSubunitsModule:function(){return ht}});var c=s(48047),a=s(78069),g=s(36362),y=s(75143),v=s(24582),x=s(7318),O=s(33567),_=s(40104),q=(s(27299),s(79550)),A=s(18291),r=s(39401),l=s(39233),t=s(76442),d=s(78444),T=s(95758),U=s(66088),k=s(87317),I=s(65590),N=s(31959),F=s(51279),D=s(15541),E=s(21109);function $(u,f){if(1&u){var n=t.EpF();t.TgZ(0,"button",12),t.NdJ("click",function(){t.CHM(n);var i=t.oxw(2).$implicit;return t.oxw(2).select(i.subunitIndex)}),t._uU(1),t.qZA()}if(2&u){var e=t.oxw(2).$implicit;t.xp6(1),t.hij(" Copy From Subunit ",e.subunitIndex," ")}}function j(u,f){if(1&u&&(t.TgZ(0,"div",10),t.YNc(1,$,2,1,"button",11),t.qZA()),2&u){var n=t.oxw().$implicit,e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",n.subunitIndex!==e.unit)}}function L(u,f){if(1&u&&(t.TgZ(0,"div",10),t._uU(1),t.qZA()),2&u){var n=t.oxw().$implicit;t.xp6(1),t.hij(" Subunit ",n.subunitIndex," is not applicable ")}}function z(u,f){if(1&u&&(t.TgZ(0,"div",8),t.YNc(1,j,2,1,"div",9),t.YNc(2,L,2,1,"div",9),t.qZA()),2&u){var n=f.$implicit,e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",n.sequence==e.sequence),t.xp6(1),t.Q6J("ngIf",n.sequence!==e.sequence)}}function H(u,f){if(1&u&&(t.TgZ(0,"span"),t.YNc(1,z,3,2,"div",7),t.qZA()),2&u){var n=t.oxw();t.xp6(1),t.Q6J("ngForOf",n.units)}}function V(u,f){if(1&u){var n=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"div",13),t._uU(2),t.qZA(),t.TgZ(3,"div",13),t.TgZ(4,"button",12),t.NdJ("click",function(){return t.CHM(n),t.oxw().confirm()}),t._uU(5,"Confirm"),t.qZA(),t._UZ(6,"span",6),t.TgZ(7,"button",12),t.NdJ("click",function(){return t.CHM(n),t.oxw().cancel()}),t._uU(8,"Cancel"),t.qZA(),t.qZA(),t.qZA()}if(2&u){var e=t.oxw();t.xp6(2),t.lnq(" Are you sure you want to copy the disulfide links from subunit ",e.selected," to subunit ",e.unit,"? Any disulfide links on subunit ",e.unit," will be erased and overwritten. ")}}function G(u,f){if(1&u&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&u){var n=t.oxw();t.xp6(1),t.hij(" ",n.message,"\n")}}var X=function(){var u=function(){function f(n,e){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,a.Z)(this,f),this.dialogRef=n,this.subService=e,this.data=o,this.showButtons=!0,n.disableClose=!0}return(0,c.Z)(f,[{key:"ngOnInit",value:function(){var e=this;this.unit=this.data.unit,this.sequence=this.data.full.sequence,this.subService.substanceSubunits.subscribe(function(o){e.units=o})}},{key:"select",value:function(e){this.selected=e,this.showButtons=!1}},{key:"confirm",value:function(){var e=this;this.subService.copyDisulfideLinks(this.unit,this.selected),this.selected=null,this.message="Copying...",setTimeout(function(){e.message="Links successfully copied over."},500)}},{key:"cancel",value:function(){this.selected=null,this.showButtons=!0}}]),f}();return u.\u0275fac=function(n){return new(n||u)(t.Y36(T.so),t.Y36(O.B),t.Y36(T.WI))},u.\u0275cmp=t.Xpm({type:u,selectors:[["app-copy-disulfide-dialog"]],decls:12,vars:3,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[1,"form-row","desc"],[4,"ngIf"],["mat-dialog-actions",""],["mat-flat-button","","color","primary","matDialogClose",""],[1,"middle-fill"],["class","form-column",4,"ngFor","ngForOf"],[1,"form-column"],["class","option",4,"ngIf"],[1,"option"],["mat-button","",3,"click",4,"ngIf"],["mat-button","",3,"click"],[1,"form-row"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0),t._uU(1," Copy Disulfide Links "),t.qZA(),t.TgZ(2,"div",1),t.TgZ(3,"div",2),t._uU(4," Copy intra-connected disulfide links from one subunit to another with an identical sequence. "),t.qZA(),t.YNc(5,H,2,1,"span",3),t.qZA(),t.YNc(6,V,9,3,"div",3),t.YNc(7,G,2,1,"div",3),t.TgZ(8,"div",4),t.TgZ(9,"button",5),t._uU(10,"Close"),t.qZA(),t._UZ(11,"span",6),t.qZA()),2&n&&(t.xp6(5),t.Q6J("ngIf",e.showButtons),t.xp6(1),t.Q6J("ngIf",e.selected),t.xp6(1),t.Q6J("ngIf",e.message))},directives:[T.uh,T.xY,g.O5,g.sg,k.lW,T.H8,T.ZT],styles:[".form-row[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex;width:100%;-ms-flex-direction:row;flex-direction:row;margin-bottom:15px}.option[_ngcontent-%COMP%]{padding:10px}.desc[_ngcontent-%COMP%]{margin-bottom:30px}"]}),u}(),W=s(98002),R=s(40089),Y=s(90587),K=s(14900);function tt(u,f){1&u&&(t.TgZ(0,"div",24),t._uU(1," Deleted\xa0 "),t.qZA())}function et(u,f){if(1&u){var n=t.EpF();t.TgZ(0,"button",25),t.NdJ("click",function(){return t.CHM(n),t.oxw().convertSequence()}),t._uU(1," convert"),t.qZA()}}function nt(u,f){if(1&u){var n=t.EpF();t.TgZ(0,"button",26),t.NdJ("click",function(){return t.CHM(n),t.oxw().copyDisulfides()}),t._uU(1," copy disulfide links"),t.qZA()}}function it(u,f){if(1&u&&(t.TgZ(0,"span",36),t.TgZ(1,"span",37),t._uU(2),t.qZA(),t.qZA()),2&u){var n=f.$implicit,e=t.oxw(4);t.xp6(1),t.s9C("matTooltip",e.getTooltipMessage(e.subunitSequence.subunitIndex,n.unitIndex,n.unitValue,n.class||"").join("\n")),t.Q6J("ngClass",n.class),t.xp6(1),t.Oqu(n.unitValue)}}function st(u,f){if(1&u&&(t.TgZ(0,"div",32),t.TgZ(1,"div",33),t._uU(2),t.qZA(),t.TgZ(3,"div",34),t.YNc(4,it,3,3,"span",35),t.qZA(),t.qZA()),2&u){var n=f.$implicit,e=f.last,o=t.oxw().last,i=t.oxw(2);t.Q6J("ngClass",o&&e?"last-section":""),t.xp6(2),t.Oqu(n[1]),t.xp6(2),t.Q6J("ngForOf",i.subunitSequence.subunits.slice(n[0],n[1]))}}function ot(u,f){if(1&u&&(t.TgZ(0,"div",30),t.YNc(1,st,5,3,"div",31),t.qZA()),2&u){var n=f.$implicit;t.xp6(1),t.Q6J("ngForOf",n)}}function ut(u,f){if(1&u&&(t.TgZ(0,"div",27),t.TgZ(1,"div",28),t.YNc(2,ot,2,1,"div",29),t.qZA(),t.qZA()),2&u){var n=t.oxw();t.xp6(2),t.Q6J("ngForOf",n.subunitSequence.subsections)}}function rt(u,f){if(1&u){var n=t.EpF();t.TgZ(0,"div"),t._uU(1),t.TgZ(2,"button",38),t.NdJ("click",function(){return t.CHM(n),t.oxw().generateSites("DNA")}),t._uU(3,"DNA"),t.qZA(),t.TgZ(4,"button",38),t.NdJ("click",function(){return t.CHM(n),t.oxw().generateSites("RNA")}),t._uU(5,"RNA"),t.qZA(),t._uU(6," sequence "),t.qZA()}if(2&u){var e=t.oxw();t.xp6(1),t.hij(" Generate",e.sequenceType?"d":""," links and sugars for this subunit as a "),t.xp6(1),t.Q6J("ngClass","DNA"===e.sequenceType?"generated":""),t.xp6(2),t.Q6J("ngClass","RNA"===e.sequenceType?"generated":"")}}var at=function(){var u=function(){function f(n,e,o,i,p,b,m,P){(0,a.Z)(this,f),this.substanceFormService=n,this.substanceFormLinksService=e,this.scrollToService=o,this.gaService=i,this.cvService=p,this.dialog=b,this.overlayContainerService=m,this.router=P,this.subunitDeleted=new t.vpe,this.vocabulary={},this.subscriptions=[],this.toggle={},this.allSites=[],this.features=[],this.sequenceSites=[],this.sequenceType="",this.validArray=[]}return(0,c.Z)(f,[{key:"ngOnInit",value:function(){var e=this;this.allSites=[],this.overlayContainer=this.overlayContainerService.getContainerElement(),""===this.subunit.sequence&&(this.toggle[this.subunit.subunitIndex]=!0),this.substanceFormService.definition.subscribe(function(i){e.substanceType=i.substanceClass,e.searchType="protein"===e.substanceType?"Protein":"Nucleicacid",e.getVocabularies()}).unsubscribe()}},{key:"ngAfterViewInit",value:function(){var e=this;setTimeout(function(){var i=e.substanceFormService.subunitDisplaySequences.subscribe(function(p){var b=p.filter(function(m){return m.subunitIndex===e.subunit.subunitIndex})[0];(!e.subunitSequence||!D(e.subunitSequence,b))&&(e.subunitSequence&&JSON.stringify(e.subunitSequence)!==JSON.stringify(b)?(e.subunitSequence=b,setTimeout(function(){e.allSites&&e.addStyle()})):e.subunitSequence=b)});e.subscriptions.push(i)});var o=this.substanceFormService.allSites.subscribe(function(i){var p=[];i.forEach(function(b){b.subunit===e.subunit.subunitIndex&&p.push(b)}),e.allSites&&e.allSites!==p?(e.allSites=p,setTimeout(function(){e.subunitSequence&&e.addStyle()})):e.allSites||(e.allSites=p)});this.subscriptions.push(o),setTimeout(function(){})}},{key:"ngOnChanges",value:function(e){}},{key:"ngOnDestroy",value:function(){this.subscriptions.forEach(function(e){e.unsubscribe()})}},{key:"getVocabularies",value:function(){var e=this,o={value:"X",display:"Non-standard Residue"};"protein"===this.substanceType?this.cvService.getDomainVocabulary("AMINO_ACID_RESIDUE").subscribe(function(i){for(var p in e.vocabulary=i.AMINO_ACID_RESIDUE.dictionary,e.vocabulary.X=o,e.vocabulary)e.validArray.push(e.vocabulary[p].value)},function(i){}):this.cvService.getDomainVocabulary("NUCLEIC_ACID_BASE").subscribe(function(i){for(var p in e.vocabulary=i.NUCLEIC_ACID_BASE.dictionary,e.vocabulary.X=o,e.vocabulary)e.validArray.push(e.vocabulary[p].value)},function(i){})}},{key:"addStyle",value:function(){var e=this;this.subunitSequence&&this.subunitSequence.subunits&&this.allSites.forEach(function(o){e.subunitSequence.subunits&&(e.subunitSequence.subunits[o.residue-1].class=e.subunitSequence.subunits[o.residue-1].class&&e.subunitSequence.subunits[o.residue-1].class!==o.type?e.subunitSequence.subunits[o.residue-1].class+" "+o.type:o.type)})}},{key:"getTooltipMessage",value:function(e,o,i,p){var b=void 0===this.vocabulary[i.toUpperCase()]?"UNDEFINED":this.vocabulary[i.toUpperCase()].display,m=[],P={modification:"Structural Modification",other:"Other Link","C-Glycosylation":"C-Glycosylation","N-Glycosylation":"N-Glycosylation","O-Glycosylation":"O-Glycosylation",feature:this.substanceType.toUpperCase()+" Feature",disulfide:"Disulfide Link"};return m.push("".concat(e," - ").concat(o,": ").concat(i.toUpperCase()," (").concat(b,")")),p.split(" ").forEach(function(h){m.push(P[h]||"")}),m}},{key:"copyDisulfides",value:function(){var e=this,o=this.dialog.open(X,{data:{unit:this.subunit.subunitIndex,full:this.subunit},width:"600px"});this.overlayContainer.style.zIndex="1002",o.afterClosed().subscribe(function(p){e.overlayContainer.style.zIndex=null})}},{key:"search",value:function(){var e=this.makeRandom();sessionStorage.setItem("gsrs_edit_sequence_"+e,JSON.stringify(this.subunit.sequence));var i=window.location.href.replace(this.router.url,"")+this.router.serializeUrl(this.router.createUrlTree(["/sequence-search"],{queryParams:{seq_type:this.searchType,source:"edit",source_id:e}}));window.open(i,"_blank")}},{key:"makeRandom",value:function(){for(var e="",o="ABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890",i=0;i<6;i++)e+=o.charAt(Math.floor(Math.random()*o.length));return e}},{key:"editSubunit",value:function(e,o){this.toggle[e.subunitIndex]=!this.toggle[e.subunitIndex],!1===this.toggle[e.subunitIndex]?(this.subunit.sequence=o.trim().replace(/\s/g,""),this.substanceFormService.emitSubunitUpdate(),this.substanceFormService.recalculateCysteine()):(this.editSequence=this.preformatSeq(this.subunit.sequence),setTimeout(function(){var i=document.getElementsByClassName("sequence-textarea");[].forEach.call(i,function(p){p.style.height=p.scrollHeight+10+"px"})}))}},{key:"change",value:function(e){!1===this.toggle[this.subunit.subunitIndex]&&(e.target.value=this.subunit.sequence)}},{key:"deleteSubunit",value:function(){this.subunitDeleted.emit(this.subunit)}},{key:"preformatSeq",value:function(e){var o="";if(e)for(var i=0;i<e.length;i+=10)i%50==0&&(o+="\n"),o+=e.substr(i,10)+"     ";return o.trim()}},{key:"cleanSequence",value:function(){var e=this;if(this.toggle[this.subunit.subunitIndex]){var b=this.editSequence.replace(/\s/g,"").split("").filter(function(m){return e.validArray.indexOf(m.toUpperCase())>=0}).toString().replace(/,/g,"").trim();"protein"!==this.substanceType&&(b=b.toUpperCase()),this.editSequence=this.preformatSeq(b)}else{var i=this.subunit.sequence.split("").filter(function(m){return e.validArray.indexOf(m.toUpperCase())>=0}).toString().replace(/,/g,"").trim();"protein"!==this.substanceType&&(i=i.toUpperCase()),i!==this.subunit.sequence&&(this.subunit.sequence=i,this.substanceFormService.emitSubunitUpdate(),this.substanceFormService.recalculateCysteine())}}},{key:"convertSequence",value:function(){var i=[],p={},b="";i="A\tAla;C\tCys;D\tAsp;E\tGlu;F\tPhe;G\tGly;H\tHis;I\tIle;K\tLys;L\tLeu;M\tMet;N\tAsn;P\tPro;Q\tGln;R\tArg;S\tSer;T\tThr;V\tVal;W\tTrp;Y\tTyr".split(";");for(var m=0;m<i.length;m++){var P=[];p[(P=i[m].split("\t"))[0]]=P[1],p[P[1].toUpperCase()]=P[0]}var M=[];M=this.toggle[this.subunit.subunitIndex]?this.editSequence.replace(/[ ]/g,"-").split("-"):this.subunit.sequence.replace(/[ ]/g,"-").split("-");for(var h=0;h<M.length;h++){var J=p[M[h].toUpperCase()];M[h].length>3?b+=M[h]:(void 0===J&&(J="X"),b+=J)}this.toggle[this.subunit.subunitIndex]?this.editSequence=b:(this.subunit.sequence=b,this.substanceFormService.emitSubunitUpdate(),this.substanceFormService.recalculateCysteine())}},{key:"generateSites",value:function(e){var o=this;this.sequenceType=e;var b,i=this.substanceFormService.substanceSugars.subscribe(function(w){o.sugars=w}),p=this.substanceFormLinksService.substanceLinks.subscribe(function(w){o.links=w});b="DNA"===e?"dR":"R",this.sugars.forEach(function(w){w.sites=w.sites.filter(function(Q){return Q.subunitIndex!==o.subunit.subunitIndex})});var m=[];if(null!=this.subunit&&null!=this.subunit.sequence)for(var P=1;P<=this.subunit.sequence.length;P++)m.push({subunitIndex:this.subunit.subunitIndex,residueIndex:P});this.sugars.push({sugar:b,sites:m}),this.links.forEach(function(w){w.sites=w.sites.filter(function(Q){return Q.subunitIndex!==o.subunit.subunitIndex})});var h=[];if(null!=this.subunit&&null!=this.subunit.sequence)for(var J=2;J<=this.subunit.sequence.length;J++)h.push({subunitIndex:this.subunit.subunitIndex,residueIndex:J});this.links.push({linkage:"P",sites:h}),this.substanceFormService.emitSugarUpdate(),this.substanceFormService.emitLinkUpdate(),p.unsubscribe(),i.unsubscribe()}}]),f}();return u.\u0275fac=function(n){return new(n||u)(t.Y36(O.B),t.Y36(E.e),t.Y36(d.i),t.Y36(_.$),t.Y36(A.I),t.Y36(T.uw),t.Y36(U.Xj),t.Y36(W.F0))},u.\u0275cmp=t.Xpm({type:u,selectors:[["app-subunit-form"]],inputs:{subunit:"subunit",view:"view",sites:"sites"},outputs:{subunitDeleted:"subunitDeleted"},features:[t.TTD],decls:30,vars:12,consts:[[1,"subunit-container"],["class","notification-backdrop",4,"ngIf"],[1,"form-row"],[1,"delete-container"],["mat-icon-button","","matTooltip","Delete link",3,"click"],["svgIcon","delete_forever"],[1,"subunit-label"],[1,"buttons"],[1,"mat-button","mat-primary","action-button",3,"click"],[1,"mat-button","action-button","mat-primary",3,"click"],[1,"spacer"],["class","mat-button action-button mat-primary convert","matTooltip","convert 3 letter sequence to 1 letter",3,"click",4,"ngIf"],["matTooltip","search for sequence in a new tab",1,"button-link",3,"click"],["class","mat-button action-button mat-primary","matTooltip","copy disulfides from another subunit",3,"click",4,"ngIf"],[1,"subunit-edit",3,"ngClass"],["cdkAutosizeMinRows","3","placeholder","Enter sequence here","name","edit",1,"sequence-textarea",3,"ngModel","ngModelChange","change"],["sequence",""],[3,"ngClass"],[1,"nest"],[1,"subunit"],[1,"raw-sequence"],["class","subunit-sequence",4,"ngIf"],[4,"ngIf"],[3,"source"],[1,"notification-backdrop"],["matTooltip","convert 3 letter sequence to 1 letter",1,"mat-button","action-button","mat-primary","convert",3,"click"],["matTooltip","copy disulfides from another subunit",1,"mat-button","action-button","mat-primary",3,"click"],[1,"subunit-sequence"],[1,"responsive"],["class","sequence-section-group",4,"ngFor","ngForOf"],[1,"sequence-section-group"],["class","sequence-section",3,"ngClass",4,"ngFor","ngForOf"],[1,"sequence-section",3,"ngClass"],[1,"section-number"],[1,"section-units-container"],["class","section-unit",4,"ngFor","ngForOf"],[1,"section-unit"],["matTooltipClass","unit-tooltip",1,"selectedSite","siteref",3,"matTooltip","ngClass"],["mat-button","",3,"ngClass","click"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0),t.YNc(1,tt,2,0,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"div",3),t.TgZ(4,"button",4),t.NdJ("click",function(){return e.deleteSubunit()}),t._UZ(5,"mat-icon",5),t.qZA(),t.qZA(),t.TgZ(6,"div",6),t._uU(7),t.qZA(),t.TgZ(8,"div",7),t.TgZ(9,"button",8),t.NdJ("click",function(){return e.editSubunit(e.subunit,e.editSequence)}),t._uU(10),t.qZA(),t.TgZ(11,"button",9),t.NdJ("click",function(){return e.cleanSequence()}),t._uU(12," clean"),t.qZA(),t._UZ(13,"span",10),t.YNc(14,et,2,0,"button",11),t.TgZ(15,"a",12),t.NdJ("click",function(){return e.search()}),t._uU(16,"sequence search"),t.qZA(),t.YNc(17,nt,2,0,"button",13),t.qZA(),t.qZA(),t.TgZ(18,"div",14),t.TgZ(19,"textarea",15,16),t.NdJ("ngModelChange",function(i){return e.editSequence=i})("change",function(){return e.editSubunit(e.subunit,e.editSequence)}),t.qZA(),t.qZA(),t.TgZ(21,"div",17),t.TgZ(22,"div",18),t.TgZ(23,"div",19),t.TgZ(24,"div",20),t._uU(25),t.qZA(),t.qZA(),t.qZA(),t.YNc(26,ut,3,1,"div",21),t.qZA(),t.TgZ(27,"div",2),t.YNc(28,rt,7,3,"div",22),t.qZA(),t._UZ(29,"app-audit-info",23),t.qZA()),2&n&&(t.xp6(1),t.Q6J("ngIf",e.subunit.$$deletedCode),t.xp6(6),t.hij("Subunit ",e.subunit.subunitIndex,""),t.xp6(3),t.hij(" ",e.toggle[e.subunit.subunitIndex]?"save":"edit",""),t.xp6(4),t.Q6J("ngIf","nucleicAcid"!==e.substanceType),t.xp6(3),t.Q6J("ngIf","protein"===e.substanceType),t.xp6(1),t.Q6J("ngClass",e.toggle[e.subunit.subunitIndex]?"show":"hide"),t.xp6(1),t.Q6J("ngModel",e.editSequence),t.xp6(2),t.Q6J("ngClass",e.toggle[e.subunit.subunitIndex]?"hide":"show"),t.xp6(4),t.Oqu(e.subunit.sequence),t.xp6(1),t.Q6J("ngIf",e.subunitSequence),t.xp6(2),t.Q6J("ngIf","nucleicAcid"===e.substanceType),t.xp6(1),t.Q6J("source",e.subunit))},directives:[g.O5,k.lW,R.gM,I.Hw,g.mk,Y.Fj,Y.JJ,Y.On,g.sg,K.n],styles:[".details[_ngcontent-%COMP%]   .subunit[_ngcontent-%COMP%]{display:none}.details[_ngcontent-%COMP%]   .subunit-sequence[_ngcontent-%COMP%]{display:block}.sequence-textarea[_ngcontent-%COMP%]{font-size:14px;letter-spacing:2px}.show[_ngcontent-%COMP%]{display:block}.hide[_ngcontent-%COMP%]{display:none}.raw[_ngcontent-%COMP%]   .subunit[_ngcontent-%COMP%]{display:block}.raw[_ngcontent-%COMP%]   .subunit-sequence[_ngcontent-%COMP%]{display:none}.subunit-sequence[_ngcontent-%COMP%]{margin-bottom:30px}.sequence-section-group[_ngcontent-%COMP%]{width:100%;display:-ms-flexbox;display:flex;margin-bottom:10px}.section-number[_ngcontent-%COMP%]{text-align:right;padding:0 10px;font-size:.8em}.sequence-section[_ngcontent-%COMP%]{-ms-flex-positive:0;flex-grow:0;padding:0 10px;-ms-flex-preferred-size:20%;flex-basis:20%;-ms-flex-negative:0;flex-shrink:0}.section-units-container[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex}.section-units-container[_ngcontent-%COMP%]   .section-unit[_ngcontent-%COMP%]:hover{cursor:default}.subunit[_ngcontent-%COMP%]{padding-top:5px;padding-bottom:20px}.subunit[_ngcontent-%COMP%]:not(:last-child){border-bottom:solid 1px rgba(0,0,0,.12)}.raw-sequence[_ngcontent-%COMP%]{word-break:break-all;line-height:26px}.filters-container[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex;-ms-flex-pack:end;justify-content:flex-end}.subunit-form-container[_ngcontent-%COMP%]{padding:30px 10px 12px;position:relative}.notification-backdrop[_ngcontent-%COMP%]{position:absolute;top:0;right:0;bottom:0;left:0;display:-ms-flexbox;display:flex;z-index:10;background-color:#fffc;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center;font-size:30px;font-weight:700;color:#666}.form-row[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex;-ms-flex-align:start;align-items:flex-start;margin-top:20px}.delete-container[_ngcontent-%COMP%]{padding:0 10px 8px 0;width:30px}.subunit-label[_ngcontent-%COMP%]{font-size:18px;font-weight:400;padding-top:0;margin-top:10px;padding-left:30px;width:20%}.buttons[_ngcontent-%COMP%]{width:75%;display:-ms-flexbox;display:flex}.action-button[_ngcontent-%COMP%]{margin:5px}.glycosylation[_ngcontent-%COMP%]{color:#fff;background-color:#006400}.disulfide[_ngcontent-%COMP%]{color:#fff;background-color:#cca300}.other[_ngcontent-%COMP%]{color:#fff;background-color:#483d8b}.glycosylation[_ngcontent-%COMP%]{color:#fff;background-color:#608000}.N-Glycosylation[_ngcontent-%COMP%]{color:#fff;background-color:#06c}.C-Glycosylation[_ngcontent-%COMP%]{color:#fff;background-color:gray}.O-Glycosylation[_ngcontent-%COMP%]{color:#fff;background-color:#f66}.feature[_ngcontent-%COMP%]{border-top:1px solid magenta;border-bottom:1px solid magenta}.modification[_ngcontent-%COMP%]{color:#fff;background-color:#556b2f}.selectedSite[_ngcontent-%COMP%]{display:block;text-align:center}.last-section[_ngcontent-%COMP%]{-ms-flex-preferred-size:0!important;flex-basis:0!important}.siteref[_ngcontent-%COMP%]{display:block;width:15.5px!important;text-align:center}.generated[_ngcontent-%COMP%]{background-color:#00000026}.subunit-container[_ngcontent-%COMP%]{padding:5px}.button-link[_ngcontent-%COMP%]{color:#4793d1;text-decoration:none;vertical-align:middle;font-weight:500;text-align:center;line-height:46px}.convert[_ngcontent-%COMP%]{padding-right:40px}.spacer[_ngcontent-%COMP%]{width:15%}.error[_ngcontent-%COMP%]{color:red}"]}),u}(),B=s(19975);function ct(u,f){if(1&u){var n=t.EpF();t.TgZ(0,"div",1),t.TgZ(1,"button",2),t.NdJ("click",function(){return t.CHM(n),t.oxw().openAnyDialog()}),t._uU(2," Add Any Site Type "),t._UZ(3,"mat-icon",3),t.qZA(),t.qZA()}}function lt(u,f){1&u&&t._UZ(0,"mat-divider",18),2&u&&t.Q6J("inset",!0)}function ft(u,f){if(1&u){var n=t.EpF();t.TgZ(0,"div",15),t.TgZ(1,"app-subunit-form",16),t.NdJ("subunitDeleted",function(m){return t.CHM(n),t.oxw().deleteSubunit(m)}),t.qZA(),t.YNc(2,lt,1,1,"mat-divider",17),t.qZA()}if(2&u){var e=f.$implicit,o=f.last,i=f.index,p=t.oxw();t.Q6J("id","substance-subunit-"+i),t.xp6(1),t.Q6J("subunit",e)("view",p.substanceType),t.xp6(1),t.Q6J("ngIf",!o)}}function pt(u,f){if(1&u){var n=t.EpF();t.TgZ(0,"div",19),t.TgZ(1,"div",1),t.TgZ(2,"button",2),t.NdJ("click",function(){return t.CHM(n),t.oxw().addSubunit()}),t._uU(3," Add Subunit "),t._UZ(4,"mat-icon",3),t.qZA(),t.qZA(),t.qZA()}}var dt=function(){var u=function(f){(0,v.Z)(e,f);var n=(0,x.Z)(e);function e(o,i,p,b,m,P,M){var h;return(0,a.Z)(this,e),(h=n.call(this,p)).substanceFormService=o,h.scrollToService=i,h.gaService=p,h.cvService=b,h.dialog=m,h.overlayContainerService=P,h.substanceFormPropertiesService=M,h.subunits=[],h.subunitSequences=[],h.vocabulary={},h.subscriptions=[],h.toggle={},h.view="details",h.sequenceType="",h.allSites=[],h.subcount=0,h.sequenceSites=[],h.analyticsEventCategory="substance form subunits",h}return(0,c.Z)(e,[{key:"ngOnInit",value:function(){this.menuLabelUpdate.emit("Subunits"),this.overlayContainer=this.overlayContainerService.getContainerElement()}},{key:"ngAfterViewInit",value:function(){var i=this;this.substanceFormService.definition.subscribe(function(m){i.substanceType=m.substanceClass}).unsubscribe(),this.canAddItemUpdate.emit(!0);var b=this.substanceFormService.substanceSubunits.subscribe(function(m){i.subunits=m,i.filtered=m,i.subunits.forEach(function(P){i.allSites[P.subunitIndex]=[]})});this.subscriptions.push(b)}},{key:"getSites",value:function(i){return this.subcount=this.subcount+1,this.allSites[i]}},{key:"ngOnDestroy",value:function(){this.subscriptions.forEach(function(i){i.unsubscribe()})}},{key:"updateView",value:function(i){this.gaService.sendEvent(this.analyticsEventCategory,"button:view-update",i.value),this.view=i.value}},{key:"addItem",value:function(){this.addSubunit()}},{key:"addSubunit",value:function(){var i=this;this.substanceFormService.addSubstanceSubunit();var p="substance-subunit-"+(this.subunits.length-1);setTimeout(function(){i.scrollToService.scrollToElement(p,"center")}),this.substanceFormService.emitSubunitUpdate()}},{key:"deleteSubunit",value:function(i){this.substanceFormService.deleteSubstanceSubunit(i)}},{key:"getSequence",value:function(i){var p={};return this.subunitSequences.forEach(function(b){b.subunitIndex===i+1&&(p=b)}),p}},{key:"openDialog",value:function(){var i=this,p=this.dialog.open(r.r,{data:{card:"feature",link:[]},width:"1040px",panelClass:"subunit-dialog"});this.overlayContainer.style.zIndex="1002";var b=p.afterClosed().subscribe(function(m){m&&(i.substanceFormPropertiesService.addSubstancePropertyFromFeature(m),setTimeout(function(){alert('Feature added under "Properties"')})),i.overlayContainer.style.zIndex=null});this.subscriptions.push(b)}},{key:"openAnyDialog",value:function(){var i=this,p=this.dialog.open(r.r,{data:{card:"any",link:[]},width:"1040px",panelClass:"subunit-dialog"});this.overlayContainer.style.zIndex="1002";var b=p.afterClosed().subscribe(function(m){m&&("feature"===m.siteType?i.substanceFormPropertiesService.addSubstancePropertyFromFeature(m.sentFeature):i.substanceFormService.addAnySiteType(m))});this.subscriptions.push(b)}}]),e}(q.u);return u.\u0275fac=function(n){return new(n||u)(t.Y36(O.B),t.Y36(d.i),t.Y36(_.$),t.Y36(A.I),t.Y36(T.uw),t.Y36(U.Xj),t.Y36(l.S))},u.\u0275cmp=t.Xpm({type:u,selectors:[["app-substance-form-subunits"]],features:[t.qOj],decls:16,vars:5,consts:[[1,"add-container"],[1,"add-button"],["mat-button","",3,"click"],["svgIcon","add_circle_outline"],["class","add-button",4,"ngIf"],[1,"middle-fill"],[1,"filters-container"],[3,"value","change"],["value","details"],["svgIcon","list"],["value","raw"],["svgIcon","view_stream"],[3,"ngClass"],["appScrollToTarget","",3,"id",4,"ngFor","ngForOf"],["class","add-container-bottom",4,"ngIf"],["appScrollToTarget","",3,"id"],[3,"subunit","view","subunitDeleted"],["class","form-divider",3,"inset",4,"ngIf"],[1,"form-divider",3,"inset"],[1,"add-container-bottom"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"button",2),t.NdJ("click",function(){return e.openDialog()}),t._uU(3," Add Feature "),t._UZ(4,"mat-icon",3),t.qZA(),t.qZA(),t.YNc(5,ct,4,0,"div",4),t._UZ(6,"div",5),t.TgZ(7,"div",6),t.TgZ(8,"mat-button-toggle-group",7),t.NdJ("change",function(i){return e.updateView(i)}),t.TgZ(9,"mat-button-toggle",8),t._UZ(10,"mat-icon",9),t.qZA(),t.TgZ(11,"mat-button-toggle",10),t._UZ(12,"mat-icon",11),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(13,"div",12),t.YNc(14,ft,3,4,"div",13),t.qZA(),t.YNc(15,pt,5,0,"div",14)),2&n&&(t.xp6(5),t.Q6J("ngIf","protein"===e.substanceType),t.xp6(3),t.Q6J("value",e.view),t.xp6(5),t.Q6J("ngClass",e.view),t.xp6(1),t.Q6J("ngForOf",e.subunits),t.xp6(1),t.Q6J("ngIf",e.subunits&&e.subunits.length>0))},directives:[k.lW,I.Hw,g.O5,N.A9,N.Yi,g.mk,g.sg,F.P,at,B.d],styles:[".details[_ngcontent-%COMP%]   .subunit[_ngcontent-%COMP%]{display:none}.details[_ngcontent-%COMP%]   .subunit-sequence[_ngcontent-%COMP%], .show[_ngcontent-%COMP%]{display:block}.hide[_ngcontent-%COMP%]{display:none}.raw[_ngcontent-%COMP%]   .subunit[_ngcontent-%COMP%]{display:block}.raw[_ngcontent-%COMP%]   .subunit-sequence[_ngcontent-%COMP%]{display:none}.subunit-sequence[_ngcontent-%COMP%]{margin-bottom:30px}.sequence-section-group[_ngcontent-%COMP%]{width:100%;display:-ms-flexbox;display:flex;margin-bottom:10px}.section-number[_ngcontent-%COMP%]{text-align:right;padding:0 10px;font-size:.8em}.sequence-section[_ngcontent-%COMP%]{-ms-flex-positive:0;flex-grow:0;padding:0 10px;-ms-flex-preferred-size:20%;flex-basis:20%;-ms-flex-negative:0;flex-shrink:0}.section-units-container[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex}.section-units-container[_ngcontent-%COMP%]   .section-unit[_ngcontent-%COMP%]{-ms-flex-positive:1;flex-grow:1}.section-units-container[_ngcontent-%COMP%]   .section-unit[_ngcontent-%COMP%]:hover{cursor:default}.subunit[_ngcontent-%COMP%]{padding-top:5px;padding-bottom:20px}.subunit[_ngcontent-%COMP%]:not(:last-child){border-bottom:solid 1px rgba(0,0,0,.12)}.raw-sequence[_ngcontent-%COMP%]{word-break:break-all;line-height:26px}.add-container[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-line-pack:center;align-content:center}.add-button[_ngcontent-%COMP%]{margin-right:10px}.add-container-bottom[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex;margin-top:10px;-ms-flex-pack:end;justify-content:flex-end}"]}),u}(),gt=s(7168),bt=s(94673),vt=s(44770),mt=s(26439),yt=s(43365),ht=(s(64061),function(){var u=(0,c.Z)(function f(){(0,a.Z)(this,f)});return u.\u0275fac=function(n){return new(n||u)},u.\u0275mod=t.oAB({type:u}),u.\u0275inj=t.cJS({imports:[[g.ez,y.o0.forChild(dt),gt.O,B.t,I.Ps,k.ot,bt.w,vt.lN,Y.UX,Y.u5,mt.TU,R.AV,N.vV,yt.c]]}),u}())},15541:function(S,C,s){var c=s(62093),a=s(9102),g=s(25734),y=s(6687),v=s(18704),x=s(94666),O=Date.prototype.getTime;function Z(r){return null==r}function q(r){return!(!r||"object"!=typeof r||"number"!=typeof r.length||"function"!=typeof r.copy||"function"!=typeof r.slice||r.length>0&&"number"!=typeof r[0])}S.exports=function _(r,l,t){var d=t||{};return!!(d.strict?g(r,l):r===l)||(!r||!l||"object"!=typeof r&&"object"!=typeof l?d.strict?g(r,l):r==l:function A(r,l,t){var d,T;if(typeof r!=typeof l||Z(r)||Z(l)||r.prototype!==l.prototype||a(r)!==a(l))return!1;var U=y(r),k=y(l);if(U!==k)return!1;if(U||k)return r.source===l.source&&v(r)===v(l);if(x(r)&&x(l))return O.call(r)===O.call(l);var I=q(r),N=q(l);if(I!==N)return!1;if(I||N){if(r.length!==l.length)return!1;for(d=0;d<r.length;d++)if(r[d]!==l[d])return!1;return!0}if(typeof r!=typeof l)return!1;try{var F=c(r),D=c(l)}catch(E){return!1}if(F.length!==D.length)return!1;for(F.sort(),D.sort(),d=F.length-1;d>=0;d--)if(F[d]!=D[d])return!1;for(d=F.length-1;d>=0;d--)if(!_(r[T=F[d]],l[T],t))return!1;return!0}(r,l,d))}},11790:function(S,C,s){"use strict";var c=s(62093),a="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),g=Object.prototype.toString,y=Array.prototype.concat,v=Object.defineProperty,_=v&&function(){var r={};try{for(var l in v(r,"x",{enumerable:!1,value:r}),r)return!1;return r.x===r}catch(t){return!1}}(),Z=function(r,l,t,d){l in r&&(!function(r){return"function"==typeof r&&"[object Function]"===g.call(r)}(d)||!d())||(_?v(r,l,{configurable:!0,enumerable:!1,value:t,writable:!0}):r[l]=t)},q=function(r,l){var t=arguments.length>2?arguments[2]:{},d=c(l);a&&(d=y.call(d,Object.getOwnPropertySymbols(l)));for(var T=0;T<d.length;T+=1)Z(r,d[T],l[d[T]],t[d[T]])};q.supportsDescriptors=!!_,S.exports=q},94666:function(S){"use strict";var C=Date.prototype.getDay,c=Object.prototype.toString,g="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;S.exports=function(v){return"object"==typeof v&&null!==v&&(g?function(v){try{return C.call(v),!0}catch(x){return!1}}(v):"[object Date]"===c.call(v))}},6687:function(S,C,s){"use strict";var g,y,v,x,c=s(4263),a=s(13261)();if(a){g=c("Object.prototype.hasOwnProperty"),y=c("RegExp.prototype.exec"),v={};var O=function(){throw v};x={toString:O,valueOf:O},"symbol"==typeof Symbol.toPrimitive&&(x[Symbol.toPrimitive]=O)}var _=c("Object.prototype.toString"),Z=Object.getOwnPropertyDescriptor;S.exports=a?function(r){if(!r||"object"!=typeof r)return!1;var l=Z(r,"lastIndex");if(!l||!g(l,"value"))return!1;try{y(r,x)}catch(d){return d===v}}:function(r){return!(!r||"object"!=typeof r&&"function"!=typeof r)&&"[object RegExp]"===_(r)}},56872:function(S){"use strict";var C=function(c){return c!=c};S.exports=function(c,a){return 0===c&&0===a?1/c==1/a:!!(c===a||C(c)&&C(a))}},25734:function(S,C,s){"use strict";var c=s(11790),a=s(3855),g=s(56872),y=s(3306),v=s(67715),x=a(y(),Object);c(x,{getPolyfill:y,implementation:g,shim:v}),S.exports=x},3306:function(S,C,s){"use strict";var c=s(56872);S.exports=function(){return"function"==typeof Object.is?Object.is:c}},67715:function(S,C,s){"use strict";var c=s(3306),a=s(11790);S.exports=function(){var y=c();return a(Object,{is:y},{is:function(){return Object.is!==y}}),y}},91149:function(S,C,s){"use strict";var c;if(!Object.keys){var a=Object.prototype.hasOwnProperty,g=Object.prototype.toString,y=s(55185),v=Object.prototype.propertyIsEnumerable,x=!v.call({toString:null},"toString"),O=v.call(function(){},"prototype"),_=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],Z=function(t){var d=t.constructor;return d&&d.prototype===t},q={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},A=function(){if("undefined"==typeof window)return!1;for(var l in window)try{if(!q["$"+l]&&a.call(window,l)&&null!==window[l]&&"object"==typeof window[l])try{Z(window[l])}catch(t){return!0}}catch(t){return!0}return!1}();c=function(t){var d=null!==t&&"object"==typeof t,T="[object Function]"===g.call(t),U=y(t),k=d&&"[object String]"===g.call(t),I=[];if(!d&&!T&&!U)throw new TypeError("Object.keys called on a non-object");var N=O&&T;if(k&&t.length>0&&!a.call(t,0))for(var F=0;F<t.length;++F)I.push(String(F));if(U&&t.length>0)for(var D=0;D<t.length;++D)I.push(String(D));else for(var E in t)(!N||"prototype"!==E)&&a.call(t,E)&&I.push(String(E));if(x)for(var $=function(t){if("undefined"==typeof window||!A)return Z(t);try{return Z(t)}catch(d){return!1}}(t),j=0;j<_.length;++j)(!$||"constructor"!==_[j])&&a.call(t,_[j])&&I.push(_[j]);return I}}S.exports=c},62093:function(S,C,s){"use strict";var c=Array.prototype.slice,a=s(55185),g=Object.keys,y=g?function(O){return g(O)}:s(91149),v=Object.keys;y.shim=function(){if(Object.keys){var O=function(){var _=Object.keys(arguments);return _&&_.length===arguments.length}(1,2);O||(Object.keys=function(Z){return a(Z)?v(c.call(Z)):v(Z)})}else Object.keys=y;return Object.keys||y},S.exports=y},55185:function(S){"use strict";var C=Object.prototype.toString;S.exports=function(c){var a=C.call(c),g="[object Arguments]"===a;return g||(g="[object Array]"!==a&&null!==c&&"object"==typeof c&&"number"==typeof c.length&&c.length>=0&&"[object Function]"===C.call(c.callee)),g}},44040:function(S){"use strict";var C=Object,s=TypeError;S.exports=function(){if(null!=this&&this!==C(this))throw new s("RegExp.prototype.flags getter called on non-object");var a="";return this.hasIndices&&(a+="d"),this.global&&(a+="g"),this.ignoreCase&&(a+="i"),this.multiline&&(a+="m"),this.dotAll&&(a+="s"),this.unicode&&(a+="u"),this.sticky&&(a+="y"),a}},18704:function(S,C,s){"use strict";var c=s(11790),a=s(3855),g=s(44040),y=s(49783),v=s(29369),x=a(y());c(x,{getPolyfill:y,implementation:g,shim:v}),S.exports=x},49783:function(S,C,s){"use strict";var c=s(44040),a=s(11790).supportsDescriptors,g=Object.getOwnPropertyDescriptor;S.exports=function(){if(a&&"gim"===/a/gim.flags){var v=g(RegExp.prototype,"flags");if(v&&"function"==typeof v.get&&"boolean"==typeof/a/.dotAll)return v.get}return c}},29369:function(S,C,s){"use strict";var c=s(11790).supportsDescriptors,a=s(49783),g=Object.getOwnPropertyDescriptor,y=Object.defineProperty,v=TypeError,x=Object.getPrototypeOf,O=/a/;S.exports=function(){if(!c||!x)throw new v("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var Z=a(),q=x(O),A=g(q,"flags");return(!A||A.get!==Z)&&y(q,"flags",{configurable:!0,enumerable:!1,get:Z}),Z}}}]);
//# sourceMappingURL=4874.e53a2061fc9bbaf0.js.map