"use strict";(self.webpackChunkgsrs_client=self.webpackChunkgsrs_client||[]).push([[6684],{66684:function(X,v,o){o.r(v),o.d(v,{SubstanceFormAgentModificationsModule:function(){return H}});var m=o(1884),f=o(39117),u=o(36362),b=o(64061),y=o(7168),M=o(19975),g=o(65590),p=o(87317),x=o(94673),C=o(44770),l=o(90587),O=o(26439),h=o(43365),T=o(46751),Z=o(56101),P=o(79550),S=(o(27299),o(457)),_=o(40104),t=o(86613),F=o(78444),I=o(27164),U=o(18291),J=o(63169),N=o(33567),k=o(95758),D=o(54244);function E(i,d){if(1&i){var e=t.EpF();t.TgZ(0,"div",23),t._uU(1," Deleted\xa0 "),t.TgZ(2,"button",24),t.NdJ("click",function(){return t.CHM(e),t.oxw().undoDelete()}),t._UZ(3,"mat-icon",25),t.qZA(),t.qZA()}}function w(i,d){if(1&i&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&i){var e=t.oxw();t.xp6(1),t.hij(" ",e.displayAmount(e.mod.amount)," ")}}var A=function(){var i=function(){function d(e,n,a,c,r){(0,f.Z)(this,d),this.cvService=e,this.dialog=n,this.utilsService=a,this.overlayContainerService=c,this.substanceFormService=r,this.modDeleted=new t.vpe,this.modTypeList=[],this.modRoleList=[],this.modProcessList=[],this.subscriptions=[]}return(0,m.Z)(d,[{key:"ngOnInit",value:function(){this.getVocabularies(),this.overlayContainer=this.overlayContainerService.getContainerElement()}},{key:"mod",get:function(){return this.privateMod},set:function(n){this.privateMod=n,this.privateMod.agentSubstance&&(this.relatedSubstanceUuid=this.privateMod.agentSubstance.refuuid)}},{key:"updateAccess",value:function(n){this.mod.access=n}},{key:"getVocabularies",value:function(){var n=this;this.cvService.getDomainVocabulary("AGENT_MODIFICATION_TYPE","AGENT_MODIFICATION_PROCESS","ROLE").subscribe(function(a){n.modTypeList=a.AGENT_MODIFICATION_TYPE.list,n.modProcessList=a.AGENT_MODIFICATION_PROCESS.list,n.modRoleList=a.ROLE.list})}},{key:"deleteCode",value:function(){var n=this;this.privateMod.$$deletedCode=this.utilsService.newUUID(),this.privateMod||(this.deleteTimer=setTimeout(function(){n.modDeleted.emit(n.privateMod)},2e3))}},{key:"undoDelete",value:function(){clearTimeout(this.deleteTimer),delete this.privateMod.$$deletedCode}},{key:"openAmountDialog",value:function(){var n=this;this.mod.amount||(this.mod.amount={});var a=this.dialog.open(I.O,{data:{subsAmount:this.mod.amount},width:"990px"});this.overlayContainer.style.zIndex="1002";var c=a.afterClosed().subscribe(function(r){n.overlayContainer.style.zIndex=null,n.mod.amount=r});this.subscriptions.push(c)}},{key:"updateProcess",value:function(n){this.privateMod.agentModificationProcess=n}},{key:"relatedSubstanceUpdated",value:function(n){null!==n?(this.mod.agentSubstance={refPname:n._name,name:n._name,refuuid:n.uuid,substanceClass:"reference",approvalID:n.approvalID},this.relatedSubstanceUuid=this.mod.agentSubstance.refuuid):(this.mod.agentSubstance=null,this.relatedSubstanceUuid="")}},{key:"displayAmount",value:function(n){return this.utilsService.displayAmount(n)}},{key:"formatValue",value:function(n){return n?"object"==typeof n?n.display?n.display:n.value?n.value:null:n:null}}]),d}();return i.\u0275fac=function(e){return new(e||i)(t.Y36(U.I),t.Y36(k.uw),t.Y36(J.FW),t.Y36(D.Xj),t.Y36(N.B))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-agent-modification-form"]],inputs:{mod:"mod"},outputs:{modDeleted:"modDeleted"},decls:26,vars:9,consts:[[1,"code-form-container"],["class","notification-backdrop",4,"ngIf"],[1,"delete-container"],["mat-icon-button","","matTooltip","Delete code",3,"click"],["svgIcon","delete_forever"],[1,"flex-column","related-substance"],["eventCategory","substanceRelationshipRelatedSub","placeholder","Agent Substance","header","Agent Substance",3,"subuuid","selectionUpdated"],[1,"flex-column","form-content"],[1,"form-row"],["key","Agent Modification Agent Modification Process","title","Modification Process",3,"model","valueChange"],["key","Agent Modification Agent Modification Type","title","Modification Type",3,"model","valueChange"],["key","Agent Modification Agent Modification Role","title","Modification Role",3,"model","valueChange"],[1,"amount"],[1,"label","amt-label"],["mat-icon-button","","matTooltip","add",3,"click"],["svgIcon","add_circle_outline"],[1,"amount-display"],[4,"ngIf"],[1,"group"],["matInput","","placeholder","Group","required","","name","group",3,"ngModel","ngModelChange"],[1,"access"],[3,"access","accessOut"],[3,"source"],[1,"notification-backdrop"],["mat-icon-button","","matTooltip","Undo",3,"click"],["svgIcon","undo"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t.YNc(1,E,4,0,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"button",3),t.NdJ("click",function(){return n.deleteCode()}),t._UZ(4,"mat-icon",4),t.qZA(),t.qZA(),t.TgZ(5,"div",5),t.TgZ(6,"app-substance-selector",6),t.NdJ("selectionUpdated",function(c){return n.relatedSubstanceUpdated(c)}),t.qZA(),t.qZA(),t.TgZ(7,"div",7),t.TgZ(8,"div",8),t.TgZ(9,"app-cv-input",9),t.NdJ("valueChange",function(c){return n.updateProcess(c)}),t.qZA(),t.TgZ(10,"app-cv-input",10),t.NdJ("valueChange",function(c){return n.mod.agentModificationType=c}),t.qZA(),t.TgZ(11,"app-cv-input",11),t.NdJ("valueChange",function(c){return n.mod.agentModificationRole=c}),t.qZA(),t.qZA(),t.TgZ(12,"div",8),t.TgZ(13,"div",12),t.TgZ(14,"div",13),t._uU(15," Amount "),t.qZA(),t.TgZ(16,"button",14),t.NdJ("click",function(){return n.openAmountDialog()}),t._UZ(17,"mat-icon",15),t.qZA(),t.TgZ(18,"div",16),t.YNc(19,w,2,1,"div",17),t.qZA(),t.qZA(),t.TgZ(20,"mat-form-field",18),t.TgZ(21,"input",19),t.NdJ("ngModelChange",function(c){return n.mod.modificationGroup=c}),t.qZA(),t.qZA(),t.TgZ(22,"div",20),t.TgZ(23,"app-access-manager",21),t.NdJ("accessOut",function(c){return n.updateAccess(c)}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(24,"div",8),t._UZ(25,"app-audit-info",22),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngIf",n.mod.$$deletedCode),t.xp6(5),t.Q6J("subuuid",n.relatedSubstanceUuid),t.xp6(3),t.Q6J("model",n.mod.agentModificationProcess),t.xp6(1),t.Q6J("model",n.mod.agentModificationType),t.xp6(1),t.Q6J("model",n.mod.agentModificationRole),t.xp6(8),t.Q6J("ngIf",n.mod.amount),t.xp6(2),t.Q6J("ngModel",n.mod.modificationGroup),t.xp6(2),t.Q6J("access",n.mod.access),t.xp6(2),t.Q6J("source",n.mod))},styles:[".code-form-container[_ngcontent-%COMP%]{padding:30px 10px 12px;position:relative;display:-ms-flexbox;display:flex}.related-substance[_ngcontent-%COMP%]{max-width:25%;width:25%}  .related-substance img{max-width:125px!important;margin:auto}.notification-backdrop[_ngcontent-%COMP%]{position:absolute;inset:0;display:-ms-flexbox;display:flex;z-index:10;background-color:var(--notif-backdrop-bg-color);-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center;font-size:30px;font-weight:700;color:var(--notif-backdrop-color)}.form-row[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;-ms-flex-align:end;align-items:flex-end}.form-row[_ngcontent-%COMP%]   .delete-container[_ngcontent-%COMP%]{padding:0 10px 8px 0}.form-row[_ngcontent-%COMP%]   .code-system[_ngcontent-%COMP%], .form-row[_ngcontent-%COMP%]   .code-system-type[_ngcontent-%COMP%], .form-row[_ngcontent-%COMP%]   .type[_ngcontent-%COMP%]{-ms-flex-positive:1;flex-grow:1;padding-right:15px}.form-row[_ngcontent-%COMP%]   .code-text[_ngcontent-%COMP%], .form-row[_ngcontent-%COMP%]   .url[_ngcontent-%COMP%]{-ms-flex-positive:1;flex-grow:1}.key-value-pair[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-ms-flex-item-align:start;align-self:flex-start}.key-value-pair[_ngcontent-%COMP%]   .key[_ngcontent-%COMP%]{font-size:11px;padding-bottom:3.5px;line-height:11px;color:var(--dark-label-color);font-weight:400;font-family:Roboto,Helvetica Neue,sans-serif}.key-value-pair[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:15.5px}.references-container[_ngcontent-%COMP%]{width:100%}.form-row[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;padding:0 10px;-ms-flex-align:end;align-items:flex-end}.form-row[_ngcontent-%COMP%]   .checkbox-container[_ngcontent-%COMP%]{padding-bottom:18px}.form-row[_ngcontent-%COMP%]   .location-type[_ngcontent-%COMP%]   .extent[_ngcontent-%COMP%]   .mod-type[_ngcontent-%COMP%]{-ms-flex-positive:1;flex-grow:1;padding-right:10px}.form-row[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]{width:100%;display:-ms-flexbox;display:flex}.padded[_ngcontent-%COMP%]{padding-right:20px}.amount-display[_ngcontent-%COMP%]{padding-top:11px}.form-actions[_ngcontent-%COMP%]{-ms-flex-pack:start;justify-content:flex-start;margin:5px 0 10px}.form-content[_ngcontent-%COMP%]{-ms-flex-positive:1;flex-grow:1}.mod-type[_ngcontent-%COMP%], .location-type[_ngcontent-%COMP%], .sites[_ngcontent-%COMP%], .group-access[_ngcontent-%COMP%], .extent[_ngcontent-%COMP%], .amount[_ngcontent-%COMP%]{width:33%}.group[_ngcontent-%COMP%], .access[_ngcontent-%COMP%]{width:22%}"]}),i}();function Q(i,d){1&i&&t._UZ(0,"mat-divider",7),2&i&&t.Q6J("inset",!0)}function R(i,d){if(1&i){var e=t.EpF();t.TgZ(0,"div",4),t.TgZ(1,"app-agent-modification-form",5),t.NdJ("modDeleted",function(){return t.CHM(e),t.oxw().deleteAgentModification()}),t.qZA(),t.YNc(2,Q,1,1,"mat-divider",6),t.qZA()}if(2&i){var n=d.$implicit,a=d.last;t.Q6J("id","substance-agent-modification-"+d.index),t.xp6(1),t.Q6J("mod",n),t.xp6(1),t.Q6J("ngIf",!a)}}function Y(i,d){if(1&i){var e=t.EpF();t.TgZ(0,"div",0),t._UZ(1,"span",1),t.TgZ(2,"button",8),t.NdJ("click",function(){return t.CHM(e),t.oxw().addStructuralModification()}),t._uU(3," Add Modification "),t._UZ(4,"mat-icon",9),t.qZA(),t.qZA()}}var j=function(){var i=function(d){(0,T.Z)(n,d);var e=(0,Z.Z)(n);function n(a,c,r){var s;return(0,f.Z)(this,n),(s=e.call(this,r)).substanceFormAgentModificationsService=a,s.scrollToService=c,s.gaService=r,s.subscriptions=[],s.analyticsEventCategory="substance form agent modifications",s}return(0,m.Z)(n,[{key:"ngOnInit",value:function(){this.menuLabelUpdate.emit("Agent Modifications")}},{key:"ngAfterViewInit",value:function(){var c=this;this.canAddItemUpdate.emit(!0);var r=this.substanceFormAgentModificationsService.substanceAgentModifications.subscribe(function(s){c.modifications=s});this.subscriptions.push(r)}},{key:"ngOnDestroy",value:function(){this.subscriptions.forEach(function(c){c.unsubscribe()}),this.componentDestroyed.emit()}},{key:"addItem",value:function(){this.addStructuralModification()}},{key:"addStructuralModification",value:function(){var c=this;this.substanceFormAgentModificationsService.addSubstanceAgentModification(),setTimeout(function(){c.scrollToService.scrollToElement("substance-agent-modification-0","center")})}},{key:"deleteAgentModification",value:function(c){this.substanceFormAgentModificationsService.deleteSubstanceAgentModification(c)}}]),n}(P.u);return i.\u0275fac=function(e){return new(e||i)(t.Y36(S.O),t.Y36(F.i),t.Y36(_.$))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-substance-form-agent-modifications-card"]],features:[t.qOj],decls:4,vars:2,consts:[[1,"flex-row"],[1,"middle-fill"],["class","alternate-backgrounds",3,"id",4,"ngFor","ngForOf"],["class","flex-row",4,"ngIf"],[1,"alternate-backgrounds",3,"id"],[3,"mod","modDeleted"],["class","form-divider",3,"inset",4,"ngIf"],[1,"form-divider",3,"inset"],["mat-button","",3,"click"],["svgIcon","add_circle_outline"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t._UZ(1,"span",1),t.qZA(),t.YNc(2,R,3,3,"div",2),t.YNc(3,Y,5,0,"div",3)),2&e&&(t.xp6(2),t.Q6J("ngForOf",n.modifications),t.xp6(1),t.Q6J("ngIf",n.modifications&&n.modifications.length>0))},directives:[u.sg,A,u.O5,M.d,p.lW,g.Hw],styles:[".mat-divider.mat-divider-inset[_ngcontent-%COMP%]{margin-left:0}.mat-divider[_ngcontent-%COMP%]{border-top-color:var(--box-shadow-color-3)}.code[_ngcontent-%COMP%]:nth-child(odd){background-color:#448aff12}.code[_ngcontent-%COMP%]:nth-child(odd)     .mat-expansion-panel:not(.mat-expanded):not([aria-disabled=true]) .mat-expansion-panel-header:hover{background-color:#448aff26}.code[_ngcontent-%COMP%]:nth-child(even)     .mat-expansion-panel:not(.mat-expanded):not([aria-disabled=true]) .mat-expansion-panel-header:hover{background-color:#80808026}.code[_ngcontent-%COMP%]     .mat-expansion-panel, .code[_ngcontent-%COMP%]     .mat-table, .code[_ngcontent-%COMP%]     textarea{background-color:transparent}.search[_ngcontent-%COMP%]{width:400px;max-width:100%}"]}),i}(),L=o(63200),V=o(24459),$=o(16667),z=o(84577),G=o(14900),H=function(){var i=(0,m.Z)(function d(){(0,f.Z)(this,d)});return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[u.ez,b.o.forChild(j),y.O,M.t,g.Ps,p.ot,x.w,C.lN,l.UX,l.u5,O.TU,h.c,L.U]]}),i}();t.B6R(A,[u.O5,p.lW,g.Hw,V.Q,$.S,C.KE,h.Nt,l.Fj,l.Q7,l.JJ,l.On,z.h,G.n],[])}}]);
//# sourceMappingURL=6684.06ad341111896c70.js.map