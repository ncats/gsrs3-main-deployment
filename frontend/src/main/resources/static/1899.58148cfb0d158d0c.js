"use strict";(self.webpackChunkgsrs_client=self.webpackChunkgsrs_client||[]).push([[1899],{11899:function(Ae,y,l){l.r(y),l.d(y,{SubstanceReferencesModule:function(){return xe}});var S=l(48047),A=l(78069),Z=l(36362),C=l(95106),J=l(24582),U=l(7318),Y=l(54025),I=l(24874),q=l(50253),w=l(63169),m=l(90587),e=l(76442),T=l(44770),R=l(43365),f=l(97217),_=l(64316),F=l(91434),D=l(1130),N=l(65590),O=l(40089),Q=l(26439);function M(t,a){1&t&&(e.TgZ(0,"th",24),e._uU(1," Citation "),e.qZA())}function $(t,a){if(1&t&&(e.TgZ(0,"a",28),e._uU(1),e.qZA()),2&t){var n=e.oxw().$implicit;e.Q6J("href",n.url,e.LSH),e.xp6(1),e.hij("",n.citation," ")}}function H(t,a){if(1&t&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&t){var n=e.oxw().$implicit;e.xp6(1),e.hij(" ",n.citation," ")}}function P(t,a){if(1&t&&(e.TgZ(0,"td",25),e.YNc(1,$,2,2,"a",26),e.YNc(2,H,2,1,"span",27),e.qZA()),2&t){var n=a.$implicit;e.xp6(1),e.Q6J("ngIf",n.url),e.xp6(1),e.Q6J("ngIf",!n.url)}}function j(t,a){1&t&&(e.TgZ(0,"th",24),e._uU(1," Type "),e.qZA())}function L(t,a){if(1&t&&(e.TgZ(0,"td",25),e._uU(1),e.qZA()),2&t){var n=a.$implicit;e.xp6(1),e.hij(" ",n.docType," ")}}function B(t,a){1&t&&(e.TgZ(0,"th",24),e._uU(1," Tags "),e.qZA())}function k(t,a){1&t&&(e.TgZ(0,"span"),e._uU(1,",\xa0"),e.qZA())}function V(t,a){if(1&t&&(e.TgZ(0,"span"),e._uU(1),e.YNc(2,k,2,0,"span",27),e.qZA()),2&t){var n=a.$implicit,s=a.last;e.xp6(1),e.Oqu(n),e.xp6(1),e.Q6J("ngIf",!s)}}function z(t,a){if(1&t&&(e.TgZ(0,"td",25),e.YNc(1,V,3,2,"span",29),e.qZA()),2&t){var n=a.$implicit;e.xp6(1),e.Q6J("ngForOf",n.tags)}}function E(t,a){if(1&t&&(e.TgZ(0,"th",30),e.TgZ(1,"div",31),e.TgZ(2,"mat-form-field"),e._UZ(3,"input",32),e.qZA(),e.qZA(),e.qZA()),2&t){var n=e.oxw();e.xp6(3),e.Q6J("formControl",n.citationFilter)}}function X(t,a){if(1&t&&(e.TgZ(0,"a",28),e._uU(1),e.qZA()),2&t){var n=e.oxw().$implicit;e.Q6J("href",n.url,e.LSH),e.xp6(1),e.hij("",n.citation," ")}}function W(t,a){if(1&t&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&t){var n=e.oxw().$implicit;e.xp6(1),e.hij(" ",n.citation," ")}}function G(t,a){if(1&t&&(e.TgZ(0,"td",25),e.YNc(1,X,2,2,"a",26),e.YNc(2,W,2,1,"span",27),e.qZA()),2&t){var n=a.$implicit;e.xp6(1),e.Q6J("ngIf",n.url),e.xp6(1),e.Q6J("ngIf",!n.url)}}function K(t,a){if(1&t&&(e.TgZ(0,"mat-option",37),e._uU(1),e.qZA()),2&t){var n=a.$implicit;e.Q6J("value",n.display),e.xp6(1),e.Oqu(n.display)}}function ee(t,a){if(1&t&&(e.TgZ(0,"th",30),e.TgZ(1,"div",31),e.TgZ(2,"mat-form-field",33),e.TgZ(3,"mat-select",34),e.TgZ(4,"mat-select-trigger"),e._uU(5),e.qZA(),e.TgZ(6,"mat-option",35),e._uU(7,"Select Type Filter"),e.qZA(),e.YNc(8,K,2,2,"mat-option",36),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t){var n=e.oxw();e.xp6(3),e.Q6J("formControl",n.typeFilter),e.xp6(2),e.hij(" ",n.typeFilter.value?n.typeFilter.value:""," "),e.xp6(1),e.Q6J("value",null),e.xp6(2),e.Q6J("ngForOf",n.typeFilterOptions)}}function te(t,a){if(1&t&&(e.TgZ(0,"td",25),e._uU(1),e.qZA()),2&t){var n=a.$implicit;e.xp6(1),e.hij(" ",n.docType," ")}}function ne(t,a){if(1&t&&(e.TgZ(0,"mat-option",37),e._uU(1),e.qZA()),2&t){var n=a.$implicit;e.Q6J("value",n.display),e.xp6(1),e.Oqu(n.display)}}function ae(t,a){if(1&t&&(e.TgZ(0,"th",30),e.TgZ(1,"div",31),e.TgZ(2,"mat-form-field",33),e.TgZ(3,"mat-select",34),e.TgZ(4,"mat-select-trigger"),e._uU(5),e.qZA(),e.TgZ(6,"mat-option",35),e._uU(7,"Select Tags Filter"),e.qZA(),e.YNc(8,ne,2,2,"mat-option",36),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t){var n=e.oxw();e.xp6(3),e.Q6J("formControl",n.tagsFilter),e.xp6(2),e.hij(" ",n.tagsFilter.value?n.tagsFilter.value:""," "),e.xp6(1),e.Q6J("value",null),e.xp6(2),e.Q6J("ngForOf",n.tagsFilterOptions)}}function ie(t,a){1&t&&(e.TgZ(0,"span"),e._uU(1,",\xa0"),e.qZA())}function oe(t,a){if(1&t&&(e.TgZ(0,"span"),e._uU(1),e.YNc(2,ie,2,0,"span",27),e.qZA()),2&t){var n=a.$implicit,s=a.last;e.xp6(1),e.Oqu(n),e.xp6(1),e.Q6J("ngIf",!s)}}function le(t,a){if(1&t&&(e.TgZ(0,"td",25),e.YNc(1,oe,3,2,"span",29),e.qZA()),2&t){var n=a.$implicit;e.xp6(1),e.Q6J("ngForOf",n.tags)}}function se(t,a){if(1&t){var n=e.EpF();e.TgZ(0,"th",30),e.TgZ(1,"div",31),e.TgZ(2,"button",6),e.NdJ("click",function(){return e.CHM(n),e.oxw().resetFilters()}),e._uU(3,"Reset"),e.qZA(),e.qZA(),e.qZA()}}function ce(t,a){1&t&&(e.TgZ(0,"th",24),e._uU(1," File "),e.qZA())}function re(t,a){if(1&t&&(e.TgZ(0,"a",39),e._UZ(1,"mat-icon",40),e.qZA()),2&t){var n=e.oxw().$implicit;e.Q6J("href",n.uploadedFile,e.LSH)}}function fe(t,a){if(1&t&&(e.TgZ(0,"td",25),e.YNc(1,re,2,1,"a",38),e.qZA()),2&t){var n=a.$implicit;e.xp6(1),e.Q6J("ngIf",n.uploadedFile)}}function pe(t,a){1&t&&(e.TgZ(0,"th",24),e._uU(1," Access "),e.qZA())}function ue(t,a){1&t&&e._UZ(0,"mat-icon",45)}function me(t,a){if(1&t&&(e.TgZ(0,"span",43),e.YNc(1,ue,1,0,"mat-icon",44),e.qZA()),2&t){var n=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",n.access.length)}}function ge(t,a){1&t&&e._UZ(0,"mat-icon",48)}function de(t,a){if(1&t&&(e.TgZ(0,"span",46),e.YNc(1,ge,1,0,"mat-icon",47),e.qZA()),2&t){var n=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",0===n.access.length)}}function he(t,a){if(1&t&&(e.TgZ(0,"td",25),e.YNc(1,me,2,1,"span",41),e.YNc(2,de,2,1,"span",42),e.qZA()),2&t){var n=a.$implicit;e.xp6(1),e.Q6J("ngIf",n.access.length),e.xp6(1),e.Q6J("ngIf",!n.access.length)}}function ve(t,a){1&t&&e._UZ(0,"tr",49)}function Ze(t,a){if(1&t&&e._UZ(0,"tr",50),2&t){var n=e.oxw();e.Q6J("hidden",n.hideFilters)}}function Ce(t,a){1&t&&e._UZ(0,"tr",51)}var Te=function(){return[5,10,25,100]},_e=function(){var t=function(a){(0,J.Z)(s,a);var n=(0,U.Z)(s);function s(c,i){var o;return(0,A.Z)(this,s),(o=n.call(this,c)).gaService=c,o.utilsService=i,o.references=[],o.displayedColumns=["citation","type","tags","files","access"],o.substanceUpdated=new q.x,o.pageSize=10,o.hideFilters=!0,o.showHideFilterText="Show Filter",o.displayedFilterColumns=["citationFilter","typeFilter","tagsFilter","resetFilter"],o.citationFilter=new m.NI,o.typeFilter=new m.NI,o.tagsFilter=new m.NI,o.typeFilterOptions=[],o.tagsFilterOptions=[],o}return(0,S.Z)(s,[{key:"ngOnInit",value:function(){var i=this;this.substanceUpdated.subscribe(function(o){i.substance=o,null!=i.substance&&null!=i.substance.references&&(i.references=i.substance.references,i.filtered=i.substance.references,i.pageChange(),i.searchControl.valueChanges.subscribe(function(r){i.filterList(r,i.references,i.analyticsEventCategory)},function(r){console.log(r)}),i.getFilterOptions("tags"),i.getFilterOptions("type")),i.countUpdate.emit(i.references.length)}),this.citationFilter.valueChanges.subscribe(function(o){i.filterTable()}),this.typeFilter.valueChanges.subscribe(function(o){i.filterTable()}),this.tagsFilter.valueChanges.subscribe(function(o){i.filterTable()})}},{key:"filterTable",value:function(i){var o=null===this.citationFilter.value?"":this.citationFilter.value,r=null===this.tagsFilter.value?"":this.tagsFilter.value,d=null===this.typeFilter.value?"":this.typeFilter.value;this.filtered=[];var u,p=(0,C.Z)(this.references);try{for(p.s();!(u=p.n()).done;){var h=u.value;h.citation.toLowerCase().includes(o.toLowerCase())&&h.docType.toLowerCase().includes(d.toLowerCase())&&this.isIncluded(h,r)&&this.filtered.push(h)}}catch(b){p.e(b)}finally{p.f()}this.pageChange()}},{key:"isIncluded",value:function(i,o){return!(o.length>0&&!i.tags.includes(o))}},{key:"getFilterOptions",value:function(i){var d,o=this,r=(0,C.Z)(this.references);try{for(r.s();!(d=r.n()).done;){var p=d.value;if("tags"===i){var h,u=(0,C.Z)(p.tags);try{var b=function(){var v=h.value,ye={value:v,display:v};o.tagsFilterOptions.filter(function(Se){return Se.value===v}).length>0||o.tagsFilterOptions.push(ye)};for(u.s();!(h=u.n()).done;)b()}catch(g){u.e(g)}finally{u.f()}}else"type"===i&&function(){var g=p.docType,x={value:g,display:g};o.typeFilterOptions.filter(function(v){return v.value===g}).length>0||o.typeFilterOptions.push(x)}()}}catch(g){r.e(g)}finally{r.f()}}},{key:"toggleFilter",value:function(){this.hideFilters=!this.hideFilters,this.showHideFilterText=this.hideFilters?"Show Filter":"Hide Filter"}},{key:"resetFilters",value:function(){this.pageChange(),this.searchControl.setValue(""),this.citationFilter.setValue(""),this.tagsFilter.setValue(""),this.typeFilter.setValue("")}},{key:"sortData",value:function(i){var o=this,r=this.references.slice();if(!i.active||""===i.direction)return this.filtered=r,void this.pageChange();this.filtered=r.sort(function(d,p){return o.utilsService.compare(d[i.active]?d[i.active].toUpperCase:"",p[i.active]?p[i.active].toUpperCase:"","asc"===i.direction)}),this.pageChange()}}]),s}(Y.u);return t.\u0275fac=function(n){return new(n||t)(e.Y36(I.$),e.Y36(w.FW))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-substance-references"]],features:[e.qOj],decls:39,vars:11,consts:[[1,"flex-row"],[1,"middle-fill"],[1,"search",3,"floatLabel"],["matInput","","placeholder","Search",3,"formControl"],[1,"responsive"],[1,"show-filter-span"],["mat-flat-button","","color","warn",1,"mat-button","mat-button-primary",3,"click"],["mat-table","","matSort","",3,"dataSource","matSortChange"],["matColumnDef","citation"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","type"],["matColumnDef","tags"],["matColumnDef","citationFilter"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","typeFilter"],["matColumnDef","tagsFilter"],["matColumnDef","resetFilter"],["matColumnDef","files"],["matColumnDef","access"],["mat-header-row","",4,"matHeaderRowDef"],["mat-header-row","",3,"hidden",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","true",3,"length","pageSize","pageSizeOptions","page"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["target","_blank",3,"href",4,"ngIf"],[4,"ngIf"],["target","_blank",3,"href"],[4,"ngFor","ngForOf"],["mat-header-cell",""],[1,"tableFilter"],["matInput","","placeholder","Citation Filter",1,"form-field",3,"formControl"],["appearance","fill"],[3,"formControl"],["selected","",3,"value"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[3,"href",4,"ngIf"],[3,"href"],["color","primary","svgIcon","cloud_download",1,"blue"],["matTooltip","Not Public",4,"ngIf"],["matTooltip","Public",4,"ngIf"],["matTooltip","Not Public"],["svgIcon","lock","class","icon-align blue-font",4,"ngIf"],["svgIcon","lock",1,"icon-align","blue-font"],["matTooltip","Public"],["svgIcon","lock_open","class","icon-align blue-font",4,"ngIf"],["svgIcon","lock_open",1,"icon-align","blue-font"],["mat-header-row",""],["mat-header-row","",3,"hidden"],["mat-row",""]],template:function(n,s){1&n&&(e.TgZ(0,"div",0),e._UZ(1,"span",1),e.TgZ(2,"mat-form-field",2),e._UZ(3,"input",3),e.qZA(),e.qZA(),e.TgZ(4,"div",4),e.TgZ(5,"span",5),e.TgZ(6,"mat-label",6),e.NdJ("click",function(){return s.toggleFilter()}),e._uU(7),e.qZA(),e.qZA(),e.TgZ(8,"table",7),e.NdJ("matSortChange",function(i){return s.sortData(i)}),e.ynx(9,8),e.YNc(10,M,2,0,"th",9),e.YNc(11,P,3,2,"td",10),e.BQk(),e.ynx(12,11),e.YNc(13,j,2,0,"th",9),e.YNc(14,L,2,1,"td",10),e.BQk(),e.ynx(15,12),e.YNc(16,B,2,0,"th",9),e.YNc(17,z,2,1,"td",10),e.BQk(),e.ynx(18,13),e.YNc(19,E,4,1,"th",14),e.YNc(20,G,3,2,"td",10),e.BQk(),e.ynx(21,15),e.YNc(22,ee,9,4,"th",14),e.YNc(23,te,2,1,"td",10),e.BQk(),e.ynx(24,16),e.YNc(25,ae,9,4,"th",14),e.YNc(26,le,2,1,"td",10),e.BQk(),e.ynx(27,17),e.YNc(28,se,4,0,"th",14),e.BQk(),e.ynx(29,18),e.YNc(30,ce,2,0,"th",9),e.YNc(31,fe,2,1,"td",10),e.BQk(),e.ynx(32,19),e.YNc(33,pe,2,0,"th",9),e.YNc(34,he,3,2,"td",10),e.BQk(),e.YNc(35,ve,1,0,"tr",20),e.YNc(36,Ze,1,1,"tr",21),e.YNc(37,Ce,1,0,"tr",22),e.qZA(),e.qZA(),e.TgZ(38,"mat-paginator",23),e.NdJ("page",function(i){return s.pageChange(i,s.analyticsEventCategory)}),e.qZA()),2&n&&(e.xp6(2),e.Q6J("floatLabel","never"),e.xp6(1),e.Q6J("formControl",s.searchControl),e.xp6(4),e.Oqu(s.showHideFilterText),e.xp6(1),e.Q6J("dataSource",s.paged),e.xp6(27),e.Q6J("matHeaderRowDef",s.displayedColumns),e.xp6(1),e.Q6J("matHeaderRowDef",s.displayedFilterColumns),e.xp6(1),e.Q6J("matRowDefColumns",s.displayedColumns),e.xp6(1),e.Q6J("length",s.filtered&&s.filtered.length||0)("pageSize",10)("pageSizeOptions",e.DdM(10,Te)))},directives:[T.KE,R.Nt,m.Fj,m.JJ,m.oH,T.hX,f.BZ,_.YE,f.w1,f.fO,f.ge,_.nU,f.Dz,f.ev,Z.O5,Z.sg,F.gD,F.$L,D.ey,N.Hw,O.gM,f.as,f.XQ,f.nj,f.Gk,Q.NW],styles:["table.mat-table[_ngcontent-%COMP%]{width:100%}td.mat-cell[_ngcontent-%COMP%]:not(:last-child), td.mat-footer-cell[_ngcontent-%COMP%]:not(:last-child), th.mat-header-cell[_ngcontent-%COMP%]:not(:last-child){padding-right:10px}td.mat-cell[_ngcontent-%COMP%], td.mat-footer-cell[_ngcontent-%COMP%], th.mat-header-cell[_ngcontent-%COMP%]{padding-top:10px;padding-bottom:10px}.no-bottom-border[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td.mat-cell[_ngcontent-%COMP%]{border-bottom:none}.mat-sort-header-content[_ngcontent-%COMP%]{display:block!important}.search[_ngcontent-%COMP%]{width:400px;max-width:100%}.show-filter-span[_ngcontent-%COMP%]{display:block;float:right}"]}),t}(),Fe=l(64061),be=l(33865),xe=function(){var t=(0,S.Z)(function a(){(0,A.Z)(this,a)});return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[Z.ez,Fe.o.forChild(_e),f.p0,be.HT,Q.TU,R.c,T.lN,F.LD,m.UX,m.u5,_.JX,N.Ps,O.AV]]}),t}()}}]);
//# sourceMappingURL=1899.58148cfb0d158d0c.js.map