{"version":3,"mappings":"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","names":["i0","ctx_r1","OtherLinksFormComponent","cvService","dialog","utilsService","overlayContainerService","substanceFormService","m","this","EventEmitter","getVocabularies","overlayContainer","getContainerElement","updateDisplay","subscriptions","forEach","subscription","unsubscribe","privateLink","set","link","siteDisplay","siteString","sites","$$deletedCode","newUUID","deleteTimer","setTimeout","e","linkDeleted","emit","emitOtherLinkUpdate","clearTimeout","getDomainVocabulary","subscribe","linkageTypes","response","OTHER_LINKAGE_TYPE","list","push","dialogRef","open","SubunitSelectorDialogComponent","data","card","width","panelClass","style","zIndex","dialogSubscription","afterClosed","newLinks","backdropClick","a","selectors","ctx","ctx_r5","SubstanceFormOtherLinksCardComponent","substanceFormOtherLinksService","scrollToService","gaService","l","analyticsEventCategory","canAddItemUpdate","menuLabelUpdate","otherLinksSubscription","substanceOtherLinks","r","otherLinks","componentDestroyed","addOtherLink","addSubstanceOtherLink","scrollToElement","deleteSubstanceOtherLink","SubstanceCardBaseFilteredList","SubstanceFormOtherLinksModule","u","CommonModule","DynamicComponentLoaderModule","SubstanceFormModule","MatDividerModule","MatIconModule","MatButtonModule","ScrollToModule","MatFormFieldModule","ReactiveFormsModule","FormsModule","MatPaginatorModule","MatTooltipModule","MatButtonToggleModule","MatInputModule","MatSelectModule"],"sources":["./src/app/core/substance-form/other-links/other-links-form.component.html","./src/app/core/substance-form/other-links/other-links-form.component.ts","./src/app/core/substance-form/other-links/substance-form-other-links-card.component.html","./src/app/core/substance-form/other-links/substance-form-other-links-card.component.ts","./src/app/core/substance-form/other-links/substance-form-other-links.module.ts"],"sourcesContent":["<div class=\"link-form-container\">\n  <div *ngIf=\"link.$$deletedCode\" class=\"notification-backdrop\">\n    Deleted&nbsp;\n    <button mat-icon-button matTooltip=\"Undo\" (click)=\"undoDelete()\">\n      <mat-icon svgIcon=\"undo\"></mat-icon>\n    </button>\n  </div>\n  <div class=\"form-row\">\n    <div class=\"delete-container\">\n      <button mat-icon-button matTooltip=\"Delete link\" (click)=\"deleteLink()\">\n        <mat-icon svgIcon=\"delete_forever\"></mat-icon>\n      </button>\n    </div>\n    <div class = \"type\">\n      <app-cv-input domain = \"OTHER_LINKAGE_TYPE\" title = \"Sequence Type\" (valueChange) = \"link.linkageType = $event\" [model] = \"link.linkageType\"></app-cv-input>\n    </div>\n    <div class = \"links\">\n      <div class=\"label\">link</div>\n      {{siteDisplay}}\n        <button mat-icon-button matTooltip=\"Select sites from display\" (click)=\"(openDialog())\">\n          <mat-icon svgIcon=\"edit\"></mat-icon>\n        </button>\n    </div>\n  </div>\n  <app-audit-info [source] = \"link\"></app-audit-info>\n</div>\n","import {Component, EventEmitter, Input, OnDestroy, OnInit, Output} from '@angular/core';\nimport {Link, SubstanceReference} from '@gsrs-core/substance';\nimport {UtilsService} from '@gsrs-core/utils';\nimport {ControlledVocabularyService, VocabularyTerm} from '@gsrs-core/controlled-vocabulary';\nimport {MatDialog} from '@angular/material/dialog';\nimport {OverlayContainer} from '@angular/cdk/overlay';\nimport {Subscription} from 'rxjs';\nimport {SubunitSelectorComponent} from '@gsrs-core/substance-form/subunit-selector/subunit-selector.component';\nimport {SubunitSelectorDialogComponent} from '@gsrs-core/substance-form/subunit-selector-dialog/subunit-selector-dialog.component';\nimport {SubstanceFormService} from '@gsrs-core/substance-form/substance-form.service';\n\n@Component({\n  selector: 'app-other-links-form',\n  templateUrl: './other-links-form.component.html',\n  styleUrls: ['./other-links-form.component.scss']\n})\nexport class OtherLinksFormComponent implements OnInit, OnDestroy {\n\n  private privateLink: Link;\n  @Output() linkDeleted = new EventEmitter<Link>();\n  deleteTimer: any;\n  linkageTypes: any;\n  private subscriptions: Array<Subscription> = [];\n  private overlayContainer: HTMLElement;\n  siteDisplay: string;\n\n  constructor(\n  private cvService: ControlledVocabularyService,\n  private dialog: MatDialog,\n  private utilsService: UtilsService,\n  private overlayContainerService: OverlayContainer,\n  private substanceFormService: SubstanceFormService\n  ) { }\n\n  ngOnInit() {\n    this.getVocabularies();\n    this.overlayContainer = this.overlayContainerService.getContainerElement();\n    this.updateDisplay();\n  }\n\n  ngOnDestroy() {\n    this.subscriptions.forEach(subscription => {\n      subscription.unsubscribe();\n    });\n  }\n\n  @Input()\n  set link(link: Link) {\n    this.privateLink = link;\n  }\n\n  get link(): Link {\n    return this.privateLink;\n  }\n  updateDisplay(): void {\n    this.siteDisplay = this.substanceFormService.siteString(this.privateLink.sites);\n  }\n  deleteLink(): void {\n    this.privateLink.$$deletedCode = this.utilsService.newUUID();\n      this.deleteTimer = setTimeout(() => {\n        this.linkDeleted.emit(this.link);\n        this.substanceFormService.emitOtherLinkUpdate();\n      }, 2000);\n  }\n\n  undoDelete(): void {\n    clearTimeout(this.deleteTimer);\n    delete this.privateLink.$$deletedCode;\n  }\n\n  getVocabularies(): void {\n    const subscription = this.cvService.getDomainVocabulary('OTHER_LINKAGE_TYPE').subscribe(response => {\n      this.linkageTypes = response['OTHER_LINKAGE_TYPE'].list;\n    });\n    this.subscriptions.push(subscription);\n  }\n\n  openDialog(): void {\n\n    const dialogRef = this.dialog.open(SubunitSelectorDialogComponent, {\n      data: {'card': 'other', 'link': this.privateLink.sites},\n      width: '1040px',\n      panelClass: 'subunit-dialog'\n    });\n    this.overlayContainer.style.zIndex = '1002';\n\n    const dialogSubscription = dialogRef.afterClosed().subscribe(newLinks => {\n      this.overlayContainer.style.zIndex = null;\n      if (newLinks) {\n        this.privateLink.sites = newLinks;\n        this.substanceFormService.emitOtherLinkUpdate();\n      }\n      this.updateDisplay();\n    });\n    const dialogSubscription2 = dialogRef.backdropClick().subscribe(sub => {     }\n    );\n\n    dialogSubscription2.unsubscribe();\n    this.subscriptions.push(dialogSubscription);\n  }\n\n\n}\n","<div class=\"flex-row\">\n  <span class=\"middle-fill\"></span>\n  <!-- <button mat-button (click)=\"addOtherLink()\">\n    Add link <mat-icon svgIcon=\"add_circle_outline\"></mat-icon>\n  </button> -->\n</div>\n  <div class = \"alternate-backgrounds\" *ngFor = \"let links of otherLinks; last as isLast; index as index\"  appScrollToTarget [id]=\"'substance-other-links-' + index\" >\n    <app-other-links-form [link]=\"links\" (linkDeleted)=\"deleteLink($event)\"></app-other-links-form>\n    <mat-divider class=\"form-divider\" [inset]=\"true\" *ngIf=\"!isLast\"></mat-divider>\n  </div>\n\n  <div class=\"flex-row\">\n      <span class = \"middle-fill\"></span>\n        <button mat-button (click)=\"addOtherLink()\">\n    Add link <mat-icon svgIcon=\"add_circle_outline\"></mat-icon>\n  </button> </div>\n\n\n\n","import {AfterViewInit, Component, OnDestroy, OnInit} from '@angular/core';\nimport {SubstanceCardBaseFilteredList, SubstanceCardBaseList} from '@gsrs-core/substance-form/base-classes/substance-form-base-filtered-list';\nimport {Link} from '@gsrs-core/substance';\nimport {Subscription} from 'rxjs';\nimport {ScrollToService} from '@gsrs-core/scroll-to/scroll-to.service';\nimport {GoogleAnalyticsService} from '@gsrs-core/google-analytics';\nimport { SubstanceFormOtherLinksService } from './substance-form-other-links.service';\n\n@Component({\n  selector: 'app-substance-form-other-links-card',\n  templateUrl: './substance-form-other-links-card.component.html',\n  styleUrls: ['./substance-form-other-links-card.component.scss']\n})\nexport class SubstanceFormOtherLinksCardComponent extends SubstanceCardBaseFilteredList<Link>\n  implements OnInit, AfterViewInit, OnDestroy, SubstanceCardBaseList {\n  otherLinks: Array<Link>;\n  private subscriptions: Array<Subscription> = [];\n  constructor(\n    private substanceFormOtherLinksService: SubstanceFormOtherLinksService,\n    private scrollToService: ScrollToService,\n    public gaService: GoogleAnalyticsService,\n\n  ) {\n    super(gaService);\n    this.analyticsEventCategory = 'substance form otherLinks';\n  }\n\n  ngOnInit() {\n    this.canAddItemUpdate.emit(true);\n    this.menuLabelUpdate.emit('Other Links');\n  }\n\n  ngAfterViewInit() {\n    const otherLinksSubscription = this.substanceFormOtherLinksService.substanceOtherLinks.subscribe(otherLinks => {\n      this.otherLinks = otherLinks;\n    });\n    this.subscriptions.push(otherLinksSubscription);\n  }\n\n  ngOnDestroy() {\n    this.componentDestroyed.emit();\n    this.subscriptions.forEach(subscription => {\n      subscription.unsubscribe();\n    });\n  }\n\n  addItem(): void {\n    this.addOtherLink();\n  }\n\n  addOtherLink(): void {\n    this.substanceFormOtherLinksService.addSubstanceOtherLink();\n    setTimeout(() => {\n      this.scrollToService.scrollToElement(`substance-other-links-0`, 'center');\n    });\n  }\n\n  deleteLink(link: Link): void {\n    this.substanceFormOtherLinksService.deleteSubstanceOtherLink(link);\n  }\n\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport {DynamicComponentLoaderModule} from '@gsrs-core/dynamic-component-loader';\nimport {SubstanceFormModule} from '@gsrs-core/substance-form/substance-form.module';\nimport {MatDividerModule} from '@angular/material/divider';\nimport {MatIconModule} from '@angular/material/icon';\nimport {MatButtonModule} from '@angular/material/button';\nimport {ScrollToModule} from '@gsrs-core/scroll-to';\nimport {MatFormFieldModule} from '@angular/material/form-field';\nimport {FormsModule, ReactiveFormsModule} from '@angular/forms';\nimport {MatPaginatorModule} from '@angular/material/paginator';\nimport {MatInputModule} from '@angular/material/input';\nimport {MatTooltipModule} from '@angular/material/tooltip';\nimport {MatButtonToggleModule} from '@angular/material/button-toggle';\nimport {SubstanceFormOtherLinksCardComponent} from '@gsrs-core/substance-form/other-links/substance-form-other-links-card.component';\nimport {MatSelectModule} from '@angular/material/select';\nimport { OtherLinksFormComponent } from './other-links-form.component';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    DynamicComponentLoaderModule.forChild(SubstanceFormOtherLinksCardComponent),\n    SubstanceFormModule,\n    MatDividerModule,\n    MatIconModule,\n    MatButtonModule,\n    ScrollToModule,\n    MatFormFieldModule,\n    ReactiveFormsModule,\n    FormsModule,\n    MatPaginatorModule,\n    MatTooltipModule,\n    MatButtonToggleModule,\n    MatInputModule,\n    MatSelectModule\n  ],\n  exports: [\n  ],\n  declarations: [\n    SubstanceFormOtherLinksCardComponent,\n    OtherLinksFormComponent\n  ]\n})\nexport class SubstanceFormOtherLinksModule { }\n"],"sourceRoot":"webpack:///","file":"5846.339820d4eea24497.js"}