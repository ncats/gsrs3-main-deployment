"use strict";(self.webpackChunkgsrs_client=self.webpackChunkgsrs_client||[]).push([[4371],{34371:function($a,L,_){_.r(L),_.d(L,{SubstanceProductsModule:function(){return za}});var h=_(1884),C=_(39117),g=_(36362),B=_(75143),x=_(46751),S=_(56101),N=_(40104),$=_(42154),j=_(68756),t=_(86613),D=function(){var e=function(n){(0,x.Z)(o,n);var a=(0,S.Z)(o);function o(c,i){var r;return(0,C.Z)(this,o),(r=a.call(this,c)).gaService=c,r.service=i,r.results=[],r.isAdmin=!1,r}return(0,h.Z)(o,[{key:"ngOnInit",value:function(){}},{key:"setPageEvent",value:function(i){null!=i&&(this.page=i.pageIndex,this.pageSize=i.pageSize)}},{key:"setResultData",value:function(i,r){this.results=i,this.filtered=i,this.totalRecords=this.service.totalRecords,this.pageChangeFda()}},{key:"pageChangeFda",value:function(i,r){if(this.paged=[],this.filtered)for(var p=0;p<this.filtered.length&&null!=this.filtered[p];p++)this.paged.push(this.filtered[p])}}]),o}(j.uJ);return e.\u0275fac=function(a){t.$Z()},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac}),e}(),k=_(53141),P=_(44250),M=_(59295),O=_(35096),b=_(98002),q=_(93392),w=_(95758),I=_(12379),T=_(87317),A=_(65590),Z=_(74742),d=_(97217),y=_(26439),H=_(63322),J=_(48968);function G(e,n){1&e&&(t.TgZ(0,"div"),t._UZ(1,"br"),t.TgZ(2,"div",3),t.TgZ(3,"b"),t._uU(4,"No Application Found"),t.qZA(),t.qZA(),t._UZ(5,"br"),t.qZA())}function W(e,n){if(1&e){var a=t.EpF();t.TgZ(0,"span",22),t.TgZ(1,"button",23),t.NdJ("click",function(){return t.CHM(a),t.oxw(2).export()}),t._UZ(2,"mat-icon",24),t._uU(3," Export All Applications "),t.qZA(),t.qZA()}}function K(e,n){1&e&&(t.TgZ(0,"div",25),t._UZ(1,"mat-progress-spinner",26),t.qZA())}function X(e,n){1&e&&(t.TgZ(0,"th",27),t._uU(1," Application Type "),t.qZA())}var V=function(n){return["/application",n,"edit"]};function tt(e,n){if(1&e&&(t.TgZ(0,"a",31),t._UZ(1,"mat-icon",32),t.qZA()),2&e){var a=t.oxw(2).$implicit;t.Q6J("routerLink",t.VKq(1,V,a.id))}}var et=function(n){return["/application",n]};function nt(e,n){if(1&e&&(t.TgZ(0,"span"),t.TgZ(1,"a",29),t._uU(2),t.qZA(),t._uU(3," \xa0\xa0 "),t.YNc(4,tt,2,3,"a",30),t.qZA()),2&e){var a=t.oxw().$implicit,o=t.oxw(2);t.xp6(1),t.Q6J("routerLink",t.VKq(3,et,a.id)),t.xp6(1),t.Oqu(a.appType),t.xp6(2),t.Q6J("ngIf",o.isAdmin)}}var at=function(n,a){return["/application-darrts",n,a]};function it(e,n){if(1&e&&(t.TgZ(0,"span"),t.TgZ(1,"a",29),t._uU(2),t.qZA(),t._UZ(3,"br"),t.TgZ(4,"span",33),t._uU(5,"(Integrity)"),t.qZA(),t.qZA()),2&e){var a=t.oxw().$implicit;t.xp6(1),t.Q6J("routerLink",t.WLB(2,at,a.appType,a.appNumber)),t.xp6(1),t.Oqu(a.appType)}}function ot(e,n){if(1&e&&(t.TgZ(0,"td",28),t.YNc(1,nt,5,5,"span",0),t.YNc(2,it,6,5,"span",0),t.qZA()),2&e){var a=n.$implicit;t.xp6(1),t.Q6J("ngIf",a.fromTable&&"GSRS"===a.fromTable),t.xp6(1),t.Q6J("ngIf",a.fromTable&&"GSRS"!==a.fromTable)}}function rt(e,n){1&e&&(t.TgZ(0,"th",27),t._uU(1," Application Number "),t.qZA())}function st(e,n){if(1&e&&(t.TgZ(0,"td",28),t._uU(1),t.qZA()),2&e){var a=n.$implicit;t.xp6(1),t.hij(" ",a.appNumber," ")}}function ct(e,n){1&e&&(t.TgZ(0,"th",27),t._uU(1," Product Name "),t.qZA())}function ut(e,n){if(1&e&&(t.TgZ(0,"div",36),t._uU(1),t.qZA()),2&e){var a=n.$implicit;t.xp6(1),t.hij(" ",a.productName," ")}}function pt(e,n){if(1&e&&(t.TgZ(0,"div"),t.YNc(1,ut,2,1,"div",35),t.qZA()),2&e){var a=n.$implicit;t.xp6(1),t.Q6J("ngForOf",a.applicationProductNameList)}}function lt(e,n){if(1&e&&(t.TgZ(0,"td",28),t.YNc(1,pt,2,1,"div",34),t.qZA()),2&e){var a=n.$implicit;t.xp6(1),t.Q6J("ngForOf",a.applicationProductList)}}function dt(e,n){1&e&&(t.TgZ(0,"th",27),t._uU(1," Sponsor Name "),t.qZA())}function mt(e,n){if(1&e&&(t.TgZ(0,"td",28),t._uU(1),t.qZA()),2&e){var a=n.$implicit;t.xp6(1),t.hij(" ",a.sponsorName," ")}}function _t(e,n){1&e&&(t.TgZ(0,"th",27),t._uU(1," Application Status "),t.qZA())}function vt(e,n){if(1&e&&(t.TgZ(0,"td",28),t._uU(1),t.qZA()),2&e){var a=n.$implicit;t.xp6(1),t.hij(" ",a.appStatus," ")}}function ft(e,n){1&e&&(t.TgZ(0,"th",27),t._uU(1," Application Sub Type "),t.qZA())}function gt(e,n){if(1&e&&(t.TgZ(0,"td",28),t._uU(1),t.qZA()),2&e){var a=n.$implicit;t.xp6(1),t.hij(" ",a.appSubType," ")}}function bt(e,n){1&e&&t._UZ(0,"tr",37)}function ht(e,n){1&e&&t._UZ(0,"tr",38)}var Ct=function(){return[5,10,25,100]};function xt(e,n){if(1&e){var a=t.EpF();t.TgZ(0,"mat-tab",4),t.TgZ(1,"div",5),t.TgZ(2,"b"),t._uU(3),t.qZA(),t._uU(4," \xa0\xa0\xa0 "),t.TgZ(5,"span",6),t._uU(6),t.qZA(),t._uU(7," \xa0\xa0\xa0 "),t.YNc(8,W,4,0,"span",7),t.qZA(),t.TgZ(9,"div",8),t.YNc(10,K,2,0,"div",9),t.TgZ(11,"table",10),t.ynx(12,11),t.YNc(13,X,2,0,"th",12),t.YNc(14,ot,3,2,"td",13),t.BQk(),t.ynx(15,14),t.YNc(16,rt,2,0,"th",12),t.YNc(17,st,2,1,"td",13),t.BQk(),t.ynx(18,15),t.YNc(19,ct,2,0,"th",12),t.YNc(20,lt,2,1,"td",13),t.BQk(),t.ynx(21,16),t.YNc(22,dt,2,0,"th",12),t.YNc(23,mt,2,1,"td",13),t.BQk(),t.ynx(24,17),t.YNc(25,_t,2,0,"th",12),t.YNc(26,vt,2,1,"td",13),t.BQk(),t.ynx(27,18),t.YNc(28,ft,2,0,"th",12),t.YNc(29,gt,2,1,"td",13),t.BQk(),t.YNc(30,bt,1,0,"tr",19),t.YNc(31,ht,1,0,"tr",20),t.qZA(),t.qZA(),t.TgZ(32,"mat-paginator",21),t.NdJ("page",function(r){return t.CHM(a),t.oxw().getApplicationBySubstanceKeyCenter(r)}),t.qZA(),t.qZA()}if(2&e){var o=n.$implicit,c=t.oxw();t.s9C("label",o),t.xp6(3),t.hij(" ",o,""),t.xp6(3),t.Oqu(c.loadingStatus),t.xp6(2),t.Q6J("ngIf",c.isAdmin),t.xp6(2),t.Q6J("ngIf",c.showSpinner),t.xp6(1),t.Q6J("dataSource",c.paged),t.xp6(19),t.Q6J("matHeaderRowDef",c.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",c.displayedColumns),t.xp6(1),t.Q6J("length",c.totalRecords)("pageSize",5)("pageSizeOptions",t.DdM(11,Ct))}}var St=function(){var e=function(n){(0,x.Z)(o,n);var a=(0,S.Z)(o);function o(c,i,r,p,l,m,u){var s;return(0,C.Z)(this,o),(s=a.call(this,p,l)).router=c,s.authService=i,s.loadingService=r,s.gaService=p,s.applicationService=l,s.generalService=m,s.dialog=u,s.applicationCount=0,s.totalApplication=0,s.centerList=[],s.centerListOriginal=[],s.center="",s.fromTable="",s.loadingStatus="",s.showSpinner=!1,s.foundCenterList=!1,s.loadingComplete=!1,s.privateExport=!1,s.disableExport=!1,s.etag="",s.etagAllExport="",s.countApplicationOut=new t.vpe,s.displayedColumns=["appType","appNumber","productName","sponsorName","applicationStatus","applicationSubType"],s}return(0,h.Z)(o,[{key:"ngOnInit",value:function(){var i=this;this.authService.hasAnyRolesAsync("Admin","Updater","SuperUpdater").pipe((0,M.q)(1)).subscribe(function(r){i.isAdmin=r}),this.bdnum&&(this.getApplicationCenterList(),this.privateSearch="root_applicationProductList_applicationIngredientList_substanceKey:"+this.bdnum,this.getApplicationBySubstanceKeyCenter(null,"initial"))}},{key:"getApplicationCenterList",value:function(){var i=this;this.applicationService.getApplicationCenterList(this.bdnum).subscribe(function(r){i.centerListOriginal=r,i.centerList=r,i.centerList&&i.centerList.length>0&&(i.foundCenterList=!0),i.loadingComplete=!0})}},{key:"applicationTabSelected",value:function(i){if(i){var p=i.tab.textLabel;if(null!=p){this.loadingStatus="Loading data...";var l=p.indexOf(" ");this.center=p.slice(0,l),this.fromTable=p.slice(l+1,p.length)}this.paged=[],this.privateSearch="root_applicationProductList_applicationIngredientList_substanceKey:"+this.bdnum+" AND root_center:"+this.center+" AND root_fromTable: "+this.fromTable,this.getApplicationBySubstanceKeyCenter()}}},{key:"getApplicationBySubstanceKeyCenter",value:function(i,r){var p=this;this.setPageEvent(i),this.showSpinner=!0;var m=this.applicationService.getApplicationAll("default",this.page*this.pageSize,this.pageSize,this.privateSearch,this.privateFacetParams).subscribe(function(u){r&&"initial"===r?p.etagAllExport=u.etag:(p.applicationService.totalRecords=u.total,p.applicationCount=u.total,p.setResultData(u.content),p.etag=u.etag,p.countApplicationOut.emit(p.applicationCount))},function(u){console.log("error")},function(){m.unsubscribe()});this.loadingStatus="",this.showSpinner=!1}},{key:"export",value:function(){var i=this;if(this.etagAllExport){var r="xlsx",p=this.getApiExportUrl(this.etagAllExport,r);""!==this.authService.getUser()&&this.dialog.open(O.L,{width:"700px",data:{extension:r,type:"substanceApplication",hideOptionButtons:!0}}).afterClosed().subscribe(function(m){var u=m.name,s=m.id;u&&""!==u&&(i.loadingService.setLoading(!0),i.authService.startUserDownload(p,i.privateExport,u+"."+r,s).subscribe(function(v){i.loadingService.setLoading(!1),i.router.navigate(["/user-downloads/",v.id])},function(v){return i.loadingService.setLoading(!1)}))})}}},{key:"getApiExportUrl",value:function(i,r){return this.applicationService.getAppAllApiExportUrl(i,r)}},{key:"updateApplicationUrl",get:function(){return this.applicationService.getUpdateApplicationUrl()}},{key:"applicationListExportUrl",value:function(){null!=this.bdnum&&(this.exportUrl=this.applicationService.getApplicationListExportUrl(this.bdnum))}}]),o}(D);return e.\u0275fac=function(a){return new(a||e)(t.Y36(b.F0),t.Y36(P.e),t.Y36(q.b),t.Y36(N.$),t.Y36(H.I),t.Y36(J.m),t.Y36(w.uw))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-substance-application"]],inputs:{bdnum:"bdnum"},outputs:{countApplicationOut:"countApplicationOut"},features:[t.qOj],decls:3,vars:2,consts:[[4,"ngIf"],[3,"selectedTabChange"],[3,"label",4,"ngFor","ngForOf"],[1,"padleft25px","colorblue"],[3,"label"],[1,"padtop5px","padleft25px","font15px","colorblue"],[1,"colorred"],["class","export",4,"ngIf"],[1,"responsive","mat-table-style"],["class","spinnerstyle",4,"ngIf"],["mat-table","",1,"font12px",3,"dataSource"],["matColumnDef","appType"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","appNumber"],["matColumnDef","productName"],["matColumnDef","sponsorName"],["matColumnDef","applicationStatus"],["matColumnDef","applicationSubType"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","true",3,"length","pageSize","pageSizeOptions","page"],[1,"export"],["matTooltip","Export Search Results","mat-button","",1,"mat-button","export-button","mat-raised-button",3,"click"],["svgIcon","get_app"],[1,"spinnerstyle"],["diameter","80","color","warn","mode","indeterminate"],["mat-header-cell",""],["mat-cell",""],["target","_blank",3,"routerLink"],["target","_blank","matTooltip","Edit GSRS Application Record",3,"routerLink",4,"ngIf"],["target","_blank","matTooltip","Edit GSRS Application Record",3,"routerLink"],["svgIcon","edit"],[1,"font10px","colorgray"],[4,"ngFor","ngForOf"],["class","row",4,"ngFor","ngForOf"],[1,"row"],["mat-header-row",""],["mat-row",""]],template:function(a,o){1&a&&(t.YNc(0,G,6,0,"div",0),t.TgZ(1,"mat-tab-group",1),t.NdJ("selectedTabChange",function(i){return o.applicationTabSelected(i)}),t.YNc(2,xt,33,12,"mat-tab",2),t.qZA()),2&a&&(t.Q6J("ngIf",!0===o.loadingComplete&&!1===o.foundCenterList&&0===o.applicationCount),t.xp6(2),t.Q6J("ngForOf",o.centerList))},directives:[g.O5,I.SP,g.sg,I.uX,T.lW,A.Hw,Z.Ou,d.BZ,d.w1,d.fO,d.ge,d.Dz,d.ev,b.yS,d.as,d.XQ,d.nj,d.Gk,y.NW],styles:[".mat-table-style[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%]{vertical-align:top;font-size:12px}.font9px[_ngcontent-%COMP%]{font:size 10px}.font10px[_ngcontent-%COMP%]{font-size:10px}.font12px[_ngcontent-%COMP%]{font-size:12px}.font15px[_ngcontent-%COMP%]{font-size:15px}.padleft25px[_ngcontent-%COMP%]{padding-left:25px}.padtop5px[_ngcontent-%COMP%]{padding-top:5px}.colorblue[_ngcontent-%COMP%]{color:var(--deep-purple-color)}.colorgray[_ngcontent-%COMP%]{color:var(--regular-grey-color)}.colorred[_ngcontent-%COMP%]{color:var(--regular-red-color)}.spinnerstyle[_ngcontent-%COMP%]{position:absolute;inset:0 0 56px;background:var(--spinner-bg-color);z-index:1;display:-ms-flexbox;display:flex;-ms-flex-align:top;align-items:top;-ms-flex-pack:center;justify-content:center}"]}),e}(),R=_(69638);function Tt(e,n){1&e&&(t.TgZ(0,"div",2),t.TgZ(1,"b"),t._uU(2,"No Clinical Trial US Found"),t.qZA(),t.qZA())}function At(e,n){if(1&e){var a=t.EpF();t.TgZ(0,"span",18),t.TgZ(1,"button",19),t.NdJ("click",function(){return t.CHM(a),t.oxw(2).export()}),t._UZ(2,"mat-icon",20),t._uU(3," Export CTs "),t.qZA(),t.qZA()}}function Zt(e,n){1&e&&(t.TgZ(0,"div",21),t._UZ(1,"mat-progress-spinner",22),t.qZA())}function yt(e,n){1&e&&t._UZ(0,"th",23)}function Et(e,n){if(1&e&&(t.TgZ(0,"td",24),t.TgZ(1,"a",25),t._UZ(2,"mat-icon",26),t.qZA(),t.qZA()),2&e){var a=n.$implicit;t.xp6(1),t.Q6J("href","edit-clinical-trial/"+a.trialNumber,t.LSH)}}function Ut(e,n){1&e&&(t.TgZ(0,"th",23),t._uU(1,"Trial Number"),t.qZA())}function Nt(e,n){if(1&e&&(t.TgZ(0,"td",24),t.TgZ(1,"a",27),t._uU(2),t.qZA(),t.qZA()),2&e){var a=n.$implicit;t.xp6(1),t.Q6J("href","https://clinicaltrials.gov/ct2/show/"+a.trialNumber,t.LSH),t.xp6(1),t.Oqu(a.trialNumber)}}function Dt(e,n){1&e&&(t.TgZ(0,"th",23),t._uU(1," Title "),t.qZA())}function Pt(e,n){if(1&e&&(t.TgZ(0,"td",24),t._uU(1),t.qZA()),2&e){var a=n.$implicit;t.xp6(1),t.hij(" ",a.title," ")}}function Ot(e,n){1&e&&(t.TgZ(0,"th",23),t._uU(1," Sponsor Name "),t.qZA())}function qt(e,n){if(1&e&&(t.TgZ(0,"td",24),t._uU(1),t.qZA()),2&e){var a=n.$implicit;t.xp6(1),t.hij(" ",a.sponsor," ")}}function wt(e,n){1&e&&(t.TgZ(0,"th",23),t._uU(1," Conditions "),t.qZA())}function Yt(e,n){if(1&e&&(t.TgZ(0,"td",24),t._uU(1),t.qZA()),2&e){var a=n.$implicit;t.xp6(1),t.hij(" ",a.conditions," ")}}function It(e,n){1&e&&(t.TgZ(0,"th",23),t._uU(1," Outcome Measures "),t.qZA())}function kt(e,n){if(1&e&&(t.TgZ(0,"td",24),t._uU(1),t.qZA()),2&e){var a=n.$implicit;t.xp6(1),t.hij(" ",a.outcomeMeasures," ")}}function Mt(e,n){1&e&&t._UZ(0,"tr",28)}function Qt(e,n){1&e&&t._UZ(0,"tr",29)}var Lt=function(){return[5,10,25,100]};function Jt(e,n){if(1&e){var a=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"div",2),t.TgZ(2,"b"),t._uU(3,"Clinical Trials US"),t.qZA(),t._uU(4," \xa0\xa0\xa0 "),t.qZA(),t.TgZ(5,"div"),t.YNc(6,At,4,0,"span",3),t.qZA(),t.TgZ(7,"div",4),t.YNc(8,Zt,2,0,"div",5),t.TgZ(9,"table",6),t.ynx(10,7),t.YNc(11,yt,1,0,"th",8),t.YNc(12,Et,3,1,"td",9),t.BQk(),t.ynx(13,10),t.YNc(14,Ut,2,0,"th",8),t.YNc(15,Nt,3,2,"td",9),t.BQk(),t.ynx(16,11),t.YNc(17,Dt,2,0,"th",8),t.YNc(18,Pt,2,1,"td",9),t.BQk(),t.ynx(19,12),t.YNc(20,Ot,2,0,"th",8),t.YNc(21,qt,2,1,"td",9),t.BQk(),t.ynx(22,13),t.YNc(23,wt,2,0,"th",8),t.YNc(24,Yt,2,1,"td",9),t.BQk(),t.ynx(25,14),t.YNc(26,It,2,0,"th",8),t.YNc(27,kt,2,1,"td",9),t.BQk(),t.YNc(28,Mt,1,0,"tr",15),t.YNc(29,Qt,1,0,"tr",16),t.qZA(),t.qZA(),t.TgZ(30,"mat-paginator",17),t.NdJ("page",function(i){return t.CHM(a),t.oxw().getSubstanceClinicalTrials(i)}),t.qZA(),t.qZA()}if(2&e){var o=t.oxw();t.xp6(6),t.Q6J("ngIf",o.isAdmin),t.xp6(2),t.Q6J("ngIf",o.showSpinner),t.xp6(1),t.Q6J("dataSource",o.paged),t.xp6(19),t.Q6J("matHeaderRowDef",o.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(1),t.Q6J("length",o.totalRecords)("pageSize",5)("pageSizeOptions",t.DdM(8,Lt))}}var Rt=function(){var e=function(n){(0,x.Z)(o,n);var a=(0,S.Z)(o);function o(c,i,r,p,l,m,u){var s;return(0,C.Z)(this,o),(s=a.call(this,c,i)).gaService=c,s.clinicalTrialService=i,s.configService=r,s.authService=p,s.loadingService=l,s.router=m,s.dialog=u,s.clinicalTrialCount=0,s.showSpinner=!1,s.subscriptions=[],s.privateExport=!1,s.disableExport=!1,s.etag="",s.etagAllExport="",s.loadingStatus="",s.countClinicalTrialOut=new t.vpe,s.displayedColumns=["edit","nctNumber","title","sponsorName","conditions","outcomemeasures"],s}return(0,h.Z)(o,[{key:"ngOnInit",value:function(){var i=this;this.loadedComponents=this.configService.configData.loadedComponents||null,this.authService.hasAnyRolesAsync("Admin","Updater","SuperUpdater").pipe((0,M.q)(1)).subscribe(function(r){i.isAdmin=r}),this.substanceUuid&&this.getSubstanceClinicalTrials(null,"initial")}},{key:"ngOnDestroy",value:function(){this.subscriptions.forEach(function(i){i.unsubscribe()})}},{key:"getSubstanceClinicalTrials",value:function(i,r){var p=this;this.setPageEvent(i);var l=this.page*this.pageSize;this.showSpinner=!0;var m=this.clinicalTrialService.getClinicalTrials({searchTerm:this.substanceUuid,cutoff:null,type:"substanceKey",order:"$trialNumber",pageSize:this.pageSize,facets:this.privateFacetParams,skip:l}).subscribe(function(u){r&&"initial"===r&&(p.etagAllExport=u.etag),p.clinicalTrialService.totalRecords=u.total,p.setResultData(u.content),p.clinicalTrialCount=u.total,p.etag=u.etag,p.countClinicalTrialOut.emit(p.clinicalTrialCount),p.showSpinner=!1});this.subscriptions.push(m)}},{key:"export",value:function(){var i=this;if(this.etagAllExport){var r="ctus.xlsx",p=this.getApiExportUrl(this.etagAllExport,r);""!==this.authService.getUser()&&this.dialog.open(O.L,{width:"700px",data:{extension:r,type:"substanceClinicalTrialUS",hideOptionButtons:!0}}).afterClosed().subscribe(function(m){var u=m.name,s=m.id;u&&""!==u&&(i.loadingService.setLoading(!0),i.authService.startUserDownload(p,i.privateExport,u+"."+r,s).subscribe(function(v){i.loadingService.setLoading(!1),i.router.navigate(["/user-downloads/",v.id])},function(v){return i.loadingService.setLoading(!1)}))})}}},{key:"getApiExportUrl",value:function(i,r){return this.clinicalTrialService.getApiExportUrl(i,r)}},{key:"clinicalTrialListExportUrl",value:function(){null!=this.substanceUuid&&(this.exportUrl=this.clinicalTrialService.getClinicalTrialListExportUrl(this.substanceUuid))}}]),o}(D);return e.\u0275fac=function(a){return new(a||e)(t.Y36(N.$),t.Y36(R.m),t.Y36(k.E),t.Y36(P.e),t.Y36(q.b),t.Y36(b.F0),t.Y36(w.uw))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-substance-clinical-trials"]],inputs:{substanceUuid:"substanceUuid"},outputs:{countClinicalTrialOut:"countClinicalTrialOut"},features:[t.qOj],decls:2,vars:2,consts:[["class","padtop5px padleft25px font15px colorblue",4,"ngIf"],[4,"ngIf"],[1,"padtop5px","padleft25px","font15px","colorblue"],["class","export",4,"ngIf"],[1,"responsive","mat-table-style"],["class","spinnerstyle",4,"ngIf"],["mat-table","",3,"dataSource"],["matColumnDef","edit"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","nctNumber"],["matColumnDef","title"],["matColumnDef","sponsorName"],["matColumnDef","conditions"],["matColumnDef","outcomemeasures"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","true",3,"length","pageSize","pageSizeOptions","page"],[1,"export"],["matTooltip","Export Search Results","mat-button","",1,"mat-button","export-button","mat-raised-button",3,"click"],["svgIcon","get_app"],[1,"spinnerstyle"],["diameter","80","color","warn","mode","indeterminate"],["mat-header-cell",""],["mat-cell",""],["target","_blank","title","Edit in new tab",1,"clinical-trials-browse-edit1",3,"href"],["svgIcon","edit",2,"width","20px","height","20px"],["target","_blank","title","see clinicaltrials.gov",3,"href"],["mat-header-row",""],["mat-row",""]],template:function(a,o){1&a&&(t.YNc(0,Tt,3,0,"div",0),t.YNc(1,Jt,31,9,"div",1)),2&a&&(t.Q6J("ngIf",!o.clinicalTrialCount),t.xp6(1),t.Q6J("ngIf",o.clinicalTrialCount&&o.clinicalTrialCount>0))},directives:[g.O5,T.lW,A.Hw,Z.Ou,d.BZ,d.w1,d.fO,d.ge,d.Dz,d.ev,d.as,d.XQ,d.nj,d.Gk,y.NW],styles:[".clinical-trials-browse-edit1[_ngcontent-%COMP%], .clinical-trials-browse-edit2[_ngcontent-%COMP%]{text-decoration:none}.clinical-trials-browse-edit1[_ngcontent-%COMP%], .clinical-trials-browse-edit2[_ngcontent-%COMP%]{padding-left:.5em;padding-right:.5em}.mat-table-style[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%]{vertical-align:top;font-size:12px}.font10px[_ngcontent-%COMP%]{font-size:10px}.font15px[_ngcontent-%COMP%]{font-size:15px}.colorgray[_ngcontent-%COMP%]{color:var(--regular-grey-color)}.padleft25px[_ngcontent-%COMP%]{padding-left:25px}.padtop5px[_ngcontent-%COMP%]{padding-top:5px}.colorblue[_ngcontent-%COMP%]{color:var(--deep-purple-color)}.colorred[_ngcontent-%COMP%]{color:var(--regular-red-color)}.btn1[_ngcontent-%COMP%]{color:var(--maroon-color);background-color:var(--light-yellow-color-3);border-radius:10px 0 0 10px;font-size:16px}.spinnerstyle[_ngcontent-%COMP%]{position:absolute;inset:0 0 56px;background:var(--spinner-bg-color);z-index:1;display:-ms-flexbox;display:flex;-ms-flex-align:top;align-items:top;-ms-flex-pack:center;justify-content:center}"]}),e}(),Ft=_(92938);function zt(e,n){1&e&&(t.TgZ(0,"div",2),t.TgZ(1,"b"),t._uU(2,"No Clinical Trial Europe Found"),t.qZA(),t.qZA())}function Bt(e,n){if(1&e){var a=t.EpF();t.TgZ(0,"span",16),t.TgZ(1,"button",17),t.NdJ("click",function(){return t.CHM(a),t.oxw(2).export()}),t._UZ(2,"mat-icon",18),t._uU(3," Export CTs "),t.qZA(),t.qZA()}}function $t(e,n){1&e&&(t.TgZ(0,"div",19),t._UZ(1,"mat-progress-spinner",20),t.qZA())}function jt(e,n){1&e&&(t.TgZ(0,"th",21),t._uU(1,"Eudract Number"),t.qZA())}function Ht(e,n){if(1&e&&(t.TgZ(0,"div"),t.TgZ(1,"a",23),t._uU(2),t.qZA(),t.qZA()),2&e){var a=t.oxw().$implicit;t.xp6(1),t.s9C("href",a.url,t.LSH),t.xp6(1),t.Oqu(a.trialNumber)}}function Gt(e,n){if(1&e&&(t.TgZ(0,"td",22),t.YNc(1,Ht,3,2,"div",1),t.qZA()),2&e){var a=n.$implicit;t.xp6(1),t.Q6J("ngIf",a.trialNumber)}}function Wt(e,n){1&e&&(t.TgZ(0,"th",21),t._uU(1," Title "),t.qZA())}function Kt(e,n){if(1&e&&(t.TgZ(0,"td",22),t._uU(1),t.qZA()),2&e){var a=n.$implicit;t.xp6(1),t.hij(" ",a.title," ")}}function Xt(e,n){1&e&&(t.TgZ(0,"th",21),t._uU(1," Sponsor Name "),t.qZA())}function Vt(e,n){if(1&e&&(t.TgZ(0,"td",22),t._uU(1),t.qZA()),2&e){var a=n.$implicit;t.xp6(1),t.hij(" ",a.sponsorName," ")}}function te(e,n){1&e&&(t.TgZ(0,"th",21),t._uU(1,"Conditions"),t.qZA())}function ee(e,n){if(1&e&&(t.TgZ(0,"td",22),t._uU(1),t.qZA()),2&e){var a=n.$implicit,o=t.oxw(2);t.xp6(1),t.Oqu(o.joinMeddraTerms(a))}}function ne(e,n){1&e&&t._UZ(0,"tr",24)}function ae(e,n){1&e&&t._UZ(0,"tr",25)}var ie=function(){return[5,10,25,100]};function oe(e,n){if(1&e){var a=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"div",2),t.TgZ(2,"b"),t._uU(3,"Clinical Trials Europe"),t.qZA(),t._uU(4," \xa0\xa0\xa0 "),t.qZA(),t.TgZ(5,"div"),t.YNc(6,Bt,4,0,"span",3),t.qZA(),t.TgZ(7,"div",4),t.YNc(8,$t,2,0,"div",5),t.TgZ(9,"table",6),t.ynx(10,7),t.YNc(11,jt,2,0,"th",8),t.YNc(12,Gt,2,1,"td",9),t.BQk(),t.ynx(13,10),t.YNc(14,Wt,2,0,"th",8),t.YNc(15,Kt,2,1,"td",9),t.BQk(),t.ynx(16,11),t.YNc(17,Xt,2,0,"th",8),t.YNc(18,Vt,2,1,"td",9),t.BQk(),t.ynx(19,12),t.YNc(20,te,2,0,"th",8),t.YNc(21,ee,2,1,"td",9),t.BQk(),t.YNc(22,ne,1,0,"tr",13),t.YNc(23,ae,1,0,"tr",14),t.qZA(),t.qZA(),t.TgZ(24,"mat-paginator",15),t.NdJ("page",function(i){return t.CHM(a),t.oxw().getSubstanceClinicalTrialsEurope(i)}),t.qZA(),t.qZA()}if(2&e){var o=t.oxw();t.xp6(6),t.Q6J("ngIf",o.isAdmin),t.xp6(2),t.Q6J("ngIf",o.showSpinner),t.xp6(1),t.Q6J("dataSource",o.paged),t.xp6(13),t.Q6J("matHeaderRowDef",o.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(1),t.Q6J("length",o.totalRecords)("pageSize",5)("pageSizeOptions",t.DdM(8,ie))}}var re=function(){var e=function(n){(0,x.Z)(o,n);var a=(0,S.Z)(o);function o(c,i,r,p,l,m,u){var s;return(0,C.Z)(this,o),(s=a.call(this,c,i)).gaService=c,s.clinicalTrialService=i,s.configService=r,s.authService=p,s.loadingService=l,s.router=m,s.dialog=u,s.clinicalTrialEuCount=0,s.showSpinner=!1,s.subscriptions=[],s.privateExport=!1,s.disableExport=!1,s.etag="",s.etagAllExport="",s.loadingStatus="",s.countClinicalTrialEuOut=new t.vpe,s.displayedColumns=["trialNumber","title","sponsorName","conditions"],s}return(0,h.Z)(o,[{key:"ngOnInit",value:function(){var i=this;this.loadedComponents=this.configService.configData.loadedComponents||null,this.authService.hasAnyRolesAsync("Admin","Updater","SuperUpdater").pipe((0,M.q)(1)).subscribe(function(r){i.isAdmin=r}),this.substanceUuid&&this.getSubstanceClinicalTrialsEurope(null,"initial")}},{key:"ngOnDestroy",value:function(){this.subscriptions.forEach(function(i){i.unsubscribe()})}},{key:"getSubstanceClinicalTrialsEurope",value:function(i,r){var p=this;this.setPageEvent(i),this.showSpinner=!0;var l=this.clinicalTrialService.getSubstanceClinicalTrialsEurope(this.substanceUuid,this.page,this.pageSize).subscribe(function(m){r&&"initial"===r&&(p.etagAllExport=m.etag),p.setResultData(m.content),p.clinicalTrialEuCount=m.total,p.countClinicalTrialEuOut.emit(p.clinicalTrialEuCount),p.showSpinner=!1});this.subscriptions.push(l)}},{key:"export",value:function(){var i=this;if(this.etagAllExport){var r="cteu.xlsx",p=this.getApiExportUrl(this.etagAllExport,r);""!==this.authService.getUser()&&this.dialog.open(O.L,{width:"700px",data:{extension:r,type:"substanceClinicalTrialEU",hideOptionButtons:!0}}).afterClosed().subscribe(function(m){var u=m.name,s=m.id;u&&""!==u&&(i.loadingService.setLoading(!0),i.authService.startUserDownload(p,i.privateExport,u+"."+r,s).subscribe(function(v){i.loadingService.setLoading(!1),i.router.navigate(["/user-downloads/",v.id])},function(v){return i.loadingService.setLoading(!1)}))})}}},{key:"getApiExportUrl",value:function(i,r){return this.clinicalTrialService.getApiEuropeExportUrl(i,r)}},{key:"joinMeddraTerms",value:function(i){if(i)return Ft.map(i.clinicalTrialEuropeMeddraList,"meddraTerm").join("|")}}]),o}(D);return e.\u0275fac=function(a){return new(a||e)(t.Y36(N.$),t.Y36(R.m),t.Y36(k.E),t.Y36(P.e),t.Y36(q.b),t.Y36(b.F0),t.Y36(w.uw))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-substance-clinical-trials-eu"]],inputs:{substanceUuid:"substanceUuid"},outputs:{countClinicalTrialEuOut:"countClinicalTrialEuOut"},features:[t.qOj],decls:2,vars:2,consts:[["class","padtop5px padleft25px font15px colorblue",4,"ngIf"],[4,"ngIf"],[1,"padtop5px","padleft25px","font15px","colorblue"],["class","export",4,"ngIf"],[1,"responsive","mat-table-style"],["class","spinnerstyle",4,"ngIf"],["mat-table","",3,"dataSource"],["matColumnDef","trialNumber"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","title"],["matColumnDef","sponsorName"],["matColumnDef","conditions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","true",3,"length","pageSize","pageSizeOptions","page"],[1,"export"],["matTooltip","Export Search Results","mat-button","",1,"mat-button","export-button","mat-raised-button",3,"click"],["svgIcon","get_app"],[1,"spinnerstyle"],["diameter","80","color","warn","mode","indeterminate"],["mat-header-cell",""],["mat-cell",""],[3,"href"],["mat-header-row",""],["mat-row",""]],template:function(a,o){1&a&&(t.YNc(0,zt,3,0,"div",0),t.YNc(1,oe,25,9,"div",1)),2&a&&(t.Q6J("ngIf",!o.clinicalTrialEuCount),t.xp6(1),t.Q6J("ngIf",o.clinicalTrialEuCount&&o.clinicalTrialEuCount>0))},directives:[g.O5,T.lW,A.Hw,Z.Ou,d.BZ,d.w1,d.fO,d.ge,d.Dz,d.ev,d.as,d.XQ,d.nj,d.Gk,y.NW],styles:[".mat-column-trialNumber[_ngcontent-%COMP%]{word-wrap:break-word!important;white-space:unset!important;-ms-flex:0 0 20%!important;flex:0 0 20%!important;width:20%!important;white-space:nowrap}.mat-table-style[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%]{vertical-align:top;font-size:12px}.font10px[_ngcontent-%COMP%]{font-size:10px}.font15px[_ngcontent-%COMP%]{font-size:15px}.colorgray[_ngcontent-%COMP%]{color:var(--regular-grey-color)}.colorred[_ngcontent-%COMP%]{color:var(--regular-red-color)}.padleft25px[_ngcontent-%COMP%]{padding-left:25px}.padtop5px[_ngcontent-%COMP%]{padding-top:5px}.colorblue[_ngcontent-%COMP%]{color:var(--deep-purple-color)}.spinnerstyle[_ngcontent-%COMP%]{position:absolute;inset:0 0 56px;background:var(--spinner-bg-color);z-index:1;display:-ms-flexbox;display:flex;-ms-flex-align:top;align-items:top;-ms-flex-pack:center;justify-content:center}"]}),e}(),Q=_(43461),se=_(98969),Y=_(64316);function ce(e,n){if(1&e){var a=t.EpF();t.TgZ(0,"span",20),t.TgZ(1,"button",21),t.NdJ("click",function(){return t.CHM(a),t.oxw(2).export()}),t._UZ(2,"mat-icon",22),t._uU(3," Export "),t.qZA(),t.qZA()}}function ue(e,n){if(1&e&&(t.TgZ(0,"div",18),t.YNc(1,ce,4,0,"span",19),t.qZA()),2&e){var a=t.oxw();t.xp6(1),t.Q6J("ngIf",a.isAdmin&&a.adverseEventCount>0)}}function pe(e,n){if(1&e&&(t.TgZ(0,"div",23),t.TgZ(1,"a",24),t.TgZ(2,"button",25),t.TgZ(3,"mat-icon"),t._uU(4,"analytics"),t.qZA(),t.TgZ(5,"span",26),t._uU(6,"Analysis by Substance"),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e){var a=t.oxw();t.xp6(1),t.s9C("href",a.adverseEventShinySubstanceNameURLWithParam,t.LSH)}}function le(e,n){1&e&&(t.TgZ(0,"div",27),t._UZ(1,"mat-progress-spinner",28),t.qZA())}function de(e,n){1&e&&(t.TgZ(0,"th",29),t._uU(1," PT Term "),t.qZA())}function me(e,n){if(1&e&&(t.TgZ(0,"span",32),t.TgZ(1,"a",33),t.TgZ(2,"mat-icon"),t._uU(3,"analytics"),t.qZA(),t.qZA(),t.qZA()),2&e){var a=t.oxw().$implicit,o=t.oxw();t.xp6(1),t.hYB("href","",o.adverseEventShinyAdverseEventURLWithParam,"",o.getDecodeURL(a.ptTerm),"",t.LSH)}}function _e(e,n){if(1&e&&(t.TgZ(0,"td",30),t._uU(1),t.YNc(2,me,4,2,"span",31),t.qZA()),2&e){var a=n.$implicit,o=t.oxw();t.xp6(1),t.hij(" ",a.ptTerm," "),t.xp6(1),t.Q6J("ngIf",!0===o.adverseEventShinyAdverseEventDisplay)}}function ve(e,n){1&e&&(t.TgZ(0,"th",29),t._uU(1," Prim SOC "),t.qZA())}function fe(e,n){if(1&e&&(t.TgZ(0,"td",30),t._uU(1),t.qZA()),2&e){var a=n.$implicit;t.xp6(1),t.hij(" ",a.primSoc," ")}}function ge(e,n){1&e&&(t.TgZ(0,"th",29),t._uU(1," Case Count "),t.qZA())}function be(e,n){if(1&e&&(t.TgZ(0,"td",30),t._uU(1),t.qZA()),2&e){var a=n.$implicit;t.xp6(1),t.hij(" ",a.caseCount,"")}}function he(e,n){1&e&&(t.TgZ(0,"th",29),t._uU(1," PT Count "),t.qZA())}function Ce(e,n){if(1&e&&(t.TgZ(0,"div"),t.TgZ(1,"a",36),t.ALo(2,"titlecase"),t.ALo(3,"titlecase"),t._UZ(4,"div",37),t.qZA(),t.TgZ(5,"span",38),t._uU(6,"FAERS Public Dashboard"),t.qZA(),t.qZA()),2&e){var a=t.oxw().$implicit,o=t.oxw();t.xp6(1),t.FAE("href","",o.FAERSDashboardAdverseEventUrl,"",o.getDecodeURL(t.lcZ(2,5,a.ptTerm)),"",o.FAERSDashboardReactionGroup,"",o.getDecodeURL(t.lcZ(3,7,a.primSoc)),"",t.LSH),t.xp6(3),t.Q6J("innerHTML",a.ptCount,t.oJD)}}function xe(e,n){if(1&e&&t._UZ(0,"div",37),2&e){var a=t.oxw().$implicit;t.Q6J("innerHTML",a.ptCount,t.oJD)}}function Se(e,n){if(1&e&&(t.TgZ(0,"td",30),t.YNc(1,Ce,7,9,"div",34),t.YNc(2,xe,1,1,"ng-template",null,35,t.W1O),t.qZA()),2&e){var a=t.MAs(3),o=t.oxw();t.xp6(1),t.Q6J("ngIf",o.FAERSDashboardAdverseEventUrl)("ngIfElse",a)}}function Te(e,n){1&e&&(t.TgZ(0,"th",29),t._uU(1," PRR "),t.qZA())}function Ae(e,n){if(1&e&&(t.TgZ(0,"td",30),t._uU(1),t.ALo(2,"number"),t.qZA()),2&e){var a=n.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,a.prr,".2-2")," ")}}function Ze(e,n){1&e&&t._UZ(0,"tr",39)}function ye(e,n){1&e&&t._UZ(0,"tr",40)}var Ee=function(){return[5,10,25,100]},Ue=function(){var e=function(n){(0,x.Z)(o,n);var a=(0,S.Z)(o);function o(c,i,r,p,l,m,u){var s;return(0,C.Z)(this,o),(s=a.call(this,i,r)).router=c,s.gaService=i,s.adverseEventService=r,s.loadingService=p,s.configService=l,s.authService=m,s.dialog=u,s.countAdvPtOut=new t.vpe,s.adverseEventCount=0,s.order="$root_ptCount",s.ascDescDir="desc",s.showSpinner=!1,s.sortValues=se.g,s.privateExport=!1,s.disableExport=!1,s.etag="",s.loadingStatus="",s.subscriptions=[],s.adverseEventShinySubstanceNameDisplay=!1,s.adverseEventShinyAdverseEventDisplay=!1,s.FAERSDashboardSearchTerm="/select/Search%20Term/",s.FAERSDashboardReactionTerm="/select/Reaction%20Term/",s.FAERSDashboardReactionGroup="/select/Reaction%20Group/",s.displayedColumns=["ptTerm","primSoc","caseCount","ptCount","prr"],s}return(0,h.Z)(o,[{key:"ngOnInit",value:function(){var i=this,r=this.authService.hasAnyRolesAsync("Admin","Updater","SuperUpdater").subscribe(function(p){i.isAdmin=p});this.subscriptions.push(r),this.bdnum&&(this.getAdverseEventPt(),this.getFaersDashboardUrl(),this.getFaersDashboardRecordByName(),this.adverseEventPtListExportUrl(),this.getAdverseEventShinyConfig())}},{key:"ngOnDestroy",value:function(){this.subscriptions.forEach(function(i){i.unsubscribe()})}},{key:"getAdverseEventPt",value:function(i){var r=this;this.setPageEvent(i),this.showSpinner=!0;var m=this.adverseEventService.getAdverseEventPt(this.order,this.page*this.pageSize,this.pageSize,"root_substanceKey:"+this.bdnum,this.privateFacetParams).subscribe(function(u){r.adverseEventService.totalRecords=u.total,r.adverseEventCount=u.total,r.setResultData(u.content),r.etag=u.etag,r.countAdvPtOut.emit(r.adverseEventCount)},function(u){console.log("error")},function(){m.unsubscribe()});this.loadingStatus="",this.showSpinner=!1}},{key:"adverseEventPtListExportUrl",value:function(){null!=this.bdnum&&(this.exportUrl=this.adverseEventService.getAdverseEventPtListExportUrl(this.bdnum))}},{key:"sortData",value:function(i){var r=this;if(i.active){var p=this.displayedColumns.indexOf(i.active).toString();this.ascDescDir=i.direction,this.sortValues.forEach(function(l){l.displayedColumns&&l.direction&&r.displayedColumns[p]===l.displayedColumns&&r.ascDescDir===l.direction&&(r.order=l.value)}),this.getAdverseEventPt()}}},{key:"export",value:function(){var i=this;if(this.etag){var r="xlsx",p=this.getApiExportUrl(this.etag,r);""!==this.authService.getUser()&&this.dialog.open(O.L,{width:"700px",data:{extension:r,type:"substanceAdverseEventPt",hideOptionButtons:!0}}).afterClosed().subscribe(function(m){var u=m.name,s=m.id;u&&""!==u&&(i.loadingService.setLoading(!0),i.authService.startUserDownload(p,i.privateExport,u+"."+r,s).subscribe(function(v){i.loadingService.setLoading(!1),i.router.navigate(["/user-downloads/",v.id])},function(v){return i.loadingService.setLoading(!1)}))})}}},{key:"getApiExportUrl",value:function(i,r){return this.adverseEventService.getApiExportUrlPt(i,r)}},{key:"getFaersDashboardRecordByName",value:function(){var i=this,r=this.adverseEventService.getFaersDashboardRecordByName(this.substanceName).subscribe(function(p){p&&p.name&&(i.FAERSDashboardSubstanceName=p.name,i.FAERSDashboardAdverseEventUrl=i.FAERSDashboardAdverseEventUrl+p.name+i.FAERSDashboardReactionTerm)});this.subscriptions.push(r)}},{key:"getFaersDashboardUrl",value:function(){this.configService.configData&&this.configService.configData.FAERSDashboardAdverseEventUrl&&null!==this.configService.configData.FAERSDashboardAdverseEventUrl&&(this.FAERSDashboardAdverseEventUrl=this.configService.configData.FAERSDashboardAdverseEventUrl+this.FAERSDashboardSearchTerm)}},{key:"getAdverseEventShinyConfig",value:function(){this.configService.configData&&(this.configService.configData.adverseEventShinySubstanceNameDisplay&&null!==this.configService.configData.adverseEventShinySubstanceNameDisplay&&(this.adverseEventShinySubstanceNameDisplay=JSON.parse(this.configService.configData.adverseEventShinySubstanceNameDisplay)),this.configService.configData.adverseEventShinySubstanceNameURL&&null!==this.configService.configData.adverseEventShinySubstanceNameURL&&(this.adverseEventShinySubstanceNameURL=this.configService.configData.adverseEventShinySubstanceNameURL,this.adverseEventShinySubstanceNameURLWithParam=this.adverseEventShinySubstanceNameURL+decodeURIComponent(this.substanceName)),this.configService.configData.adverseEventShinyAdverseEventDisplay&&null!==this.configService.configData.adverseEventShinyAdverseEventDisplay&&(this.adverseEventShinyAdverseEventDisplay=JSON.parse(this.configService.configData.adverseEventShinyAdverseEventDisplay)),this.configService.configData.adverseEventShinyAdverseEventURL&&null!==this.configService.configData.adverseEventShinyAdverseEventURL&&(this.adverseEventShinyAdverseEventURL=this.configService.configData.adverseEventShinyAdverseEventURL,this.adverseEventShinyAdverseEventURLWithParam=this.adverseEventShinyAdverseEventURL))}},{key:"getDecodeURL",value:function(i){var r="";return null!==i&&(r=decodeURIComponent(i)),r}}]),o}(D);return e.\u0275fac=function(a){return new(a||e)(t.Y36(b.F0),t.Y36(N.$),t.Y36(Q.a),t.Y36(q.b),t.Y36(k.E),t.Y36(P.e),t.Y36(w.uw))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-substance-adverseeventpt"]],inputs:{bdnum:"bdnum",substanceName:"substanceName"},outputs:{countAdvPtOut:"countAdvPtOut"},features:[t.qOj],decls:28,vars:10,consts:[[1,"padtop5px","padleft25px","font15px","colorblue"],[1,"divflex"],[1,"padtop10px"],["class","marginleft50px padleft25px padtopneg50px width120px",4,"ngIf"],["class","marginleft50px padleft25px width200px",4,"ngIf"],[1,"responsive","mat-table-style"],["class","spinnerstyle",4,"ngIf"],["mat-table","","matSort","","matSortActive","ptCount","matSortDirection","desc","matSortDisableClear","",3,"dataSource","matSortChange"],["matColumnDef","ptTerm"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","primSoc"],["matColumnDef","caseCount"],["matColumnDef","ptCount"],["matColumnDef","prr"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","true",3,"length","pageSize","pageSizeOptions","page"],[1,"marginleft50px","padleft25px","padtopneg50px","width120px"],["class","export",4,"ngIf"],[1,"export"],["matTooltip","Export Search Results","mat-button","",1,"mat-button","export-button","mat-raised-button",3,"click"],["svgIcon","get_app"],[1,"marginleft50px","padleft25px","width200px"],["target","_blank",3,"href"],["mat-icon-button","","color","accent","aria-label","Analysis by Substance Name on Shiny Server"],[1,"colororange"],[1,"spinnerstyle"],["diameter","80","color","warn","mode","indeterminate"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["class","",4,"ngIf"],[1,""],["target","_blank","title","Analysis by Adverse Event/PT Term on Shiny Server",3,"href"],[4,"ngIf","ngIfElse"],["noFaersLink",""],["target","_blank","title","FAERS Public Dashboard",3,"href"],[3,"innerHTML"],[1,"colorgray","font10px"],["mat-header-row",""],["mat-row",""]],template:function(a,o){1&a&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"b"),t._uU(4,"Adverse Event PT"),t.qZA(),t.qZA(),t.YNc(5,ue,2,1,"div",3),t.YNc(6,pe,7,1,"div",4),t.qZA(),t.TgZ(7,"div",5),t.YNc(8,le,2,0,"div",6),t.TgZ(9,"table",7),t.NdJ("matSortChange",function(i){return o.sortData(i)}),t.ynx(10,8),t.YNc(11,de,2,0,"th",9),t.YNc(12,_e,3,2,"td",10),t.BQk(),t.ynx(13,11),t.YNc(14,ve,2,0,"th",9),t.YNc(15,fe,2,1,"td",10),t.BQk(),t.ynx(16,12),t.YNc(17,ge,2,0,"th",9),t.YNc(18,be,2,1,"td",10),t.BQk(),t.ynx(19,13),t.YNc(20,he,2,0,"th",9),t.YNc(21,Se,4,2,"td",10),t.BQk(),t.ynx(22,14),t.YNc(23,Te,2,0,"th",9),t.YNc(24,Ae,3,4,"td",10),t.BQk(),t.YNc(25,Ze,1,0,"tr",15),t.YNc(26,ye,1,0,"tr",16),t.qZA(),t.qZA(),t.TgZ(27,"mat-paginator",17),t.NdJ("page",function(i){return o.getAdverseEventPt(i)}),t.qZA(),t.qZA()),2&a&&(t.xp6(5),t.Q6J("ngIf",o.totalRecords>0),t.xp6(1),t.Q6J("ngIf",!0===o.adverseEventShinySubstanceNameDisplay),t.xp6(2),t.Q6J("ngIf",o.showSpinner),t.xp6(1),t.Q6J("dataSource",o.paged),t.xp6(16),t.Q6J("matHeaderRowDef",o.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(1),t.Q6J("length",o.totalRecords)("pageSize",5)("pageSizeOptions",t.DdM(9,Ee)))},directives:[g.O5,T.lW,A.Hw,Z.Ou,d.BZ,Y.YE,d.w1,d.fO,d.ge,Y.nU,d.Dz,d.ev,d.as,d.XQ,d.nj,d.Gk,y.NW],pipes:[g.rS,g.JJ],styles:[".mat-table-style[_ngcontent-%COMP%]{position:relative}.mat-table-style[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%]{vertical-align:top;font-size:12px}.divflex[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex}.font8px[_ngcontent-%COMP%]{font-size:8px}.font10px[_ngcontent-%COMP%]{font-size:10px}.font15px[_ngcontent-%COMP%]{font-size:15px}.margintop10px[_ngcontent-%COMP%]{margin-top:10px}.margintop90px[_ngcontent-%COMP%]{margin-top:90px}marginleft50px[_ngcontent-%COMP%]{margin-left:50px}.padleft25px[_ngcontent-%COMP%]{padding-left:25px}.padtop5px[_ngcontent-%COMP%]{padding-top:5px}.padtop10px[_ngcontent-%COMP%]{padding-top:10px}.padtopneg50px[_ngcontent-%COMP%]{padding-top:-50px}.colorblue[_ngcontent-%COMP%]{color:var(--deep-purple-color)}.colorgray[_ngcontent-%COMP%]{color:var(--regular-grey-color)}.colorred[_ngcontent-%COMP%]{color:var(--regular-red-color)}.colororange[_ngcontent-%COMP%]{color:var(--orange-color-rgb-2)}.bordergray[_ngcontent-%COMP%]{border:1px solid var(--regular-grey-color)}.width120px[_ngcontent-%COMP%]{width:120px;display:block}.width200px[_ngcontent-%COMP%]{width:200px;display:block}.spinnerstyle[_ngcontent-%COMP%]{position:absolute;inset:0 0 56px;background:var(--spinner-bg-color);z-index:1;display:-ms-flexbox;display:flex;-ms-flex-align:top;align-items:top;-ms-flex-pack:center;justify-content:center}"]}),e}(),Ne=_(52395);function De(e,n){if(1&e){var a=t.EpF();t.TgZ(0,"span",16),t.TgZ(1,"button",17),t.NdJ("click",function(){return t.CHM(a),t.oxw().export()}),t._UZ(2,"mat-icon",18),t._uU(3," Export "),t.qZA(),t.qZA()}}function Pe(e,n){1&e&&(t.TgZ(0,"div",19),t._UZ(1,"mat-progress-spinner",20),t.qZA())}function Oe(e,n){1&e&&(t.TgZ(0,"th",21),t._uU(1," DME Reactions "),t.qZA())}function qe(e,n){if(1&e&&(t.TgZ(0,"td",22),t._uU(1),t.qZA()),2&e){var a=n.$implicit;t.xp6(1),t.hij(" ",a.dmeReactions," ")}}function we(e,n){1&e&&(t.TgZ(0,"th",21),t._uU(1," PT Term Meddra "),t.qZA())}function Ye(e,n){if(1&e&&(t.TgZ(0,"td",22),t._uU(1),t.qZA()),2&e){var a=n.$implicit;t.xp6(1),t.hij(" ",a.ptTermMeddra," ")}}function Ie(e,n){1&e&&(t.TgZ(0,"th",21),t._uU(1," Case Count "),t.qZA())}function ke(e,n){if(1&e&&(t.TgZ(0,"td",22),t._uU(1),t.qZA()),2&e){var a=n.$implicit;t.xp6(1),t.hij(" ",a.caseCount," ")}}function Me(e,n){1&e&&(t.TgZ(0,"th",21),t._uU(1," Dme Count "),t.qZA())}function Qe(e,n){if(1&e&&(t.TgZ(0,"td",22),t._uU(1),t.qZA()),2&e){var a=n.$implicit;t.xp6(1),t.hij(" ",a.dmeCount," ")}}function Le(e,n){1&e&&(t.TgZ(0,"th",21),t._uU(1," Dme Count Percent "),t.qZA())}function Je(e,n){if(1&e&&(t.TgZ(0,"td",22),t._uU(1),t.qZA()),2&e){var a=n.$implicit;t.xp6(1),t.hij(" ",a.dmeCountPercent," ")}}function Re(e,n){1&e&&(t.TgZ(0,"th",21),t._uU(1," Weighted Average PRR"),t.qZA())}function Fe(e,n){if(1&e&&(t.TgZ(0,"td",22),t._uU(1),t.ALo(2,"number"),t.qZA()),2&e){var a=n.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,a.weightedAvgPrr,".2-2")," ")}}function ze(e,n){1&e&&t._UZ(0,"tr",23)}function Be(e,n){1&e&&t._UZ(0,"tr",24)}var $e=function(){return[5,10,25,100]},je=function(){var e=function(n){(0,x.Z)(o,n);var a=(0,S.Z)(o);function o(c,i,r,p,l,m){var u;return(0,C.Z)(this,o),(u=a.call(this,i,r)).router=c,u.gaService=i,u.adverseEventService=r,u.authService=p,u.loadingService=l,u.dialog=m,u.countAdvDmeOut=new t.vpe,u.adverseEventCount=0,u.order="$root_dmeCount",u.ascDescDir="desc",u.showSpinner=!1,u.privateExport=!1,u.disableExport=!1,u.etag="",u.loadingStatus="",u.sortValues=Ne.O,u.subscriptions=[],u.displayedColumns=["dmeReactions","ptTermMeddra","caseCount","dmeCount","dmeCountPercent","weightedAvgPrr"],u}return(0,h.Z)(o,[{key:"ngOnInit",value:function(){var i=this,r=this.authService.hasAnyRolesAsync("Admin","Updater","SuperUpdater").subscribe(function(p){i.isAdmin=p});this.subscriptions.push(r),this.bdnum&&(this.getAdverseEventDme(),this.adverseEventDmeListExportUrl())}},{key:"ngOnDestroy",value:function(){this.subscriptions.forEach(function(i){i.unsubscribe()})}},{key:"getAdverseEventDme",value:function(i){var r=this;this.setPageEvent(i),this.showSpinner=!0;var m=this.adverseEventService.getAdverseEventDme(this.order,this.page*this.pageSize,this.pageSize,"root_substanceKey:"+this.bdnum,this.privateFacetParams).subscribe(function(u){r.adverseEventService.totalRecords=u.total,r.adverseEventCount=u.total,r.setResultData(u.content),r.etag=u.etag,r.countAdvDmeOut.emit(r.adverseEventCount)},function(u){console.log("error")},function(){m.unsubscribe()});this.loadingStatus="",this.showSpinner=!1}},{key:"sortData",value:function(i){var r=this;if(i.active){var p=this.displayedColumns.indexOf(i.active).toString();this.ascDescDir=i.direction,this.sortValues.forEach(function(l){l.displayedColumns&&l.direction&&r.displayedColumns[p]===l.displayedColumns&&r.ascDescDir===l.direction&&(r.order=l.value)}),this.getAdverseEventDme()}}},{key:"export",value:function(){var i=this;if(this.etag){var r="xlsx",p=this.getApiExportUrl(this.etag,r);""!==this.authService.getUser()&&this.dialog.open(O.L,{width:"700px",data:{extension:r,type:"substanceAdverseEventDme",hideOptionButtons:!0}}).afterClosed().subscribe(function(m){var u=m.name,s=m.id;u&&""!==u&&(i.loadingService.setLoading(!0),i.authService.startUserDownload(p,i.privateExport,u+"."+r,s).subscribe(function(v){i.loadingService.setLoading(!1),i.router.navigate(["/user-downloads/",v.id])},function(v){return i.loadingService.setLoading(!1)}))})}}},{key:"getApiExportUrl",value:function(i,r){return this.adverseEventService.getApiExportUrlDme(i,r)}},{key:"adverseEventDmeListExportUrl",value:function(){null!=this.bdnum&&(this.exportUrl=this.adverseEventService.getAdverseEventDmeListExportUrl(this.bdnum))}}]),o}(D);return e.\u0275fac=function(a){return new(a||e)(t.Y36(b.F0),t.Y36(N.$),t.Y36(Q.a),t.Y36(P.e),t.Y36(q.b),t.Y36(w.uw))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-substance-adverseeventdme"]],inputs:{bdnum:"bdnum"},outputs:{countAdvDmeOut:"countAdvDmeOut"},features:[t.qOj],decls:29,vars:9,consts:[[1,"padtop5px","padleft25px","font15px","colorblue"],["class","export",4,"ngIf"],[1,"responsive","mat-table-style"],["class","spinnerstyle",4,"ngIf"],["mat-table","","matSort","","matSortActive","dmeCount","matSortDirection","desc","matSortDisableClear","",3,"dataSource","matSortChange"],["matColumnDef","dmeReactions"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","ptTermMeddra"],["matColumnDef","caseCount"],["matColumnDef","dmeCount"],["matColumnDef","dmeCountPercent"],["matColumnDef","weightedAvgPrr"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","true",3,"length","pageSize","pageSizeOptions","page"],[1,"export"],["matTooltip","Export Search Results","mat-button","",1,"mat-button","export-button","mat-raised-button",3,"click"],["svgIcon","get_app"],[1,"spinnerstyle"],["diameter","80","color","warn","mode","indeterminate"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(a,o){1&a&&(t.TgZ(0,"div",0),t.TgZ(1,"b"),t._uU(2,"Adverse Event DME"),t.qZA(),t._uU(3," \xa0\xa0\xa0 "),t.YNc(4,De,4,0,"span",1),t.qZA(),t.TgZ(5,"div",2),t.YNc(6,Pe,2,0,"div",3),t.TgZ(7,"table",4),t.NdJ("matSortChange",function(i){return o.sortData(i)}),t.ynx(8,5),t.YNc(9,Oe,2,0,"th",6),t.YNc(10,qe,2,1,"td",7),t.BQk(),t.ynx(11,8),t.YNc(12,we,2,0,"th",6),t.YNc(13,Ye,2,1,"td",7),t.BQk(),t.ynx(14,9),t.YNc(15,Ie,2,0,"th",6),t.YNc(16,ke,2,1,"td",7),t.BQk(),t.ynx(17,10),t.YNc(18,Me,2,0,"th",6),t.YNc(19,Qe,2,1,"td",7),t.BQk(),t.ynx(20,11),t.YNc(21,Le,2,0,"th",6),t.YNc(22,Je,2,1,"td",7),t.BQk(),t.ynx(23,12),t.YNc(24,Re,2,0,"th",6),t.YNc(25,Fe,3,4,"td",7),t.BQk(),t.YNc(26,ze,1,0,"tr",13),t.YNc(27,Be,1,0,"tr",14),t.qZA(),t.qZA(),t.TgZ(28,"mat-paginator",15),t.NdJ("page",function(i){return o.getAdverseEventDme(i)}),t.qZA()),2&a&&(t.xp6(4),t.Q6J("ngIf",o.isAdmin&&o.adverseEventCount>0),t.xp6(2),t.Q6J("ngIf",o.showSpinner),t.xp6(1),t.Q6J("dataSource",o.paged),t.xp6(19),t.Q6J("matHeaderRowDef",o.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(1),t.Q6J("length",o.totalRecords)("pageSize",5)("pageSizeOptions",t.DdM(8,$e)))},directives:[g.O5,T.lW,A.Hw,Z.Ou,d.BZ,Y.YE,d.w1,d.fO,d.ge,Y.nU,d.Dz,d.ev,d.as,d.XQ,d.nj,d.Gk,y.NW],pipes:[g.JJ],styles:[".mat-table-style[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%]{vertical-align:top;font-size:12px}.font15px[_ngcontent-%COMP%]{font-size:15px}.padleft25px[_ngcontent-%COMP%]{padding-left:25px}.padtop5px[_ngcontent-%COMP%]{padding-top:5px}.colorpurple[_ngcontent-%COMP%]{color:var(--deep-purple-color)}.colorgray[_ngcontent-%COMP%]{color:var(--regular-grey-color)}.spinnerstyle[_ngcontent-%COMP%]{position:absolute;inset:0 0 56px;background:var(--spinner-bg-color);z-index:1;display:-ms-flexbox;display:flex;-ms-flex-align:top;align-items:top;-ms-flex-pack:center;justify-content:center}"]}),e}(),He=_(34009);function Ge(e,n){if(1&e){var a=t.EpF();t.TgZ(0,"span",14),t.TgZ(1,"button",15),t.NdJ("click",function(){return t.CHM(a),t.oxw().export()}),t._UZ(2,"mat-icon",16),t._uU(3," Export "),t.qZA(),t.qZA()}}function We(e,n){1&e&&(t.TgZ(0,"div",17),t._UZ(1,"mat-progress-spinner",18),t.qZA())}function Ke(e,n){1&e&&(t.TgZ(0,"th",19),t._uU(1," Adverse Event "),t.qZA())}function Xe(e,n){if(1&e&&(t.TgZ(0,"td",20),t._uU(1),t.qZA()),2&e){var a=n.$implicit;t.xp6(1),t.hij(" ",a.adverseEvent," ")}}function Ve(e,n){1&e&&(t.TgZ(0,"th",19),t._uU(1," Species "),t.qZA())}function tn(e,n){if(1&e&&(t.TgZ(0,"td",20),t._uU(1),t.qZA()),2&e){var a=n.$implicit;t.xp6(1),t.hij(" ",a.species," ")}}function en(e,n){1&e&&(t.TgZ(0,"th",19),t._uU(1," Adverse Event Count "),t.qZA())}function nn(e,n){if(1&e&&(t.TgZ(0,"td",20),t._uU(1),t.qZA()),2&e){var a=n.$implicit;t.xp6(1),t.hij(" ",a.aeCount," ")}}function an(e,n){1&e&&(t.TgZ(0,"th",19),t._uU(1," Route of Administration "),t.qZA())}function on(e,n){if(1&e&&(t.TgZ(0,"td",20),t._uU(1),t.qZA()),2&e){var a=n.$implicit;t.xp6(1),t.hij(" ",a.routeOfAdmin," ")}}function rn(e,n){1&e&&t._UZ(0,"tr",21)}function sn(e,n){1&e&&t._UZ(0,"tr",22)}var cn=function(){return[5,10,25,100]},un=function(){var e=function(n){(0,x.Z)(o,n);var a=(0,S.Z)(o);function o(c,i,r,p,l,m){var u;return(0,C.Z)(this,o),(u=a.call(this,i,r)).router=c,u.gaService=i,u.adverseEventService=r,u.authService=p,u.loadingService=l,u.dialog=m,u.countAdvCvmOut=new t.vpe,u.adverseEventCount=0,u.order="$root_aeCount",u.ascDescDir="desc",u.showSpinner=!1,u.privateExport=!1,u.disableExport=!1,u.etag="",u.loadingStatus="",u.sortValues=He.l,u.subscriptions=[],u.displayedColumns=["adverseEvent","species","adverseEventCount","routeOfAdmin"],u}return(0,h.Z)(o,[{key:"ngOnInit",value:function(){var i=this,r=this.authService.hasAnyRolesAsync("Admin","Updater","SuperUpdater").subscribe(function(p){i.isAdmin=p});this.subscriptions.push(r),this.bdnum&&(this.getAdverseEventCvm(),this.adverseEventCvmListExportUrl())}},{key:"ngOnDestroy",value:function(){this.subscriptions.forEach(function(i){i.unsubscribe()})}},{key:"getAdverseEventCvm",value:function(i){var r=this;this.setPageEvent(i),this.showSpinner=!0;var m=this.adverseEventService.getAdverseEventCvm(this.order,this.page*this.pageSize,this.pageSize,"root_substanceKey:"+this.bdnum,this.privateFacetParams).subscribe(function(u){r.adverseEventService.totalRecords=u.total,r.adverseEventCount=u.total,r.setResultData(u.content),r.etag=u.etag,r.countAdvCvmOut.emit(r.adverseEventCount)},function(u){console.log("error")},function(){m.unsubscribe()});this.loadingStatus="",this.showSpinner=!1}},{key:"sortData",value:function(i){var r=this;if(i.active){var p=this.displayedColumns.indexOf(i.active).toString();this.ascDescDir=i.direction,this.sortValues.forEach(function(l){l.displayedColumns&&l.direction&&r.displayedColumns[p]===l.displayedColumns&&r.ascDescDir===l.direction&&(r.order=l.value)}),this.getAdverseEventCvm()}}},{key:"export",value:function(){var i=this;if(this.etag){var r="xlsx",p=this.getApiExportUrl(this.etag,r);""!==this.authService.getUser()&&this.dialog.open(O.L,{width:"700px",data:{extension:r,type:"substanceAdverseEventCvm",hideOptionButtons:!0}}).afterClosed().subscribe(function(m){var u=m.name,s=m.id;u&&""!==u&&(i.loadingService.setLoading(!0),i.authService.startUserDownload(p,i.privateExport,u+"."+r,s).subscribe(function(v){i.loadingService.setLoading(!1),i.router.navigate(["/user-downloads/",v.id])},function(v){return i.loadingService.setLoading(!1)}))})}}},{key:"getApiExportUrl",value:function(i,r){return this.adverseEventService.getApiExportUrlCvm(i,r)}},{key:"adverseEventCvmListExportUrl",value:function(){null!=this.bdnum&&(this.exportUrl=this.adverseEventService.getAdverseEventCvmListExportUrl(this.bdnum))}}]),o}(D);return e.\u0275fac=function(a){return new(a||e)(t.Y36(b.F0),t.Y36(N.$),t.Y36(Q.a),t.Y36(P.e),t.Y36(q.b),t.Y36(w.uw))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-substance-adverseeventcvm"]],inputs:{bdnum:"bdnum"},outputs:{countAdvCvmOut:"countAdvCvmOut"},features:[t.qOj],decls:23,vars:9,consts:[[1,"padtop5px","padleft25px","font15px","colorblue"],["class","export",4,"ngIf"],[1,"responsive","mat-table-style"],["class","spinnerstyle",4,"ngIf"],["mat-table","","matSort","","matSortActive","adverseEventCount","matSortDirection","desc","matSortDisableClear","",3,"dataSource","matSortChange"],["matColumnDef","adverseEvent"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","species"],["matColumnDef","adverseEventCount"],["matColumnDef","routeOfAdmin"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","true",3,"length","pageSize","pageSizeOptions","page"],[1,"export"],["matTooltip","Export Search Results","mat-button","",1,"mat-button","export-button","mat-raised-button",3,"click"],["svgIcon","get_app"],[1,"spinnerstyle"],["diameter","80","color","warn","mode","indeterminate"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(a,o){1&a&&(t.TgZ(0,"div",0),t.TgZ(1,"b"),t._uU(2,"Adverse Event CVM"),t.qZA(),t._uU(3," \xa0\xa0\xa0 "),t.YNc(4,Ge,4,0,"span",1),t.qZA(),t.TgZ(5,"div",2),t.YNc(6,We,2,0,"div",3),t.TgZ(7,"table",4),t.NdJ("matSortChange",function(i){return o.sortData(i)}),t.ynx(8,5),t.YNc(9,Ke,2,0,"th",6),t.YNc(10,Xe,2,1,"td",7),t.BQk(),t.ynx(11,8),t.YNc(12,Ve,2,0,"th",6),t.YNc(13,tn,2,1,"td",7),t.BQk(),t.ynx(14,9),t.YNc(15,en,2,0,"th",6),t.YNc(16,nn,2,1,"td",7),t.BQk(),t.ynx(17,10),t.YNc(18,an,2,0,"th",6),t.YNc(19,on,2,1,"td",7),t.BQk(),t.YNc(20,rn,1,0,"tr",11),t.YNc(21,sn,1,0,"tr",12),t.qZA(),t.qZA(),t.TgZ(22,"mat-paginator",13),t.NdJ("page",function(i){return o.getAdverseEventCvm(i)}),t.qZA()),2&a&&(t.xp6(4),t.Q6J("ngIf",o.isAdmin&&o.adverseEventCount>0),t.xp6(2),t.Q6J("ngIf",o.showSpinner),t.xp6(1),t.Q6J("dataSource",o.paged),t.xp6(13),t.Q6J("matHeaderRowDef",o.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(1),t.Q6J("length",o.totalRecords)("pageSize",5)("pageSizeOptions",t.DdM(8,cn)))},directives:[g.O5,T.lW,A.Hw,Z.Ou,d.BZ,Y.YE,d.w1,d.fO,d.ge,Y.nU,d.Dz,d.ev,d.as,d.XQ,d.nj,d.Gk,y.NW],styles:[".mat-table-style[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%]{vertical-align:top;font-size:12px}.font15px[_ngcontent-%COMP%]{font-size:15px}.padleft25px[_ngcontent-%COMP%]{padding-left:25px}.padtop5px[_ngcontent-%COMP%]{padding-top:5px}.colorpurple[_ngcontent-%COMP%]{color:var(--deep-purple-color)}.colorgray[_ngcontent-%COMP%]{color:var(--regular-grey-color)}.spinnerstyle[_ngcontent-%COMP%]{position:absolute;inset:0 0 56px;background:var(--spinner-bg-color);z-index:1;display:-ms-flexbox;display:flex;-ms-flex-align:top;align-items:top;-ms-flex-pack:center;justify-content:center}"]}),e}(),pn=_(91781);function ln(e,n){if(1&e){var a=t.EpF();t.TgZ(0,"span",18),t.TgZ(1,"button",19),t.NdJ("click",function(){return t.CHM(a),t.oxw().export()}),t._UZ(2,"mat-icon",20),t._uU(3," Export "),t.qZA(),t.qZA()}}function dn(e,n){1&e&&(t.TgZ(0,"div",21),t._UZ(1,"mat-progress-spinner",22),t.qZA())}function mn(e,n){1&e&&(t.TgZ(0,"th",23),t._uU(1,"Product/Substance Name"),t.qZA())}function _n(e,n){if(1&e&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&e){var a=t.oxw(2).$implicit;t.xp6(1),t.Oqu(a.productSubstanceName)}}function vn(e,n){1&e&&t._uU(0," View ")}_(52489);var fn=function(n){return["/impurities",n,"edit"]};function gn(e,n){if(1&e&&(t.TgZ(0,"a",30),t._UZ(1,"mat-icon",31),t.qZA()),2&e){var a=t.oxw(2).$implicit;t.Q6J("routerLink",t.VKq(1,fn,a.id))}}var bn=function(n){return["/impurities",n]};function hn(e,n){if(1&e&&(t.TgZ(0,"div"),t.TgZ(1,"a",26),t.YNc(2,_n,2,1,"div",27),t.YNc(3,vn,1,0,"ng-template",null,28,t.W1O),t.qZA(),t._uU(5," \xa0\xa0 "),t.YNc(6,gn,2,3,"a",29),t.qZA()),2&e){var a=t.MAs(4),o=t.oxw().$implicit,c=t.oxw();t.xp6(1),t.Q6J("routerLink",t.VKq(4,bn,o.id)),t.xp6(1),t.Q6J("ngIf",o.productSubstanceName)("ngIfElse",a),t.xp6(4),t.Q6J("ngIf",c.isAdmin)}}function Cn(e,n){if(1&e&&(t.TgZ(0,"td",24),t.YNc(1,hn,7,6,"div",25),t.qZA()),2&e){var a=n.$implicit;t.xp6(1),t.Q6J("ngIf",a.id)}}function xn(e,n){1&e&&(t.TgZ(0,"th",23),t._uU(1," Source Type"),t.qZA())}function Sn(e,n){if(1&e&&(t.TgZ(0,"td",24),t._uU(1),t.qZA()),2&e){var a=n.$implicit;t.xp6(1),t.hij(" ",a.sourceType," ")}}function Tn(e,n){1&e&&(t.TgZ(0,"th",23),t._uU(1," Source "),t.qZA())}function An(e,n){if(1&e&&(t.TgZ(0,"td",24),t._uU(1),t.qZA()),2&e){var a=n.$implicit;t.xp6(1),t.hij(" ",a.source," ")}}function Zn(e,n){1&e&&(t.TgZ(0,"th",23),t._uU(1," Source ID"),t.qZA())}function yn(e,n){if(1&e&&(t.TgZ(0,"td",24),t._uU(1),t.qZA()),2&e){var a=n.$implicit;t.xp6(1),t.hij(" ",a.sourceId," ")}}function En(e,n){1&e&&(t.TgZ(0,"th",23),t._uU(1," Type "),t.qZA())}function Un(e,n){if(1&e&&(t.TgZ(0,"td",24),t._uU(1),t.qZA()),2&e){var a=n.$implicit;t.xp6(1),t.hij(" ",a.type," ")}}function Nn(e,n){1&e&&(t.TgZ(0,"th",23),t._uU(1," Spec Type "),t.qZA())}function Dn(e,n){if(1&e&&(t.TgZ(0,"td",24),t._uU(1),t.qZA()),2&e){var a=n.$implicit;t.xp6(1),t.hij(" ",a.specType," ")}}function Pn(e,n){1&e&&(t.TgZ(0,"th",23),t._uU(1," Parent Substance "),t.qZA())}var On=function(n){return["/substances",n]};function qn(e,n){if(1&e&&(t.TgZ(0,"div"),t.TgZ(1,"a",26),t.TgZ(2,"span",33),t._uU(3),t.qZA(),t.qZA(),t.qZA()),2&e){var a=n.$implicit;t.xp6(1),t.Q6J("routerLink",t.VKq(2,On,a._parentSubstanceUuid)),t.xp6(2),t.Oqu(a._parentSubstanceName)}}function wn(e,n){if(1&e&&(t.TgZ(0,"td",24),t.YNc(1,qn,4,4,"div",32),t.qZA()),2&e){var a=n.$implicit;t.xp6(1),t.Q6J("ngForOf",a.impuritiesSubstanceList)}}function Yn(e,n){1&e&&(t.TgZ(0,"th",23),t._uU(1," Impurities Related Substance"),t.qZA())}function In(e,n){if(1&e&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&e){var a=t.oxw(2).$implicit;t.xp6(1),t.hij("\xa0\xa0\xa0\xa0",a.limitType,"\xa0")}}function kn(e,n){if(1&e&&(t.TgZ(0,"span",38),t._UZ(1,"br"),t._uU(2),t.qZA()),2&e){var a=t.oxw(2).$implicit;t.xp6(2),t.hij("\xa0\xa0\xa0\xa0",a.impurityType," ")}}function Mn(e,n){if(1&e&&(t.TgZ(0,"div"),t.TgZ(1,"span",36),t.YNc(2,In,2,1,"span",25),t._uU(3),t.qZA(),t.YNc(4,kn,3,1,"span",37),t.qZA()),2&e){var a=t.oxw().$implicit;t.xp6(2),t.Q6J("ngIf",a.limitType),t.xp6(1),t.AsE(" ",a.limitValue,"\xa0",a.unit," "),t.xp6(1),t.Q6J("ngIf",a.impurityType)}}function Qn(e,n){if(1&e&&(t.TgZ(0,"div",35),t.YNc(1,Mn,5,4,"div",25),t.qZA()),2&e){var a=n.$implicit,o=t.oxw(4);t.xp6(1),t.Q6J("ngIf",a.relatedSubstanceUuid===o.substanceUuid)}}function Ln(e,n){if(1&e&&(t.TgZ(0,"div"),t.YNc(1,Qn,2,1,"div",34),t.qZA()),2&e){var a=n.$implicit;t.xp6(1),t.Q6J("ngForOf",a.impuritiesDetailsList)}}function Jn(e,n){if(1&e&&(t.TgZ(0,"div"),t.YNc(1,Ln,2,1,"div",32),t.qZA()),2&e){var a=n.$implicit;t.xp6(1),t.Q6J("ngForOf",a.impuritiesTestList)}}function Rn(e,n){if(1&e&&(t.TgZ(0,"td",24),t.YNc(1,Jn,2,1,"div",32),t.qZA()),2&e){var a=n.$implicit;t.xp6(1),t.Q6J("ngForOf",a.impuritiesSubstanceList)}}function Fn(e,n){1&e&&t._UZ(0,"tr",39)}function zn(e,n){1&e&&t._UZ(0,"tr",40)}var Bn=function(){return[5,10,25,100]},$n=function(){var e=function(n){(0,x.Z)(o,n);var a=(0,S.Z)(o);function o(c,i,r,p,l,m,u){var s;return(0,C.Z)(this,o),(s=a.call(this,i,r)).router=c,s.gaService=i,s.impuritiesService=r,s.generalService=p,s.authService=l,s.loadingService=m,s.dialog=u,s.countImpuritiesOut=new t.vpe,s.subscriptions=[],s.showSpinner=!1,s.totalImpurities=0,s.impuritiesCount=0,s.impuritiesTestTotal=0,s.pageIndex=0,s.pageSize=5,s.privateExport=!1,s.disableExport=!1,s.etag="",s.displayedColumns=["productName","sourceType","source","sourceid","type","specType","parentSubstance","relatedSubstance"],s}return(0,h.Z)(o,[{key:"ngOnInit",value:function(){var i=this,r=this.authService.hasAnyRolesAsync("Admin","Updater","SuperUpdater").subscribe(function(p){i.isAdmin=p});this.subscriptions.push(r),this.substanceUuid&&(this.getImpuritiesBySubstanceUuid(),this.impuritiesListExportUrl())}},{key:"ngOnDestroy",value:function(){this.subscriptions.forEach(function(i){i&&i.unsubscribe()})}},{key:"searchImpurities",value:function(){var i=this;this.privateSearchTerm=this.substanceUuid;var p=this.impuritiesService.searchImpurities(this.pageIndex*this.pageSize,this.pageSize,this.privateSearchTerm,this.privateFacetParams).subscribe(function(l){i.setResultData(l.content),i.impurities=l.content,i.impuritiesCount=l.total,i.countImpuritiesOut.emit(i.impuritiesCount),i.etag=l.etag},function(l){},function(){p.unsubscribe()})}},{key:"getImpuritiesBySubstanceUuid",value:function(i){var r=this;this.setPageEvent(i),this.showSpinner=!0,this.impuritiesService.getImpuritiesBySubstanceUuid(this.substanceUuid).subscribe(function(p){r.impuritiesService.totalRecords=p.total,r.impurities=p.content,r.loadImpuritiesTestDetails(),r.setResultData(r.impurities),r.totalImpurities=p.total,r.etag=p.etag,r.countImpuritiesOut.emit(r.totalImpurities)}),this.showSpinner=!1}},{key:"loadImpuritiesTestDetails",value:function(){var i=this;this.impurities.forEach(function(r,p){r.impuritiesSubstanceList.forEach(function(l,m){l.substanceUuid&&l.substanceUuid===i.substanceUuid&&(l._parentSubstanceName=i.substanceName,l._parentSubstanceUuid=l.substanceUuid),l.impuritiesTestList.forEach(function(u,s){u.impuritiesDetailsList.forEach(function(f,v){if(null!=f.relatedSubstanceUuid&&f.relatedSubstanceUuid===i.substanceUuid){var E=i.generalService.getSubstanceNamesBySubstanceUuid(l.substanceUuid).subscribe(function(U){U.forEach(function(z,Ga){!0===z.displayName&&(l._parentSubstanceName=z.name,l._parentSubstanceUuid=l.substanceUuid)})});i.subscriptions.push(E)}})})})})}},{key:"getSubstanceNames",value:function(i){var r;if(i){var p=this.generalService.getSubstanceNamesBySubstanceUuid(i).subscribe(function(l){l.forEach(function(u,s){!0===u.displayName&&(r=u.name)})});return this.subscriptions.push(p),r}}},{key:"export",value:function(){var i=this;if(this.etag){var r="xlsx",p=this.getApiExportUrl(this.etag,r);""!==this.authService.getUser()&&this.dialog.open(O.L,{width:"700px",data:{extension:r,type:"substanceImpurities",hideOptionButtons:!0}}).afterClosed().subscribe(function(m){var u=m.name,s=m.id;u&&""!==u&&(i.loadingService.setLoading(!0),i.authService.startUserDownload(p,i.privateExport,u+"."+r,s).subscribe(function(v){i.loadingService.setLoading(!1),i.router.navigate(["/user-downloads/",v.id])},function(v){return i.loadingService.setLoading(!1)}))})}}},{key:"getApiExportUrl",value:function(i,r){return this.impuritiesService.getApiExportUrl(i,r)}},{key:"impuritiesListExportUrl",value:function(){null!=this.substanceUuid&&(this.exportUrl=this.impuritiesService.getImpuritiesListExportUrl(this.substanceUuid))}}]),o}(D);return e.\u0275fac=function(a){return new(a||e)(t.Y36(b.F0),t.Y36(N.$),t.Y36(pn.q),t.Y36(J.m),t.Y36(P.e),t.Y36(q.b),t.Y36(w.uw))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-substance-impurities"]],inputs:{substanceUuid:"substanceUuid",substanceName:"substanceName"},outputs:{countImpuritiesOut:"countImpuritiesOut"},features:[t.qOj],decls:35,vars:9,consts:[[1,"padtop5px","padleft25px","font15px","colorblue"],["class","export",4,"ngIf"],[1,"responsive","mat-table-style"],["class","spinnerstyle",4,"ngIf"],["mat-table","",3,"dataSource"],["matColumnDef","productName"],["mat-header-cell","","class","width100px",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","sourceType"],["matColumnDef","source"],["matColumnDef","sourceid"],["matColumnDef","type"],["matColumnDef","specType"],["matColumnDef","parentSubstance"],["matColumnDef","relatedSubstance"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","true",3,"length","pageSize","pageSizeOptions","page"],[1,"export"],["matTooltip","Export Search Results","mat-button","",1,"mat-button","export-button","mat-raised-button",3,"click"],["svgIcon","get_app"],[1,"spinnerstyle"],["diameter","80","color","warn","mode","indeterminate"],["mat-header-cell","",1,"width100px"],["mat-cell",""],[4,"ngIf"],["target","_blank",3,"routerLink"],[4,"ngIf","ngIfElse"],["noProdName",""],["target","_blank","matTooltip","Edit Impurities Record",3,"routerLink",4,"ngIf"],["target","_blank","matTooltip","Edit Impurities Record",3,"routerLink"],["svgIcon","edit"],[4,"ngFor","ngForOf"],[1,"colorblue"],["class","font12px",4,"ngFor","ngForOf"],[1,"font12px"],[1,"colorgreen"],["class","colorpurple",4,"ngIf"],[1,"colorpurple"],["mat-header-row",""],["mat-row",""]],template:function(a,o){1&a&&(t.TgZ(0,"div",0),t.TgZ(1,"b"),t._uU(2,"Impurities Specs"),t.qZA(),t._uU(3," \xa0\xa0\xa0 "),t.YNc(4,ln,4,0,"span",1),t.qZA(),t.TgZ(5,"div",2),t.YNc(6,dn,2,0,"div",3),t.TgZ(7,"table",4),t.ynx(8,5),t.YNc(9,mn,2,0,"th",6),t.YNc(10,Cn,2,1,"td",7),t.BQk(),t.ynx(11,8),t.YNc(12,xn,2,0,"th",6),t.YNc(13,Sn,2,1,"td",7),t.BQk(),t.ynx(14,9),t.YNc(15,Tn,2,0,"th",6),t.YNc(16,An,2,1,"td",7),t.BQk(),t.ynx(17,10),t.YNc(18,Zn,2,0,"th",6),t.YNc(19,yn,2,1,"td",7),t.BQk(),t.ynx(20,11),t.YNc(21,En,2,0,"th",6),t.YNc(22,Un,2,1,"td",7),t.BQk(),t.ynx(23,12),t.YNc(24,Nn,2,0,"th",6),t.YNc(25,Dn,2,1,"td",7),t.BQk(),t.ynx(26,13),t.YNc(27,Pn,2,0,"th",6),t.YNc(28,wn,2,1,"td",7),t.BQk(),t.ynx(29,14),t.YNc(30,Yn,2,0,"th",6),t.YNc(31,Rn,2,1,"td",7),t.BQk(),t.YNc(32,Fn,1,0,"tr",15),t.YNc(33,zn,1,0,"tr",16),t.qZA(),t.qZA(),t.TgZ(34,"mat-paginator",17),t.NdJ("page",function(i){return o.getImpuritiesBySubstanceUuid(i)}),t.qZA()),2&a&&(t.xp6(4),t.Q6J("ngIf",o.isAdmin),t.xp6(2),t.Q6J("ngIf",o.showSpinner),t.xp6(1),t.Q6J("dataSource",o.paged),t.xp6(25),t.Q6J("matHeaderRowDef",o.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(1),t.Q6J("length",o.totalRecords)("pageSize",5)("pageSizeOptions",t.DdM(8,Bn)))},directives:[g.O5,T.lW,A.Hw,Z.Ou,d.BZ,d.w1,d.fO,d.ge,d.Dz,d.ev,b.yS,g.sg,d.as,d.XQ,d.nj,d.Gk,y.NW],styles:['@charset "UTF-8";.mat-table-style[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%]{vertical-align:top;font-size:12px}.bordergray[_ngcontent-%COMP%]{border:1px solid var(--regular-grey-color)}.font10px[_ngcontent-%COMP%]{font-size:10px}.font12px[_ngcontent-%COMP%]{font-size:12px}.font15px[_ngcontent-%COMP%]{font-size:15px}.colorgray[_ngcontent-%COMP%]{color:var(--regular-grey-color)}.colorred[_ngcontent-%COMP%]{color:var(--regular-red-color)}.colorgreen[_ngcontent-%COMP%]{color:var(--regular-green-color)}.colorpurple[_ngcontent-%COMP%]{color:var(--regular-purple-color)}.colorblue[_ngcontent-%COMP%]{color:var(--royal-blue-color)}.padleft25px[_ngcontent-%COMP%]{padding-left:25px}.padtop5px[_ngcontent-%COMP%]{padding-top:5px}.marginbottom10px[_ngcontent-%COMP%]{margin-bottom:10px}.width100px[_ngcontent-%COMP%]{width:100px}ol[_ngcontent-%COMP%], li[_ngcontent-%COMP%]{margin-left:0;padding-left:0}\\200b[_ngcontent-%COMP%]   .spinnerstyle[_ngcontent-%COMP%]{position:absolute;inset:0 0 56px;background:var(--spinner-bg-color);z-index:1;display:-ms-flexbox;display:flex;-ms-flex-align:top;align-items:top;-ms-flex-pack:center;justify-content:center}']}),e}();function jn(e,n){if(1&e&&t._UZ(0,"a",5),2&e){var a=t.oxw();t.Q6J("href",a.baseDomain+"/ginas/app/substance/"+a.substance.uuid+"#fdadetails",t.LSH)}}function Hn(e,n){1&e&&(t.TgZ(0,"div"),t._UZ(1,"br"),t.TgZ(2,"div",9),t.TgZ(3,"b"),t._uU(4,"No Product Found"),t.qZA(),t.qZA(),t._UZ(5,"br"),t.qZA())}function Gn(e,n){if(1&e){var a=t.EpF();t.TgZ(0,"span",29),t.TgZ(1,"button",30),t.NdJ("click",function(){return t.CHM(a),t.oxw(3).export()}),t._UZ(2,"mat-icon",31),t._uU(3," Export All Products "),t.qZA(),t.qZA()}}function Wn(e,n){1&e&&(t.TgZ(0,"div",32),t._UZ(1,"mat-progress-spinner",33),t.qZA())}function Kn(e,n){1&e&&(t.TgZ(0,"th",34),t._uU(1," Product ID "),t.qZA())}function Xn(e,n){if(1&e&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&e){var a=t.oxw(2).$implicit;t.xp6(1),t.hij(" ",a.productNDC," ")}}function Vn(e,n){1&e&&t._uU(0," (NO NDC) ")}var ta=function(n){return["/product",n,"edit"]};function ea(e,n){if(1&e&&(t.TgZ(0,"a",40),t._UZ(1,"mat-icon",41),t.qZA()),2&e){var a=t.oxw(2).$implicit;t.Q6J("routerLink",t.VKq(1,ta,a.productId))}}var na=function(n){return["/product",n]};function aa(e,n){if(1&e&&(t.TgZ(0,"span"),t.TgZ(1,"a",36),t.YNc(2,Xn,2,1,"span",37),t.YNc(3,Vn,1,0,"ng-template",null,38,t.W1O),t.qZA(),t._uU(5," \xa0\xa0 "),t.YNc(6,ea,2,3,"a",39),t.qZA()),2&e){var a=t.MAs(4),o=t.oxw().$implicit,c=t.oxw(3);t.xp6(1),t.Q6J("routerLink",t.VKq(4,na,o.productId)),t.xp6(1),t.Q6J("ngIf",o.productNDC)("ngIfElse",a),t.xp6(4),t.Q6J("ngIf",c.isAdmin)}}function ia(e,n){if(1&e&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&e){var a=t.oxw(2).$implicit;t.xp6(1),t.hij(" ",a.productNDC," ")}}function oa(e,n){1&e&&t._uU(0," (NO NDC) ")}var ra=function(n){return["/product-elist",n]};function sa(e,n){if(1&e&&(t.TgZ(0,"span"),t.TgZ(1,"a",36),t.YNc(2,ia,2,1,"span",37),t.YNc(3,oa,1,0,"ng-template",null,42,t.W1O),t.qZA(),t._UZ(5,"br"),t.TgZ(6,"span",43),t._uU(7),t.qZA(),t.qZA()),2&e){var a=t.MAs(4),o=t.oxw().$implicit;t.xp6(1),t.Q6J("routerLink",t.VKq(4,ra,o.productId)),t.xp6(1),t.Q6J("ngIf",o.productNDC)("ngIfElse",a),t.xp6(5),t.hij("(",o.fromtable,")")}}function ca(e,n){if(1&e&&(t.TgZ(0,"td",35),t.YNc(1,aa,7,6,"span",4),t.YNc(2,sa,8,6,"span",4),t.qZA()),2&e){var a=n.$implicit;t.xp6(1),t.Q6J("ngIf","GSRS"===a.fromtable),t.xp6(1),t.Q6J("ngIf","GSRS"!=a.fromtable)}}function ua(e,n){1&e&&(t.TgZ(0,"th",34),t._uU(1," Product Name "),t.qZA())}function pa(e,n){if(1&e&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&e){var a=n.$implicit;t.xp6(1),t.hij(" ",a.productName," ")}}function la(e,n){if(1&e&&(t.TgZ(0,"td",35),t.YNc(1,pa,2,1,"div",44),t.qZA()),2&e){var a=n.$implicit;t.xp6(1),t.Q6J("ngForOf",a.productNameAllList)}}function da(e,n){1&e&&(t.TgZ(0,"th",34),t._uU(1," Labeler Name "),t.qZA())}function ma(e,n){if(1&e&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&e){var a=n.$implicit;t.xp6(1),t.hij(" ",a.labelerName," ")}}function _a(e,n){if(1&e&&(t.TgZ(0,"td",35),t._uU(1),t.YNc(2,ma,2,1,"div",44),t.qZA()),2&e){var a=n.$implicit;t.xp6(1),t.hij(" ",a.labelerName," "),t.xp6(1),t.Q6J("ngForOf",a.productCompanyAllList)}}function va(e,n){1&e&&(t.TgZ(0,"th",34),t._uU(1," Country "),t.qZA())}function fa(e,n){if(1&e&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&e){var a=n.$implicit;t.xp6(1),t.hij(" ",a.countryWithoutCode," ")}}function ga(e,n){if(1&e&&(t.TgZ(0,"td",35),t.YNc(1,fa,2,1,"div",44),t.qZA()),2&e){var a=n.$implicit;t.xp6(1),t.Q6J("ngForOf",a.productCompanyAllList)}}function ba(e,n){1&e&&(t.TgZ(0,"th",34),t._uU(1," Status "),t.qZA())}function ha(e,n){if(1&e&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&e){var a=n.$implicit;t.xp6(1),t.hij(" ",a.status," ")}}function Ca(e,n){1&e&&(t.TgZ(0,"th",34),t._uU(1," Product Type "),t.qZA())}function xa(e,n){if(1&e&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&e){var a=n.$implicit;t.xp6(1),t.hij(" ",a.productType," ")}}function Sa(e,n){1&e&&(t.TgZ(0,"th",34),t._uU(1," Ingredient Type "),t.qZA())}function Ta(e,n){if(1&e&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&e){var a=t.oxw(2).$implicit;t.xp6(1),t.hij(" ",a.ingredientType," ")}}function Aa(e,n){if(1&e&&(t.TgZ(0,"div"),t.YNc(1,Ta,2,1,"div",4),t.qZA()),2&e){var a=t.oxw().$implicit,o=t.oxw(4);t.xp6(1),t.Q6J("ngIf",o.substance.uuid===a.substanceUuid)}}function Za(e,n){if(1&e&&(t.TgZ(0,"div"),t.YNc(1,Aa,2,1,"div",4),t.qZA()),2&e){var a=n.$implicit;t.xp6(1),t.Q6J("ngIf",a.substanceUuid)}}function ya(e,n){if(1&e&&(t.TgZ(0,"td",35),t.YNc(1,Za,2,1,"div",44),t.qZA()),2&e){var a=n.$implicit;t.xp6(1),t.Q6J("ngForOf",a.productIngredientAllList)}}function Ea(e,n){1&e&&(t.TgZ(0,"th",34),t._uU(1," Application Number "),t.qZA())}function Ua(e,n){if(1&e&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&e){var a=n.$implicit;t.xp6(1),t.hij(" ",a.appTypeNumber," ")}}function Na(e,n){1&e&&t._UZ(0,"tr",45)}function Da(e,n){1&e&&t._UZ(0,"tr",46)}var Pa=function(){return[5,10,25,100]};function Oa(e,n){if(1&e){var a=t.EpF();t.TgZ(0,"mat-tab",6),t.TgZ(1,"div",10),t.TgZ(2,"b"),t._uU(3),t.qZA(),t._uU(4," \xa0\xa0\xa0 "),t.TgZ(5,"span",11),t._uU(6),t.qZA(),t._uU(7," \xa0\xa0\xa0 "),t.YNc(8,Gn,4,0,"span",12),t.qZA(),t.TgZ(9,"div",13),t.YNc(10,Wn,2,0,"div",14),t.TgZ(11,"table",15),t.ynx(12,16),t.YNc(13,Kn,2,0,"th",17),t.YNc(14,ca,3,2,"td",18),t.BQk(),t.ynx(15,19),t.YNc(16,ua,2,0,"th",17),t.YNc(17,la,2,1,"td",18),t.BQk(),t.ynx(18,20),t.YNc(19,da,2,0,"th",17),t.YNc(20,_a,3,2,"td",18),t.BQk(),t.ynx(21,21),t.YNc(22,va,2,0,"th",17),t.YNc(23,ga,2,1,"td",18),t.BQk(),t.ynx(24,22),t.YNc(25,ba,2,0,"th",17),t.YNc(26,ha,2,1,"td",18),t.BQk(),t.ynx(27,23),t.YNc(28,Ca,2,0,"th",17),t.YNc(29,xa,2,1,"td",18),t.BQk(),t.ynx(30,24),t.YNc(31,Sa,2,0,"th",17),t.YNc(32,ya,2,1,"td",18),t.BQk(),t.ynx(33,25),t.YNc(34,Ea,2,0,"th",17),t.YNc(35,Ua,2,1,"td",18),t.BQk(),t.YNc(36,Na,1,0,"tr",26),t.YNc(37,Da,1,0,"tr",27),t.qZA(),t.qZA(),t.TgZ(38,"mat-paginator",28),t.NdJ("page",function(r){return t.CHM(a),t.oxw(2).getSubstanceProducts(r)}),t.qZA(),t.qZA()}if(2&e){var o=n.$implicit,c=t.oxw(2);t.s9C("label",o),t.xp6(3),t.hij(" ",o,""),t.xp6(3),t.Oqu(c.loadingStatus),t.xp6(2),t.Q6J("ngIf",c.isAdmin),t.xp6(2),t.Q6J("ngIf",c.showSpinner),t.xp6(1),t.Q6J("dataSource",c.paged),t.xp6(25),t.Q6J("matHeaderRowDef",c.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",c.displayedColumns),t.xp6(1),t.Q6J("length",c.totalRecords)("pageSize",5)("pageSizeOptions",t.DdM(11,Pa))}}function qa(e,n){if(1&e){var a=t.EpF();t.TgZ(0,"mat-tab",6),t.YNc(1,Hn,6,0,"div",4),t.TgZ(2,"mat-tab-group",7),t.NdJ("selectedTabChange",function(i){return t.CHM(a),t.oxw().tabSelected(i)}),t.YNc(3,Oa,39,12,"mat-tab",8),t.qZA(),t.qZA()}if(2&e){var o=t.oxw();t.MGl("label","Product (",o.productCount,")"),t.xp6(1),t.Q6J("ngIf",!0===o.loadingComplete&&!1===o.foundProvenanceList&&0===o.productCount),t.xp6(2),t.Q6J("ngForOf",o.provenanceList)}}function wa(e,n){if(1&e){var a=t.EpF();t.TgZ(0,"mat-tab",6),t.TgZ(1,"app-substance-application",47),t.NdJ("countApplicationOut",function(i){return t.CHM(a),t.oxw().getApplicationCount(i)}),t.qZA(),t.qZA()}if(2&e){var o=t.oxw();t.MGl("label","Application (",o.applicationCount,")"),t.xp6(1),t.Q6J("bdnum",o.bdnum)}}function Ya(e,n){if(1&e){var a=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"mat-tab",6),t.TgZ(2,"app-substance-clinical-trials",48),t.NdJ("countClinicalTrialOut",function(i){return t.CHM(a),t.oxw().getClinicalTrialCount(i)}),t.qZA(),t.qZA(),t.qZA()}if(2&e){var o=t.oxw();t.xp6(1),t.MGl("label","Clinical Trial (",o.clinicalTrialCount,")"),t.xp6(1),t.Q6J("bdnum",o.bdnum)("substanceUuid",o.substance.uuid)}}function Ia(e,n){if(1&e){var a=t.EpF();t.TgZ(0,"mat-tab",6),t.TgZ(1,"app-substance-clinical-trials-eu",49),t.NdJ("countClinicalTrialEuOut",function(i){return t.CHM(a),t.oxw().getClinicalTrialEuCount(i)}),t.qZA(),t.qZA()}if(2&e){var o=t.oxw();t.MGl("label","Clinical Trial Europe (",o.clinicalTrialEuCount,")"),t.xp6(1),t.Q6J("bdnum",o.bdnum)("substanceUuid",o.substance.uuid)}}function ka(e,n){if(1&e){var a=t.EpF();t.TgZ(0,"mat-tab",6),t.TgZ(1,"app-substance-adverseeventpt",50),t.NdJ("countAdvPtOut",function(i){return t.CHM(a),t.oxw().getAdvPtCount(i)}),t.qZA(),t.qZA()}if(2&e){var o=t.oxw();t.MGl("label","Adverse Event PT (",o.advPtCount,")"),t.xp6(1),t.Q6J("bdnum",o.bdnum)("substanceName",o.substanceName)}}function Ma(e,n){if(1&e){var a=t.EpF();t.TgZ(0,"mat-tab",6),t.TgZ(1,"app-substance-adverseeventdme",51),t.NdJ("countAdvDmeOut",function(i){return t.CHM(a),t.oxw().getAdvDmeCount(i)}),t.qZA(),t.qZA()}if(2&e){var o=t.oxw();t.MGl("label","Adverse Event DME (",o.advDmeCount,")"),t.xp6(1),t.Q6J("bdnum",o.bdnum)}}function Qa(e,n){if(1&e){var a=t.EpF();t.TgZ(0,"mat-tab",6),t.TgZ(1,"app-substance-adverseeventcvm",52),t.NdJ("countAdvCvmOut",function(i){return t.CHM(a),t.oxw().getAdvCvmCount(i)}),t.qZA(),t.qZA()}if(2&e){var o=t.oxw();t.MGl("label","Adverse Event CVM (",o.advCvmCount,")"),t.xp6(1),t.Q6J("bdnum",o.bdnum)}}function La(e,n){if(1&e){var a=t.EpF();t.TgZ(0,"mat-tab",6),t.TgZ(1,"app-substance-impurities",53),t.NdJ("countImpuritiesOut",function(i){return t.CHM(a),t.oxw().getImpuritiesCount(i)}),t.qZA(),t.qZA()}if(2&e){var o=t.oxw();t.MGl("label","Impurities Specs (",o.impuritiesCount,")"),t.xp6(1),t.Q6J("substanceUuid",o.substance.uuid)("substanceName",o.substanceName)}}var Ja=function(){var e=function(n){(0,x.Z)(o,n);var a=(0,S.Z)(o);function o(c,i,r,p,l,m,u){var s;return(0,C.Z)(this,o),(s=a.call(this,i,r)).router=c,s.gaService=i,s.productService=r,s.configService=p,s.authService=l,s.loadingService=m,s.dialog=u,s.productCount=0,s.applicationCount=0,s.clinicalTrialCount=0,s.clinicalTrialEuCount=0,s.advPtCount=0,s.advDmeCount=0,s.advCvmCount=0,s.impuritiesCount=0,s.provenance="",s.provenanceList="",s.datasourceList="",s.loadingStatus="",s.showSpinner=!1,s.foundProvenanceList=!1,s.loadingComplete=!1,s.substanceName="",s.privateExport=!1,s.disableExport=!1,s.etag="",s.etagAllExport="",s.displayedColumns=["productId","productName","labelerName","country","status","productNameType","ingredientType","applicationNumber"],s}return(0,h.Z)(o,[{key:"ngOnInit",value:function(){var i=this;this.loadedComponents=this.configService.configData.loadedComponents||null,this.authService.hasAnyRolesAsync("Admin","Updater","SuperUpdater").pipe((0,M.q)(1)).subscribe(function(r){i.isAdmin=r}),this.substance&&this.substance.uuid&&(this.getSubstanceKey(),this.getProductProvenanceList(),this.privateSearch='root_productIngredientAllList_substanceUuid:"'+this.substance.uuid+'"',this.getSubstanceProducts(null,"initial")),this.baseDomain=this.configService.configData.apiUrlDomain}},{key:"ngAfterViewInit",value:function(){}},{key:"getApplicationCount",value:function(i){this.applicationCount=i}},{key:"getClinicalTrialCount",value:function(i){this.clinicalTrialCount=i}},{key:"getClinicalTrialEuCount",value:function(i){this.clinicalTrialEuCount=i}},{key:"getAdvPtCount",value:function(i){this.advPtCount=i}},{key:"getAdvDmeCount",value:function(i){this.advDmeCount=i}},{key:"getAdvCvmCount",value:function(i){this.advCvmCount=i}},{key:"getImpuritiesCount",value:function(i){this.impuritiesCount=i}},{key:"getSubstanceKey",value:function(){var i=this;this.substance&&(this.substanceName=this.substance._name,this.substance.codes.length>0&&this.substance.codes.forEach(function(r){r.codeSystem&&"BDNUM"===r.codeSystem&&r.type&&"PRIMARY"===r.type&&(i.bdnum=r.code)}))}},{key:"getProductProvenanceList",value:function(){var i=this;this.productService.getProductProvenanceList(this.substance.uuid).subscribe(function(r){i.provenanceList=r,i.provenanceList&&i.provenanceList.length>0&&(i.foundProvenanceList=!0),i.loadingComplete=!0})}},{key:"getSubstanceProducts",value:function(i,r){var p=this;this.setPageEvent(i),this.showSpinner=!0;var m=this.productService.getProducts("default",this.page*this.pageSize,this.pageSize,this.privateSearch,this.privateFacetParams).subscribe(function(u){r&&"initial"===r?p.etagAllExport=u.etag:(p.productService.totalRecords=u.total,p.setResultData(u.content),p.productCount=u.total,p.etag=u.etag)},function(u){console.log("error")},function(){m.unsubscribe()});this.loadingStatus="",this.showSpinner=!1}},{key:"export",value:function(){var i=this;if(this.etagAllExport){var r="xlsx",p=this.getApiExportUrl(this.etagAllExport,r);""!==this.authService.getUser()&&this.dialog.open(O.L,{width:"700px",data:{extension:r,type:"substanceProduct",hideOptionButtons:!0}}).afterClosed().subscribe(function(m){var u=m.name,s=m.id;u&&""!==u&&(i.loadingService.setLoading(!0),i.authService.startUserDownload(p,i.privateExport,u+"."+r,s).subscribe(function(v){i.loadingService.setLoading(!1),i.router.navigate(["/user-downloads/",v.id])},function(v){return i.loadingService.setLoading(!1)}))})}}},{key:"getApiExportUrl",value:function(i,r){return this.productService.getApiExportUrl(i,r)}},{key:"tabSelected",value:function(i){if(i){var p=i.tab.textLabel;null!=p&&(this.loadingStatus="Loading data...",this.provenance=p,this.paged=[],this.privateSearch='root_productIngredientAllList_substanceUuid:"'+this.substance.uuid+'" AND root_provenance:'+this.provenance,this.getSubstanceProducts())}}}]),o}(D);return e.\u0275fac=function(a){return new(a||e)(t.Y36(b.F0),t.Y36(N.$),t.Y36($.M),t.Y36(k.E),t.Y36(P.e),t.Y36(q.b),t.Y36(w.uw))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-substance-products"]],features:[t.qOj],decls:12,vars:9,consts:[[1,"info-container"],["aria-label","FDA details","target","_blank",3,"href",4,"ngIf"],[1,"bordergray","mat-tab-style"],[3,"label",4,"ngIf"],[4,"ngIf"],["aria-label","FDA details","target","_blank",3,"href"],[3,"label"],[3,"selectedTabChange"],[3,"label",4,"ngFor","ngForOf"],[1,"padleft25px","colorblue"],[1,"padtop5px","padleft25px","font15px","colorblue"],[1,"colorred"],["class","export",4,"ngIf"],[1,"responsive","mat-table-style"],["class","spinnerstyle",4,"ngIf"],["mat-table","",1,"font12px",3,"dataSource"],["matColumnDef","productId"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","productName"],["matColumnDef","labelerName"],["matColumnDef","country"],["matColumnDef","status"],["matColumnDef","productNameType"],["matColumnDef","ingredientType"],["matColumnDef","applicationNumber"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","true",3,"length","pageSize","pageSizeOptions","page"],[1,"export"],["matTooltip","Export Search Results","mat-button","",1,"mat-button","export-button","mat-raised-button",3,"click"],["svgIcon","get_app"],[1,"spinnerstyle"],["diameter","80","color","warn","mode","indeterminate"],["mat-header-cell",""],["mat-cell",""],["target","_blank",3,"routerLink"],[4,"ngIf","ngIfElse"],["noProdNDCGSRS",""],["target","_blank","matTooltip","Edit GSRS Product Record",3,"routerLink",4,"ngIf"],["target","_blank","matTooltip","Edit GSRS Product Record",3,"routerLink"],["svgIcon","edit"],["noProdNDC",""],[1,"font10px","colorgray"],[4,"ngFor","ngForOf"],["mat-header-row",""],["mat-row",""],[3,"bdnum","countApplicationOut"],[3,"bdnum","substanceUuid","countClinicalTrialOut"],[3,"bdnum","substanceUuid","countClinicalTrialEuOut"],[3,"bdnum","substanceName","countAdvPtOut"],[3,"bdnum","countAdvDmeOut"],[3,"bdnum","countAdvCvmOut"],[3,"substanceUuid","substanceName","countImpuritiesOut"]],template:function(a,o){1&a&&(t.TgZ(0,"div",0),t.YNc(1,jn,1,1,"a",1),t.qZA(),t.TgZ(2,"div",2),t.TgZ(3,"mat-tab-group"),t.YNc(4,qa,4,3,"mat-tab",3),t.YNc(5,wa,2,2,"mat-tab",3),t.YNc(6,Ya,3,3,"div",4),t.YNc(7,Ia,2,3,"mat-tab",3),t.YNc(8,ka,2,3,"mat-tab",3),t.YNc(9,Ma,2,2,"mat-tab",3),t.YNc(10,Qa,2,2,"mat-tab",3),t.YNc(11,La,2,3,"mat-tab",3),t.qZA(),t.qZA()),2&a&&(t.xp6(1),t.Q6J("ngIf",o.substance&&o.substance.uuid),t.xp6(3),t.Q6J("ngIf",o.loadedComponents&&o.loadedComponents.products),t.xp6(1),t.Q6J("ngIf",o.loadedComponents&&o.loadedComponents.applications),t.xp6(1),t.Q6J("ngIf",o.loadedComponents&&o.loadedComponents.clinicaltrials),t.xp6(1),t.Q6J("ngIf",o.loadedComponents&&o.loadedComponents.clinicaltrials),t.xp6(1),t.Q6J("ngIf",o.loadedComponents&&o.loadedComponents.adverseevents),t.xp6(1),t.Q6J("ngIf",o.loadedComponents&&o.loadedComponents.adverseevents),t.xp6(1),t.Q6J("ngIf",o.loadedComponents&&o.loadedComponents.adverseevents),t.xp6(1),t.Q6J("ngIf",o.loadedComponents&&o.loadedComponents.impurities))},directives:[g.O5,I.SP,I.uX,g.sg,T.lW,A.Hw,Z.Ou,d.BZ,d.w1,d.fO,d.ge,d.Dz,d.ev,b.yS,d.as,d.XQ,d.nj,d.Gk,y.NW,St,Rt,re,Ue,je,un,$n],styles:[".mat-table-style[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%]{vertical-align:top;font-size:12px}.mat-tab-style[_ngcontent-%COMP%]   .mat-tab-labels[_ngcontent-%COMP%], .mat-tab-style[_ngcontent-%COMP%]   .mat-tab-label[_ngcontent-%COMP%], .mat-tab-style[_ngcontent-%COMP%]   .mat-tab-link[_ngcontent-%COMP%]{color:var(--regular-blue-color)}.bordergray[_ngcontent-%COMP%]{border:1px solid var(--regular-grey-color)}.font10px[_ngcontent-%COMP%]{font-size:10px}.font15px[_ngcontent-%COMP%]{font-size:15px}.colorgray[_ngcontent-%COMP%]{color:var(--regular-grey-color)}.padleft15px[_ngcontent-%COMP%]{padding-left:15px}.padleft25px[_ngcontent-%COMP%]{padding-left:25px}.padtop5px[_ngcontent-%COMP%]{padding-top:5px}.colorblue[_ngcontent-%COMP%]{color:var(--deep-purple-color)}.colorred[_ngcontent-%COMP%]{color:var(--regular-red-color)}.info-container[_ngcontent-%COMP%]{margin-bottom:15px}.info-container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--deep-blue-color-rgb-2);text-decoration:none}.spinnerstyle[_ngcontent-%COMP%]{position:absolute;inset:0 0 56px;background:var(--spinner-bg-color);z-index:1;display:-ms-flexbox;display:flex;-ms-flex-align:top;align-items:top;-ms-flex-pack:center;justify-content:center}"]}),e}(),Ra=_(33865),Fa=_(43365),F=_(90587),za=(_(64061),function(){var e=(0,h.Z)(function n(){(0,C.Z)(this,n)});return e.\u0275fac=function(a){return new(a||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[g.ez,B.o0.forChild(Ja),d.p0,Ra.HT,y.TU,Y.JX,Fa.c,I.Nh,T.ot,A.Ps,Z.Cq,F.UX,F.u5,b.Bz]]}),e}())}}]);
//# sourceMappingURL=4371.3ce32d48d4bc11ff.js.map