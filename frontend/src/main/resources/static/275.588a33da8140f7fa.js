"use strict";(self.webpackChunkgsrs_client=self.webpackChunkgsrs_client||[]).push([[275],{60275:function(Yt,x,l){l.r(x),l.d(x,{SubstanceCodesModule:function(){return qt}});var b=l(1884),S=l(39117),g=l(36362),v=l(44014),N=l(46751),O=l(56101),q=l(54025),Q=l(24874),Y=l(50253),J=l(63169),p=l(90587),t=l(86613),h=l(95758),I=l(54244),Z=l(44770),F=l(43365),m=l(97217),_=l(64316),A=l(65590),w=l(98002),y=l(91434),M=l(1130),D=l(73430),U=l(26439),P=l(89633);function $(e,o){1&e&&(t.TgZ(0,"th",26),t._uU(1," Classification Tree "),t.qZA())}function H(e,o){1&e&&t._UZ(0,"mat-icon",32)}var k=function(o){return{"padding-left.px":o}},L=function(o){return{search:o}};function V(e,o){if(1&e&&(t.TgZ(0,"div",29),t.YNc(1,H,1,0,"mat-icon",30),t.TgZ(2,"a",31),t._uU(3),t.qZA(),t.qZA()),2&e){var n=o.$implicit,a=o.index;t.Q6J("ngStyle",t.VKq(4,k,10*a)),t.xp6(1),t.Q6J("ngIf",a>0),t.xp6(1),t.Q6J("queryParams",t.VKq(6,L,'root_codes_comments:"'+n+'"')),t.xp6(1),t.hij(" ",n," ")}}function B(e,o){if(1&e&&(t.TgZ(0,"td",27),t.YNc(1,V,4,8,"div",28),t.qZA()),2&e){var n=o.$implicit,a=t.oxw();t.xp6(1),t.Q6J("ngForOf",a.getClassificationTree(n.comments))}}function j(e,o){1&e&&(t.TgZ(0,"th",33),t._uU(1," Code System "),t.qZA())}function E(e,o){1&e&&t._UZ(0,"mat-icon",37)}function R(e,o){if(1&e&&(t.TgZ(0,"span",35),t.YNc(1,E,1,0,"mat-icon",36),t.qZA()),2&e){var n=t.oxw().$implicit,a=t.oxw();t.xp6(1),t.Q6J("ngIf",a.codeIsProtected(n.access))}}function z(e,o){if(1&e&&(t.TgZ(0,"td",27),t._uU(1),t.ALo(2,"async"),t.ALo(3,"codeSystemDisplay"),t.YNc(4,R,2,1,"span",34),t.qZA()),2&e){var n=o.$implicit,a=t.oxw();t.xp6(1),t.hij(" ",t.lcZ(2,2,t.lcZ(3,4,n.codeSystem))," "),t.xp6(3),t.Q6J("ngIf",a.codeIsProtected(n.access))}}function W(e,o){1&e&&(t.TgZ(0,"th",33),t._uU(1," Code "),t.qZA())}function X(e,o){if(1&e&&(t.TgZ(0,"a",40),t._uU(1),t.qZA()),2&e){var n=t.oxw().$implicit;t.Q6J("href",n.url,t.LSH),t.xp6(1),t.Oqu(n.code)}}function K(e,o){if(1&e&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&e){var n=t.oxw().$implicit;t.xp6(1),t.hij(" ",n.code,"")}}function G(e,o){if(1&e&&(t.TgZ(0,"td",27),t.YNc(1,X,2,2,"a",38),t.YNc(2,K,2,1,"span",39),t.qZA()),2&e){var n=o.$implicit;t.xp6(1),t.Q6J("ngIf",n.url),t.xp6(1),t.Q6J("ngIf",!n.url)}}function tt(e,o){1&e&&(t.TgZ(0,"th",33),t._uU(1," Type "),t.qZA())}function et(e,o){if(1&e&&(t.TgZ(0,"td",27),t._uU(1),t.qZA()),2&e){var n=o.$implicit;t.xp6(1),t.hij(" ",n.type," ")}}function nt(e,o){if(1&e&&(t.TgZ(0,"th",26),t.TgZ(1,"div",41),t.TgZ(2,"mat-form-field"),t._UZ(3,"input",42),t.qZA(),t.qZA(),t.qZA()),2&e){var n=t.oxw();t.xp6(3),t.Q6J("formControl",n.codeSystemFilter)}}function ot(e,o){if(1&e&&(t.TgZ(0,"td",27),t._uU(1),t.ALo(2,"async"),t.ALo(3,"codeSystemDisplay"),t.qZA()),2&e){var n=o.$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,t.lcZ(3,3,n.codeSystem))," ")}}function it(e,o){if(1&e&&(t.TgZ(0,"th",26),t.TgZ(1,"div",41),t.TgZ(2,"mat-form-field"),t._UZ(3,"input",43),t.qZA(),t.qZA(),t.qZA()),2&e){var n=t.oxw();t.xp6(3),t.Q6J("formControl",n.codeFilter)}}function at(e,o){if(1&e&&(t.TgZ(0,"a",40),t._uU(1),t.qZA()),2&e){var n=t.oxw().$implicit;t.Q6J("href",n.url,t.LSH),t.xp6(1),t.Oqu(n.code)}}function st(e,o){if(1&e&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&e){var n=t.oxw().$implicit;t.xp6(1),t.hij(" ",n.code,"")}}function lt(e,o){if(1&e&&(t.TgZ(0,"td",27),t.YNc(1,at,2,2,"a",38),t.YNc(2,st,2,1,"span",39),t.qZA()),2&e){var n=o.$implicit;t.xp6(1),t.Q6J("ngIf",n.url),t.xp6(1),t.Q6J("ngIf",!n.url)}}function ct(e,o){if(1&e&&(t.TgZ(0,"mat-option",48),t._uU(1),t.qZA()),2&e){var n=o.$implicit;t.Q6J("value",n.display),t.xp6(1),t.Oqu(n.display)}}function rt(e,o){if(1&e&&(t.TgZ(0,"th",26),t.TgZ(1,"div",41),t.TgZ(2,"mat-form-field",44),t.TgZ(3,"mat-select",45),t.TgZ(4,"mat-select-trigger"),t._uU(5),t.qZA(),t.TgZ(6,"mat-option",46),t._uU(7,"Select Type Filter"),t.qZA(),t.YNc(8,ct,2,2,"mat-option",47),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e){var n=t.oxw();t.xp6(3),t.Q6J("formControl",n.typeFilter),t.xp6(2),t.hij(" ",n.typeFilter.value?n.typeFilter.value:""," "),t.xp6(3),t.Q6J("ngForOf",n.typeFilterOptions)}}function dt(e,o){if(1&e&&(t.TgZ(0,"td",27),t._uU(1),t.qZA()),2&e){var n=o.$implicit;t.xp6(1),t.hij(" ",n.type," ")}}function ut(e,o){1&e&&(t.TgZ(0,"th",33),t._uU(1," Comments "),t.qZA())}function mt(e,o){if(1&e&&(t.TgZ(0,"div",56),t.TgZ(1,"div",57),t._uU(2,"Comments:"),t.qZA(),t.TgZ(3,"div",58),t._uU(4),t.qZA(),t.qZA()),2&e){var n=t.oxw(2).$implicit;t.xp6(4),t.Oqu(n.codeText)}}function pt(e,o){if(1&e&&(t.TgZ(0,"div",56),t.TgZ(1,"div",57),t._uU(2,"Code Text:"),t.qZA(),t.TgZ(3,"div",58),t._uU(4),t.qZA(),t.qZA()),2&e){var n=t.oxw(2).$implicit;t.xp6(4),t.Oqu(n.comments)}}function ft(e,o){if(1&e&&(t.TgZ(0,"h2",51),t._uU(1,"Code Comments"),t.qZA(),t.TgZ(2,"div",52),t.YNc(3,mt,5,1,"div",53),t.YNc(4,pt,5,1,"div",53),t.qZA(),t.TgZ(5,"div",54),t._UZ(6,"span",1),t.TgZ(7,"button",55),t._uU(8,"Close"),t.qZA(),t.qZA()),2&e){var n=t.oxw().$implicit;t.xp6(3),t.Q6J("ngIf",n.codeText),t.xp6(1),t.Q6J("ngIf",n.comments)}}function Ct(e,o){if(1&e){var n=t.EpF();t.TgZ(0,"td",27),t.TgZ(1,"button",49),t.NdJ("click",function(){t.CHM(n);var i=t.MAs(4);return t.oxw().openModal(i)}),t._uU(2,"View"),t.qZA(),t.YNc(3,ft,9,2,"ng-template",null,50,t.W1O),t.qZA()}if(2&e){var a=o.$implicit;t.xp6(1),t.Q6J("disabled",!a.comments&&!a.codeText)}}function gt(e,o){1&e&&(t.TgZ(0,"th",26),t._uU(1," References "),t.qZA())}function ht(e,o){if(1&e&&(t.TgZ(0,"h2",51),t._uU(1,"References"),t.qZA(),t.TgZ(2,"div",52),t._UZ(3,"app-references-manager",60),t.qZA(),t.TgZ(4,"div",54),t._UZ(5,"span",1),t.TgZ(6,"button",55),t._uU(7,"Close"),t.qZA(),t.qZA()),2&e){var n=t.oxw().$implicit,a=t.oxw();t.xp6(3),t.Q6J("substance",a.substance)("references",n.references)}}function vt(e,o){if(1&e){var n=t.EpF();t.TgZ(0,"td",27),t.TgZ(1,"button",49),t.NdJ("click",function(){t.CHM(n);var i=t.MAs(4);return t.oxw().openModal(i)}),t._uU(2,"View"),t.qZA(),t.YNc(3,ht,8,2,"ng-template",null,59,t.W1O),t.qZA()}if(2&e){var a=o.$implicit;t.xp6(1),t.Q6J("disabled",a.references.length<=0)}}function Zt(e,o){1&e&&t._UZ(0,"th",26)}function _t(e,o){if(1&e){var n=t.EpF();t.TgZ(0,"th",26),t.TgZ(1,"div",41),t.TgZ(2,"button",6),t.NdJ("click",function(){return t.CHM(n),t.oxw().resetFilters()}),t._uU(3,"Reset"),t.qZA(),t.qZA(),t.qZA()}}function yt(e,o){1&e&&t._UZ(0,"tr",61)}function Tt(e,o){if(1&e&&t._UZ(0,"tr",62),2&e){var n=t.oxw();t.Q6J("hidden",n.hideFilters)}}function xt(e,o){1&e&&t._UZ(0,"tr",63)}var bt=function(o){return{classification:o}},St=function(){return[5,10,25,100]},Ft=function(){var e=function(o){(0,N.Z)(a,o);var n=(0,O.Z)(a);function a(d,i,s,r){var c;return(0,S.Z)(this,a),(c=n.call(this,i)).dialog=d,c.gaService=i,c.overlayContainerService=s,c.utilsService=r,c.codes=[],c.substanceUpdated=new Y.x,c.hideFilters=!0,c.showHideFilterText="Show Filter",c.codeSystemFilter=new p.NI,c.typeFilter=new p.NI,c.codeFilter=new p.NI,c.typeFilterOptions=[],c}return(0,b.Z)(a,[{key:"ngOnInit",value:function(){var i=this;this.substanceUpdated.subscribe(function(s){i.substance=s,i.codes=[],null!=i.substance&&null!=i.type&&("Codes - Classifications"===i.type?i.displayedColumns=["classificationTree","codeSystem","code","references"]:(i.displayedColumns=["codeSystem","code","type","comments","references"],i.displayedFilterColumns=["codeSystemFilter","codeFilter","typeFilter","emptyFilter","resetFilter"]),i.filterSubstanceCodes(),null!=i.codes&&i.codes.length?(i.codes.forEach(function(r){r.url&&(r.url=r.url.trim())}),i.filtered=i.codes,i.pageChange(),i.searchControl.valueChanges.subscribe(function(r){i.filterList(r,i.codes)},function(r){}),i.getTypeFilterOptions()):i.filtered=[])}),this.pageSize=10,this.overlayContainer=this.overlayContainerService.getContainerElement(),this.codeSystemFilter.valueChanges.subscribe(function(s){i.filterTable()}),this.codeFilter.valueChanges.subscribe(function(s){i.filterTable()}),this.typeFilter.valueChanges.subscribe(function(s){i.filterTable()})}},{key:"filterTable",value:function(i){var s=null===this.codeSystemFilter.value?"":this.codeSystemFilter.value,r=null===this.codeFilter.value?"":this.codeFilter.value,c=null===this.typeFilter.value?"":this.typeFilter.value;this.filtered=[];var f,u=(0,v.Z)(this.codes);try{for(u.s();!(f=u.n()).done;){var C=f.value;C.codeSystem.toLowerCase().includes(s.toLowerCase())&&C.code.toLowerCase().includes(r.toLowerCase())&&C.type.toLowerCase().includes(c.toLowerCase())&&this.filtered.push(C)}}catch(T){u.e(T)}finally{u.f()}this.pageChange()}},{key:"toggleFilter",value:function(){this.hideFilters=!this.hideFilters,this.showHideFilterText=this.hideFilters?"Show Filter":"Hide Filter"}},{key:"getTypeFilterValue",value:function(i){var r,s=(0,v.Z)(this.typeFilterOptions);try{for(s.s();!(r=s.n()).done;){var c=r.value;if(c.display===i)return c}}catch(u){s.e(u)}finally{s.f()}}},{key:"getTypeFilterOptions",value:function(){var r,i=this,s=(0,v.Z)(this.codes);try{var c=function(){var C=r.value.type,T={value:C,display:C};i.typeFilterOptions.filter(function(Qt){return Qt.value===C}).length>0||i.typeFilterOptions.push(T)};for(s.s();!(r=s.n()).done;)c()}catch(u){s.e(u)}finally{s.f()}}},{key:"sortData",value:function(i){var s=this,r=this.codes.slice();if(!i.active||""===i.direction)return this.filtered=r,void this.pageChange();this.filtered=r.sort(function(c,u){var f="asc"===i.direction;return s.utilsService.compare(c[i.active]?c[i.active].toString().toUpperCase():null,u[i.active]?u[i.active].toString().toUpperCase():null,f)}),this.pageChange()}},{key:"ngAfterViewInit",value:function(){}},{key:"filterSubstanceCodes",value:function(){var i=this;this.substance.codes&&this.substance.codes.length>0&&(this.substance.codes.forEach(function(s){(s._isClassification&&"Codes - Classifications"===i.type||!s._isClassification&&"Codes - Identifiers"===i.type)&&i.codes.push(s)}),this.countUpdate.emit(this.codes.length))}},{key:"codeIsProtected",value:function(i){var c,s=!1,r=(0,v.Z)(i);try{for(r.s();!(c=r.n()).done;)"protected"===c.value.toLowerCase()&&(s=!0)}catch(f){r.e(f)}finally{r.f()}return s}},{key:"getClassificationTree",value:function(i){return i.split("|")}},{key:"resetFilters",value:function(){this.pageChange(),this.searchControl.setValue(""),this.codeFilter.setValue(""),this.codeSystemFilter.setValue(""),this.typeFilter.setValue("")}},{key:"openModal",value:function(i){var s=this;this.gaService.sendEvent(this.analyticsEventCategory,"button","references view");var r=this.dialog.open(i,{minWidth:"40%",maxWidth:"90%"});this.overlayContainer.style.zIndex="1002",r.afterClosed().subscribe(function(c){s.overlayContainer.style.zIndex=null})}}]),a}(q.u);return e.\u0275fac=function(n){return new(n||e)(t.Y36(h.uw),t.Y36(Q.$),t.Y36(I.Xj),t.Y36(J.FW))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-substance-codes"]],features:[t.qOj],decls:44,vars:14,consts:[[1,"flex-row"],[1,"middle-fill"],[1,"search",3,"floatLabel"],["matInput","","placeholder","Search",3,"formControl"],[1,"responsive"],[1,"show-filter-span"],["mat-flat-button","","color","warn",1,"mat-button","mat-button-primary",3,"click"],["mat-table","","matSort","",3,"ngClass","dataSource","matSortChange"],["matColumnDef","classificationTree"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","codeSystem"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","code"],["matColumnDef","type"],["matColumnDef","codeSystemFilter"],["matColumnDef","codeFilter"],["matColumnDef","typeFilter"],["matColumnDef","comments"],["matColumnDef","references"],["matColumnDef","emptyFilter"],["matColumnDef","resetFilter"],["mat-header-row","",4,"matHeaderRowDef"],["mat-header-row","",3,"hidden",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","true",3,"length","pageSize","pageSizeOptions","page"],["mat-header-cell",""],["mat-cell",""],[3,"ngStyle",4,"ngFor","ngForOf"],[3,"ngStyle"],["svgIcon","subdirectory_arrow_right",4,"ngIf"],["routerLink","/browse-substance",3,"queryParams"],["svgIcon","subdirectory_arrow_right"],["mat-header-cell","","mat-sort-header",""],["matTooltip","Not Public",4,"ngIf"],["matTooltip","Not Public"],["svgIcon","lock","class","icon-align blue-font",4,"ngIf"],["svgIcon","lock",1,"icon-align","blue-font"],["class","a-link","target","_blank",3,"href",4,"ngIf"],[4,"ngIf"],["target","_blank",1,"a-link",3,"href"],[1,"tableFilter"],["matInput","","placeholder","Code System Filter",1,"form-field",3,"formControl"],["matInput","","placeholder","Code Filter",1,"form-field",3,"formControl"],["appearance","fill"],[3,"formControl"],["selected","",3,"value"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"mat-raised-button","mat-primary",3,"disabled","click"],["commentTemplate",""],["mat-dialog-title",""],["mat-dialog-content",""],["class","form-row",4,"ngIf"],["mat-dialog-actions",""],["mat-dialog-close","",1,"mat-raised-button","mat-primary"],[1,"form-row"],[1,"label"],[1,"content"],["refTemplate",""],[3,"substance","references"],["mat-header-row",""],["mat-header-row","",3,"hidden"],["mat-row",""]],template:function(n,a){1&n&&(t.TgZ(0,"div",0),t._UZ(1,"span",1),t.TgZ(2,"mat-form-field",2),t._UZ(3,"input",3),t.qZA(),t.qZA(),t.TgZ(4,"div",4),t.TgZ(5,"span",5),t.TgZ(6,"mat-label",6),t.NdJ("click",function(){return a.toggleFilter()}),t._uU(7),t.qZA(),t.qZA(),t.TgZ(8,"table",7),t.NdJ("matSortChange",function(i){return a.sortData(i)}),t.ynx(9,8),t.YNc(10,$,2,0,"th",9),t.YNc(11,B,2,1,"td",10),t.BQk(),t.ynx(12,11),t.YNc(13,j,2,0,"th",12),t.YNc(14,z,5,6,"td",10),t.BQk(),t.ynx(15,13),t.YNc(16,W,2,0,"th",12),t.YNc(17,G,3,2,"td",10),t.BQk(),t.ynx(18,14),t.YNc(19,tt,2,0,"th",12),t.YNc(20,et,2,1,"td",10),t.BQk(),t.ynx(21,15),t.YNc(22,nt,4,1,"th",9),t.YNc(23,ot,4,5,"td",10),t.BQk(),t.ynx(24,16),t.YNc(25,it,4,1,"th",9),t.YNc(26,lt,3,2,"td",10),t.BQk(),t.ynx(27,17),t.YNc(28,rt,9,3,"th",9),t.YNc(29,dt,2,1,"td",10),t.BQk(),t.ynx(30,18),t.YNc(31,ut,2,0,"th",12),t.YNc(32,Ct,5,1,"td",10),t.BQk(),t.ynx(33,19),t.YNc(34,gt,2,0,"th",9),t.YNc(35,vt,5,1,"td",10),t.BQk(),t.ynx(36,20),t.YNc(37,Zt,1,0,"th",9),t.BQk(),t.ynx(38,21),t.YNc(39,_t,4,0,"th",9),t.BQk(),t.YNc(40,yt,1,0,"tr",22),t.YNc(41,Tt,1,1,"tr",23),t.YNc(42,xt,1,0,"tr",24),t.qZA(),t.qZA(),t.TgZ(43,"mat-paginator",25),t.NdJ("page",function(i){return a.pageChange(i,a.analyticsEventCategory)}),t.qZA()),2&n&&(t.xp6(2),t.Q6J("floatLabel","never"),t.xp6(1),t.Q6J("formControl",a.searchControl),t.xp6(4),t.Oqu(a.showHideFilterText),t.xp6(1),t.Q6J("ngClass",t.VKq(11,bt,"Codes - Classifications"==a.type))("dataSource",a.paged),t.xp6(32),t.Q6J("matHeaderRowDef",a.displayedColumns),t.xp6(1),t.Q6J("matHeaderRowDef",a.displayedFilterColumns),t.xp6(1),t.Q6J("matRowDefColumns",a.displayedColumns),t.xp6(1),t.Q6J("length",a.filtered&&a.filtered.length||0)("pageSize",10)("pageSizeOptions",t.DdM(13,St)))},directives:[Z.KE,F.Nt,p.Fj,p.JJ,p.oH,Z.hX,m.BZ,_.YE,g.mk,m.w1,m.fO,m.ge,m.Dz,m.ev,g.sg,g.PC,g.O5,A.Hw,w.yS,_.nU,y.gD,y.$L,M.ey,h.uh,h.xY,h.H8,h.ZT,D.C,m.as,m.XQ,m.nj,m.Gk,U.NW],pipes:[g.Ov,P.q],styles:["table.mat-table[_ngcontent-%COMP%]{width:100%}td.mat-cell[_ngcontent-%COMP%]:not(:last-child), td.mat-footer-cell[_ngcontent-%COMP%]:not(:last-child), th.mat-header-cell[_ngcontent-%COMP%]:not(:last-child){padding-right:10px}td.mat-cell[_ngcontent-%COMP%], td.mat-footer-cell[_ngcontent-%COMP%], th.mat-header-cell[_ngcontent-%COMP%]{padding-top:10px;padding-bottom:10px}.no-bottom-border[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td.mat-cell[_ngcontent-%COMP%]{border-bottom:none}.mat-sort-header-content[_ngcontent-%COMP%]{display:block!important}.search[_ngcontent-%COMP%]{width:400px;max-width:100%}.a-link[_ngcontent-%COMP%]{text-decoration:none;color:var(--link-color)}.form-row[_ngcontent-%COMP%]{width:100%;display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;padding-bottom:25px}.form-row[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{width:10%;font-weight:600;min-width:100px}.form-row[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{width:90%}.show-filter-span[_ngcontent-%COMP%]{display:block;float:right}"]}),e}(),At=l(64061),wt=l(33865),Ut=l(34972),Nt=l(38277),Ot=l(2711),qt=function(){var e=(0,b.Z)(function o(){(0,S.Z)(this,o)});return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[g.ez,At.o.forChild(Ft),m.p0,wt.HT,U.TU,F.c,Z.lN,y.LD,p.UX,p.u5,Ut.dp,w.Bz,A.Ps,Nt.V,h.Is,_.JX,Ot.v]]}),e}()}}]);
//# sourceMappingURL=275.588a33da8140f7fa.js.map