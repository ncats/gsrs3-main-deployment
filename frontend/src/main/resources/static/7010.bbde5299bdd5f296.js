"use strict";(self.webpackChunkgsrs_client=self.webpackChunkgsrs_client||[]).push([[7010],{87010:function(tt,v,o){o.r(v),o.d(v,{SubstanceHistoryModule:function(){return _}});var f=o(1884),p=o(39117),m=o(36362),Z=o(46751),S=o(56101),T=o(2756),x=o(12570),H=o(50253),A=o(22544),t=o(86613),h=o(98002),U=o(93392),Y=o(54244),y=o(95758),u=o(97217);function N(n,e){1&n&&(t.TgZ(0,"th",12),t._uU(1," Displayed "),t.qZA())}function D(n,e){if(1&n){var s=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"button",16),t.NdJ("click",function(){t.CHM(s);var l=t.oxw().$implicit;return t.oxw().switchVersion(l.version)}),t._uU(2,"View"),t.qZA(),t.qZA()}}function V(n,e){1&n&&(t.TgZ(0,"span",17),t._uU(1," Viewing "),t.qZA())}function Q(n,e){if(1&n&&(t.TgZ(0,"td",13),t.YNc(1,D,3,0,"span",14),t.YNc(2,V,2,0,"span",15),t.qZA()),2&n){var s=e.$implicit,a=t.oxw();t.xp6(1),t.Q6J("ngIf",a.substance.version!=s.version),t.xp6(1),t.Q6J("ngIf",a.substance.version==s.version)}}function I(n,e){1&n&&(t.TgZ(0,"th",12),t._uU(1," Version "),t.qZA())}function B(n,e){if(1&n&&(t.TgZ(0,"td",13),t._uU(1),t.qZA()),2&n){var s=e.$implicit;t.xp6(1),t.hij(" ",s.version," ")}}function j(n,e){1&n&&(t.TgZ(0,"th",12),t._uU(1," Version Comments "),t.qZA())}function J(n,e){if(1&n&&(t.TgZ(0,"td",13),t._uU(1),t.qZA()),2&n){var s=e.$implicit;t.xp6(1),t.hij(" ",s.comments," ")}}function M(n,e){1&n&&(t.TgZ(0,"th",12),t._uU(1," Editor"),t.qZA())}function R(n,e){if(1&n&&(t.TgZ(0,"td",13),t._uU(1),t.qZA()),2&n){var s=e.$implicit;t.xp6(1),t.hij(" ",s.editor," ")}}function $(n,e){1&n&&(t.TgZ(0,"th",12),t._uU(1," Change Date "),t.qZA())}function F(n,e){if(1&n&&(t.TgZ(0,"td",13),t._uU(1),t.ALo(2,"date"),t.qZA()),2&n){var s=e.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,s.created,"short")," ")}}function O(n,e){1&n&&t._UZ(0,"th",12)}function w(n,e){if(1&n){var s=t.EpF();t.TgZ(0,"td",13),t.TgZ(1,"button",16),t.NdJ("click",function(){var r=t.CHM(s).$implicit;return t.oxw().restoreVersion(r.version)}),t._uU(2,"Restore"),t.qZA(),t.qZA()}}function z(n,e){1&n&&t._UZ(0,"tr",18)}function E(n,e){1&n&&t._UZ(0,"tr",19)}var X=function(){var n=function(e){(0,Z.Z)(a,e);var s=(0,S.Z)(a);function a(l,r,i,d,b){var c;return(0,p.Z)(this,a),(c=s.call(this)).substanceService=l,c.router=r,c.loadingService=i,c.overlayContainerService=d,c.dialog=b,c.displayedColumns=["view","version","versionComments","editor","changeDate","restore"],c.substanceUpdated=new H.x,c}return(0,f.Z)(a,[{key:"ngOnInit",value:function(){var r=this;this.substanceService.getEdits(this.substance.uuid).subscribe(function(i){r.versions=i},function(i){}),this.substanceService.checkVersion(this.substance.uuid).subscribe(function(i){r.latest=i}),this.overlayContainer=this.overlayContainerService.getContainerElement()}},{key:"ngAfterViewInit",value:function(){var r=this;this.substanceUpdated.subscribe(function(i){r.substance=i})}},{key:"switchVersion",value:function(r){this.router.navigate(["/substances/"+this.substance.uuid+"/v/"+r])}},{key:"restoreVersion",value:function(r){var i=this,d=this.dialog.open(A.h,{data:{substance:this.substance,version:r,latest:this.latest},width:"650px",autoFocus:!1,disableClose:!0});this.overlayContainer.style.zIndex="1002",d.afterClosed().subscribe(function(c){i.overlayContainer.style.zIndex=null,c&&"success"===c&&(i.router.onSameUrlNavigation="reload",i.router.navigate(["/substances/"+i.substance.uuid+"/"]))})}}]),a}(T.B);return n.\u0275fac=function(s){return new(s||n)(t.Y36(x.d),t.Y36(h.F0),t.Y36(U.b),t.Y36(Y.Xj),t.Y36(y.uw))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-substance-history"]],features:[t.qOj],decls:22,vars:3,consts:[[1,"responsive"],["mat-table","",3,"dataSource"],["matColumnDef","view"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","version"],["matColumnDef","versionComments"],["matColumnDef","editor"],["matColumnDef","changeDate"],["matColumnDef","restore"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],[4,"ngIf"],["class","centered",4,"ngIf"],[1,"mat-raised-button","mat-primary",3,"click"],[1,"centered"],["mat-header-row",""],["mat-row",""]],template:function(s,a){1&s&&(t.TgZ(0,"div",0),t.TgZ(1,"table",1),t.ynx(2,2),t.YNc(3,N,2,0,"th",3),t.YNc(4,Q,3,2,"td",4),t.BQk(),t.ynx(5,5),t.YNc(6,I,2,0,"th",3),t.YNc(7,B,2,1,"td",4),t.BQk(),t.ynx(8,6),t.YNc(9,j,2,0,"th",3),t.YNc(10,J,2,1,"td",4),t.BQk(),t.ynx(11,7),t.YNc(12,M,2,0,"th",3),t.YNc(13,R,2,1,"td",4),t.BQk(),t.ynx(14,8),t.YNc(15,$,2,0,"th",3),t.YNc(16,F,3,4,"td",4),t.BQk(),t.ynx(17,9),t.YNc(18,O,1,0,"th",3),t.YNc(19,w,3,0,"td",4),t.BQk(),t.YNc(20,z,1,0,"tr",10),t.YNc(21,E,1,0,"tr",11),t.qZA(),t.qZA()),2&s&&(t.xp6(1),t.Q6J("dataSource",a.versions),t.xp6(19),t.Q6J("matHeaderRowDef",a.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",a.displayedColumns))},directives:[u.BZ,u.w1,u.fO,u.ge,u.Dz,u.ev,m.O5,u.as,u.XQ,u.nj,u.Gk],pipes:[m.uU],styles:[".centered[_ngcontent-%COMP%]{text-align:center}"]}),n}(),P=o(64061),G=o(43365),L=o(26439),C=o(65590),K=o(64316),W=o(34972),k=o(33865),g=o(90587),q=o(38277),_=function(){var n=(0,f.Z)(function e(){(0,p.Z)(this,e)});return n.\u0275fac=function(s){return new(s||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[m.ez,P.o.forChild(X),u.p0,k.HT,L.TU,G.c,g.UX,g.u5,q.V,C.Ps,y.Is,K.JX,W.dp,h.Bz,C.Ps]]}),n}()}}]);
//# sourceMappingURL=7010.bbde5299bdd5f296.js.map